<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Genesis Frequency Generator">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#6B46C1">
    <meta name="format-detection" content="telephone=no">
    <title>ðŸŒŸ Genesis Frequency Generator (Free)</title>

    <link rel="manifest" href="/Frequency-Generator/manifest.json">
    <link rel="icon" type="image/png" sizes="192x192" href="/Frequency-Generator/Genesis.png">
    <link rel="apple-touch-icon" href="/Frequency-Generator/Genesis.png">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: url('/Frequency-Generator/Genesis.png') center center/cover fixed;
            min-height: 100vh;
            min-height: -webkit-fill-available;
            padding: 8px;
            padding-top: max(8px, env(safe-area-inset-top));
            padding-bottom: max(8px, env(safe-area-inset-bottom));
            padding-left: max(8px, env(safe-area-inset-left));
            padding-right: max(8px, env(safe-area-inset-right));
            color: #ffffff;
            overflow-x: hidden;
            position: relative;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 30%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(251, 191, 36, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(26, 0, 51, 0.6) 0%, rgba(26, 0, 51, 0.9) 100%);
            pointer-events: none;
            z-index: 1;
            animation: backgroundShift 20s ease-in-out infinite;
        }

        @keyframes backgroundShift {
            0%, 100% {
                background-position: 0% 0%;
            }
            25% {
                background-position: 100% 0%;
            }
            50% {
                background-position: 100% 100%;
            }
            75% {
                background-position: 0% 100%;
            }
        }

        /* Respect user's motion preferences */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        @media (min-width: 768px) {
            body {
                padding: 20px;
            }

            .container {
                margin: 0 auto;
                border-radius: 28px;
                padding: 25px;
            }
        }

        @media (max-width: 767px) {
            body {
                padding: 4px;
                background-attachment: scroll;
            }

            .container {
                margin: 0;
                border-radius: 16px;
                padding: 8px;
                max-width: none;
                width: calc(100vw - 8px);
                box-sizing: border-box;
            }

            .header {
                padding: 8px 0 16px 0;
            }

            .header h1 {
                font-size: 22px;
                line-height: 1.2;
            }

            .header p {
                font-size: 14px;
                line-height: 1.4;
            }

            .section {
                margin-bottom: 20px;
            }

            .section-title {
                font-size: 18px;
                margin-bottom: 12px;
            }

            .welcome-content {
                font-size: 14px;
                line-height: 1.5;
            }

            .welcome-content h3 {
                font-size: 16px;
            }

            .welcome-content ul, .welcome-content ol {
                padding-left: 16px;
            }

            .welcome-content li {
                margin-bottom: 6px;
            }

            .trinity-base {
                padding: 16px;
                margin: 16px 0;
            }

            .trinity-title {
                font-size: 16px;
                margin-bottom: 12px;
            }

            .trinity-frequencies {
                gap: 12px;
            }

            .trinity-freq {
                padding: 8px 12px;
            }

            .trinity-freq .hz {
                font-size: 18px;
            }

            .trinity-freq .label {
                font-size: 12px;
            }

            .visualizer {
                height: 120px;
                margin: 16px 0;
            }

            .frequency-vibration {
                height: 80px;
            }

            .recipes {
                display: grid;
                grid-template-columns: 1fr;
                gap: 8px;
            }

            .recipe-card {
                padding: 12px;
                font-size: 14px;
            }

            .recipe-header {
                font-size: 16px;
                margin-bottom: 8px;
            }

            .recipe-freqs {
                font-size: 12px;
                margin-bottom: 8px;
            }

            .recipe-description {
                font-size: 13px;
                line-height: 1.4;
            }

            .controls {
                padding: 16px;
            }

            .frequency-controls {
                gap: 12px;
            }

            .control-group {
                padding: 12px;
                border-radius: 8px;
            }

            .control-group input[type="number"] {
                font-size: 16px;
                padding: 8px;
            }

            .control-group input[type="range"] {
                height: 6px;
            }

            .range-value {
                font-size: 12px;
            }

            .duration-input-container input {
                font-size: 16px;
                padding: 10px;
            }

            .duration-buttons {
                gap: 6px;
                flex-wrap: wrap;
            }

            .duration-btn {
                font-size: 14px;
                padding: 8px 12px;
                min-width: 44px;
            }

            .button-group {
                gap: 8px;
                flex-wrap: wrap;
            }

            .button {
                font-size: 16px;
                padding: 12px 20px;
                min-height: 48px;
                min-width: 120px;
            }

            .status {
                font-size: 14px;
                padding: 12px;
                margin: 12px 0;
            }

            .instructions-panel {
                padding: 16px !important;
                margin: 0 8px 16px 8px !important;
                border-radius: 12px !important;
            }

            .instructions-header h2 {
                font-size: 20px !important;
            }

            .accordion-content {
                padding: 12px 4px 0 4px !important;
                font-size: 14px !important;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 4px;
                overflow-x: hidden;
            }

            .container {
                padding: 8px;
                border-radius: 12px;
                width: 100%;
                max-width: 100%;
                overflow-x: hidden;
            }

            .section {
                width: 100%;
                max-width: 100%;
                box-sizing: border-box;
                padding: 4px;
                margin-bottom: 12px;
                overflow-x: hidden;
            }

            .frequency-controls {
                gap: 0px;
                width: 100%;
                max-width: 100%;
                overflow-x: hidden;
                box-sizing: border-box;
            }

            .control-group {
                padding: 4px;
                width: 100%;
                max-width: 100%;
                box-sizing: border-box;
                overflow-x: hidden;
                overflow-y: visible;
            }

            .control-group > div {
                gap: 4px;
                width: 100%;
                max-width: 100%;
                display: flex;
                align-items: center;
                box-sizing: border-box;
            }

            .control-group input[type="number"] {
                flex: 1 1 auto;
                min-width: 0;
                width: 100%;
                box-sizing: border-box;
            }

            .control-group span {
                flex: 0 0 auto;
                width: 30px;
                text-align: right;
                font-size: 12px !important;
            }

            input[type="number"],
            input[type="text"],
            input[type="range"] {
                width: 100%;
                max-width: 100%;
                box-sizing: border-box;
                margin: 0;
                padding: 8px;
            }

            input[type="range"] {
                padding: 0;
                margin: 10px auto 6px auto;
                width: 92%;
                max-width: 92%;
                display: block;
            }

            .button-group {
                flex-direction: column;
                gap: 8px;
                width: 100%;
                max-width: 100%;
                padding: 0;
                margin: 0 auto;
            }

            .button {
                font-size: 14px;
                padding: 10px 12px;
                min-height: 44px;
                min-width: 0;
                width: 100%;
                max-width: 100%;
                box-sizing: border-box;
            }

            .duration-buttons {
                flex-direction: row;
                flex-wrap: wrap;
                gap: 4px;
                justify-content: space-between;
            }

            .duration-btn {
                font-size: 12px;
                padding: 6px 8px;
                min-width: 48%;
                flex: 0 0 48%;
                box-sizing: border-box;
            }

            .status {
                font-size: 12px;
                padding: 8px;
                margin: 8px 0;
            }

            .range-value {
                font-size: 11px;
            }

            .instructions-panel {
                padding: 12px !important;
                margin: 0 4px 12px 4px !important;
            }

            .instructions-header h2 {
                font-size: 18px !important;
            }

            .accordion-content {
                font-size: 12px !important;
            }
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(26, 0, 51, 0.95);
            backdrop-filter: blur(30px);
            border-radius: 28px;
            padding: 20px;
            box-shadow:
                0 25px 70px rgba(0, 0, 0, 0.6),
                0 0 0 1px rgba(139, 92, 246, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
            animation: slideUp 0.5s ease-out;
            position: relative;
            z-index: 2;
            overflow: hidden;
            width: 100%;
            box-sizing: border-box;
        }

        .container::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 30% 20%, rgba(251, 191, 36, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 70% 80%, rgba(139, 92, 246, 0.05) 0%, transparent 50%);
            pointer-events: none;
            animation: particleFloat 15s ease-in-out infinite;
        }

        @keyframes particleFloat {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
                opacity: 0.3;
            }
            50% {
                transform: translateY(-10px) rotate(180deg);
                opacity: 0.6;
            }
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('/Frequency-Generator/Genesis.png') center center/cover;
            border-radius: 28px;
            opacity: 0.12;
            z-index: -1;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes pulseGlow {
            0%, 100% {
                text-shadow: 0 0 20px rgba(251, 191, 36, 0.8),
                             0 0 40px rgba(251, 191, 36, 0.5),
                             0 0 60px rgba(251, 191, 36, 0.3);
            }
            50% {
                text-shadow: 0 0 30px rgba(251, 191, 36, 1),
                             0 0 60px rgba(251, 191, 36, 0.8),
                             0 0 90px rgba(251, 191, 36, 0.5);
            }
        }
        
        @keyframes shimmer {
            0% {
                background-position: -200% center;
            }
            100% {
                background-position: 200% center;
            }
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
            background: url('/Frequency-Generator/Genesis.png') center center/cover;
            border-radius: 20px;
            padding: 30px 20px;
            box-shadow: 
                0 10px 40px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 0, 51, 0.70);
            border-radius: 20px;
            z-index: 0;
        }
        
        .header > * {
            position: relative;
            z-index: 1;
        }

        .logo-container {
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .logo-image {
            width: 120px;
            height: 120px;
            object-fit: contain;
            filter: drop-shadow(0 0 20px rgba(251, 191, 36, 0.6));
            animation: logoGlow 3s ease-in-out infinite;
        }

        @keyframes logoGlow {
            0%, 100% {
                filter: drop-shadow(0 0 20px rgba(251, 191, 36, 0.6));
            }
            50% {
                filter: drop-shadow(0 0 30px rgba(251, 191, 36, 0.9));
            }
        }

        .hebrew-header {
            font-size: 32px;
            color: #fbbf24;
            font-weight: 700;
            margin-bottom: 10px;
            letter-spacing: 6px;
            animation: pulseGlow 3s ease-in-out infinite;
            text-shadow: 0 0 30px rgba(251, 191, 36, 0.6);
        }

        .hebrew-translation {
            font-size: 16px;
            color: #ffffff;
            font-weight: 500;
            margin-bottom: 20px;
            font-style: italic;
            opacity: 0.95;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }

        .main-title {
            font-size: 36px;
            font-weight: 800;
            background: linear-gradient(90deg, 
                #ffffff 0%, 
                #fbbf24 25%, 
                #c4b5fd 50%, 
                #fbbf24 75%, 
                #ffffff 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 4s linear infinite;
            margin-bottom: 20px;
            line-height: 1.3;
            filter: drop-shadow(0 0 25px rgba(251, 191, 36, 0.5));
            letter-spacing: 1px;
        }

        .subtitle {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(90deg, 
                #fbbf24 0%, 
                #c4b5fd 25%, 
                #ffffff 50%, 
                #c4b5fd 75%, 
                #fbbf24 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 4s linear infinite;
            margin-bottom: 20px;
            line-height: 1.4;
            text-shadow: 0 2px 20px rgba(139, 92, 246, 0.7);
            letter-spacing: 0.5px;
            text-align: center;
        }

        .gematria {
            font-size: 14px;
            color: #fbbf24;
            font-weight: 600;
            margin-bottom: 20px;
            text-shadow: 0 2px 5px rgba(251, 191, 36, 0.3);
        }
        
        .divider {
            height: 2px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(251, 191, 36, 0.3) 10%, 
                rgba(251, 191, 36, 0.8) 50%, 
                rgba(251, 191, 36, 0.3) 90%, 
                transparent 100%);
            margin: 15px auto;
            width: 80%;
            border-radius: 2px;
        }

        .trinity-base {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%);
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 16px;
            padding: 15px;
            margin-bottom: 25px;
            text-align: center;
            position: relative;
        }

        .trinity-base::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 0, 51, 0.75);
            border-radius: 14px;
            z-index: 0;
        }

        .trinity-base > * {
            position: relative;
            z-index: 1;
        }

        .trinity-title {
            font-size: 18px;
            font-weight: 600;
            color: #c4b5fd;
            margin-bottom: 10px;
        }

        .trinity-frequencies {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            text-align: center;
        }

        .trinity-freq {
            text-align: center;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(139, 92, 246, 0.2);
            position: relative;
            overflow: hidden;
        }

        .trinity-freq::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 0, 51, 0.80);
            z-index: 0;
        }

        .trinity-freq > * {
            position: relative;
            z-index: 1;
        }

        .trinity-freq .hz {
            font-size: 20px;
            font-weight: 700;
            color: #fbbf24;
            text-shadow: 0 2px 5px rgba(251, 191, 36, 0.3);
        }

        .trinity-freq .label {
            font-size: 12px;
            color: #a78bfa;
            margin-top: 2px;
        }

        .trinity-arrow {
            color: #c4b5fd;
            font-size: 18px;
        }

        .section {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(139, 92, 246, 0.2);
            position: relative;
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.03);
        }

        .section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 0, 51, 0.85);
            border-radius: 20px;
            z-index: 0;
        }

        .section > * {
            position: relative;
            z-index: 1;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-align: center;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        .section-title::before {
            content: 'ðŸŒŸ';
            font-size: 16px;
        }

        .section-title::after {
            content: 'ðŸŒŸ';
            font-size: 16px;
        }

        .controls {
            display: grid;
            gap: 15px;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            overflow-x: hidden;
        }
        
        .frequency-controls {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
        }
        
        @media (min-width: 768px) {
            .frequency-controls {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05), url('/Frequency-Generator/Genesis.png') center center/cover;
            border-radius: 12px;
            border: 1px solid rgba(139, 92, 246, 0.1);
            text-align: center;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            position: relative;
            overflow: hidden;
        }

        .control-group::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 0, 51, 0.85);
            z-index: 0;
        }

        .control-group > * {
            position: relative;
            z-index: 1;
        }

        .duration-control {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%);
            border: 2px solid rgba(139, 92, 246, 0.3);
        }

        .duration-input-wrapper {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .duration-buttons {
            display: flex;
            gap: 8px;
            justify-content: flex-start;
        }

        .duration-btn {
            padding: 8px 12px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05), url('Genesis.png') center center/cover;
            color: #a78bfa;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .duration-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 0, 51, 0.80);
            z-index: 0;
        }

        .duration-btn > * {
            position: relative;
            z-index: 1;
        }

        .duration-btn:hover {
            background: rgba(139, 92, 246, 0.2), url('Genesis.png') center center/cover;
            border-color: #c4b5fd;
            color: #fbbf24;
        }

        .duration-btn:hover::before {
            background: rgba(26, 0, 51, 0.65);
        }

        label {
            font-size: 14px;
            font-weight: 500;
            color: #a78bfa;
            text-align: center;
        }

        input[type="number"],
        input[type="range"],
        select {
            width: 100%;
            padding: 10px;
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 8px;
            text-align: center;
            background: rgba(26, 0, 51, 0.9);
            color: #fbbf24;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        input[type="number"]:focus,
        select:focus {
            outline: none;
            border-color: #fbbf24;
            box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.1);
            background: rgba(26, 0, 51, 0.95);
        }

        input[type="range"] {
            padding: 0;
            margin: 8px auto;
            height: 40px;
            width: 92%;
            max-width: 92%;
            box-sizing: border-box;
            -webkit-appearance: none;
            appearance: none;
            display: block;
        }

        input[type="range"]::-webkit-slider-container {
            width: 100%;
            max-width: 100%;
        }

        #duration {
            font-size: 18px;
            text-align: center;
            font-weight: 600;
            background: rgba(26, 0, 51, 0.95);
            border: 2px solid rgba(139, 92, 246, 0.3);
            color: #fbbf24;
            letter-spacing: 2px;
        }

        #duration:focus {
            border-color: #fbbf24;
            box-shadow: 0 0 10px rgba(251, 191, 36, 0.3);
            background: rgba(26, 0, 51, 0.98);
        }

        option {
            text-align: center !important;
            text-align-last: center;
        }

        label[for^="volume"] {
            display: none;
        }

        .range-value {
            text-align: center;
            font-size: 14px;
            color: #fbbf24;
            font-weight: 600;
            margin-top: 5px;
        }

        .button {
            padding: 12px 20px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
            will-change: transform;
        }

        .button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('Genesis.png') center center/cover;
            opacity: 0.15;
            z-index: 0;
        }

        .button > * {
            position: relative;
            z-index: 1;
        }

        .button-primary {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: #fff;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
        }

        .button-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
        }

        .button-primary:active {
            transform: translateY(0);
        }

        .button-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #a78bfa;
            border: 2px solid rgba(139, 92, 246, 0.3);
        }

        .button-secondary:hover {
            background: rgba(139, 92, 246, 0.2);
            border-color: #a78bfa;
        }

        .button-danger {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: #fff;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: flex-start;
            flex-wrap: wrap;
        }

        .recipes {
            display: grid;
            gap: 10px;
        }

        .category-tab {
            background: rgba(139, 92, 246, 0.1), url('Genesis.png') center center/cover;
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 12px;
            margin-bottom: 10px;
            overflow: hidden;
            transition: all 0.3s ease;
            position: relative;
        }

        .category-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 0, 51, 0.82);
            z-index: 0;
            pointer-events: none;
        }

        .category-tab > * {
            position: relative;
            z-index: 1;
        }

        .category-header {
            padding: 18px 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(139, 92, 246, 0.15), url('Genesis.png') center center/cover;
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            border-radius: 16px;
            border: 1px solid rgba(139, 92, 246, 0.2);
            box-shadow: 
                0 2px 12px rgba(139, 92, 246, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .category-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 0, 51, 0.70);
            z-index: 0;
            transition: background 0.35s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .category-header > * {
            position: relative;
            z-index: 1;
        }

        .category-header:hover {
            background: rgba(139, 92, 246, 0.25), url('Genesis.png') center center/cover;
            border-color: rgba(139, 92, 246, 0.35);
            transform: translateY(-2px);
            box-shadow: 
                0 4px 20px rgba(139, 92, 246, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.08);
        }

        .category-header:hover::before {
            background: rgba(26, 0, 51, 0.60);
        }

        .category-title {
            font-size: 16px;
            font-weight: 700;
            color: #fbbf24;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex: 1;
        }

        .category-icon {
            font-size: 20px;
        }

        .category-arrow {
            font-size: 18px;
            color: #a78bfa;
            transition: transform 0.3s ease;
        }

        .category-tab.expanded .category-arrow {
            transform: rotate(90deg);
        }

        .category-content {
            display: none;
            transition: all 0.4s ease;
        }

        .category-tab.expanded .category-content {
            display: block;
        }

        .category-tracks {
            padding: 10px;
            display: grid;
            gap: 8px;
        }

        .recipe-item {
            background: rgba(255, 255, 255, 0.05), url('Genesis.png') center center/cover;
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 14px;
            padding: 14px 16px;
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            display: grid;
            grid-template-columns: 1fr auto auto;
            gap: 12px;
            align-items: center;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 1px 8px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.03);
        }

        .recipe-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 0, 51, 0.88);
            z-index: 0;
            transition: background 0.35s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .recipe-item > * {
            position: relative;
            z-index: 1;
        }

        .recipe-item:hover {
            background: rgba(139, 92, 246, 0.1), url('Genesis.png') center center/cover;
            border-color: #a78bfa;
            transform: translateY(-2px);
            box-shadow: 
                0 4px 16px rgba(139, 92, 246, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .recipe-item:hover::before {
            background: rgba(26, 0, 51, 0.75);
        }

        .recipe-item.active {
            background: rgba(139, 92, 246, 0.2), url('Genesis.png') center center/cover;
            border-color: #fbbf24;
            box-shadow: 
                0 0 20px rgba(251, 191, 36, 0.25),
                0 4px 16px rgba(139, 92, 246, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.08);
        }

        .recipe-item.active::before {
            background: rgba(26, 0, 51, 0.70);
        }

        .recipe-info {
            text-align: left;
            cursor: default;
        }

        .recipe-name {
            font-size: 16px;
            font-weight: 600;
            color: #c4b5fd;
            margin-bottom: 4px;
        }

        .recipe-freqs {
            font-size: 13px;
            color: #a78bfa;
            margin-bottom: 0;
        }

        .recipe-buttons {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .track-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: 2px solid rgba(139, 92, 246, 0.4);
            background: rgba(139, 92, 246, 0.2), url('Genesis.png') center center/cover;
            color: #c4b5fd;
            font-size: 19px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            flex-shrink: 0;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .track-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 0, 51, 0.70);
            z-index: 0;
            transition: background 0.35s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .track-btn > * {
            position: relative;
            z-index: 1;
        }

        .track-btn:hover {
            background: rgba(139, 92, 246, 0.4), url('Genesis.png') center center/cover;
            border-color: #fbbf24;
            color: #fbbf24;
            transform: scale(1.15) rotate(5deg);
            box-shadow: 
                0 4px 16px rgba(139, 92, 246, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .track-btn:hover::before {
            background: rgba(26, 0, 51, 0.50);
        }

        .track-btn.play-btn:hover {
            background: rgba(34, 197, 94, 0.3), url('Genesis.png') center center/cover;
            border-color: #22c55e;
            color: #22c55e;
            box-shadow:
                0 4px 16px rgba(34, 197, 94, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .track-btn.play-btn.playing {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.4), rgba(22, 163, 74, 0.4)), url('Genesis.png') center center/cover;
            border-color: #22c55e;
            color: #ffffff;
            box-shadow:
                0 0 20px rgba(34, 197, 94, 0.6),
                0 4px 16px rgba(34, 197, 94, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            animation: pulsePlaying 2s ease-in-out infinite;
        }

        .track-btn.play-btn.playing::before {
            background: rgba(34, 197, 94, 0.3);
        }

        @keyframes pulsePlaying {
            0%, 100% {
                transform: scale(1);
                box-shadow:
                    0 0 20px rgba(34, 197, 94, 0.6),
                    0 4px 16px rgba(34, 197, 94, 0.4),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2);
            }
            50% {
                transform: scale(1.05);
                box-shadow:
                    0 0 30px rgba(34, 197, 94, 0.8),
                    0 6px 20px rgba(34, 197, 94, 0.6),
                    inset 0 1px 0 rgba(255, 255, 255, 0.3);
            }
        }

        .track-btn.info-btn:hover {
            background: rgba(251, 191, 36, 0.3), url('Genesis.png') center center/cover;
            border-color: #fbbf24;
            color: #fbbf24;
            box-shadow: 
                0 4px 16px rgba(251, 191, 36, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .info-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
            animation: fadeIn 0.3s ease;
            will-change: opacity;
        }

        .info-modal.active {
            display: flex;
        }

        /* Upgrade modal sits on top, not dimmed */
        .upgrade-modal {
            display: none;
            position: fixed;
            inset: 0;
            z-index: 11000;
            background: rgba(0,0,0,0.65);
            align-items: center;
            justify-content: center;
            padding: 20px;
            box-sizing: border-box;
        }

        .upgrade-modal-content {
            position: relative;
            z-index: 11001;
        }

        /* Ensure other info-modals do not force higher stacking */
        .info-modal .info-modal-content {
            position: relative;
            z-index: 10001;
        }

        /* Force hide all modals except active one */
        .info-modal:not(.active) {
            display: none !important;
        }

        .info-modal.active {
            display: flex !important;
            opacity: 1 !important;
            visibility: visible !important;
            z-index: 10000 !important;
        }
        
        /* Safari compatibility for welcome modal */
        #immersiveWelcome.active {
            display: flex !important;
            opacity: 1 !important;
            visibility: visible !important;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .info-modal-content {
            background: linear-gradient(135deg, rgba(26,0,51,0.98), rgba(139,92,246,0.9)), url('Genesis.png') center center/cover;
            border-radius: 24px;
            padding: 40px;
            max-width: 650px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow:
                0 25px 80px rgba(0, 0, 0, 0.6),
                0 0 0 2px rgba(251, 191, 36, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            animation: slideUpModal 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            border: 1px solid rgba(139, 92, 246, 0.4);
        }

        @keyframes slideUpModal {
            from {
                transform: translateY(30px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .info-modal-header {
            color: #fbbf24;
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 15px;
            padding-right: 40px;
            text-align: center;
            background: linear-gradient(90deg, #fbbf24 0%, #c4b5fd 50%, #fbbf24 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 3s linear infinite;
            text-shadow: 0 0 20px rgba(251, 191, 36, 0.5);
        }

        .info-modal-freqs {
            color: #c4b5fd;
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 25px;
            padding: 15px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(168, 85, 247, 0.2));
            border-radius: 12px;
            text-align: center;
            border: 1px solid rgba(139, 92, 246, 0.3);
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .info-modal-body {
            color: #ffffff;
            font-size: 16px;
            line-height: 1.8;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        .info-modal-body h3 {
            color: #fbbf24;
            font-size: 20px;
            font-weight: 700;
            margin-top: 25px;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 2px solid rgba(251, 191, 36, 0.3);
            text-shadow: 0 0 10px rgba(251, 191, 36, 0.5);
        }

        .info-modal-body p {
            margin-bottom: 18px;
            color: #e2e8f0;
        }

        .info-modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: 2px solid rgba(251, 191, 36, 0.4);
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(139, 92, 246, 0.2));
            color: #fbbf24;
            font-size: 24px;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .info-modal-close:hover {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.4), rgba(139, 92, 246, 0.4));
            border-color: #fbbf24;
            color: #1a0033;
            transform: rotate(90deg) scale(1.1);
            box-shadow: 0 4px 16px rgba(251, 191, 36, 0.4);
        }

        .status {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 14px;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .status::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('Genesis.png') center center/cover;
            opacity: 0.1;
            z-index: 0;
        }

        .status > * {
            position: relative;
            z-index: 1;
        }

        .status.playing {
            background: rgba(34, 197, 94, 0.1);
            color: #22c55e;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .status.stopped {
            background: rgba(148, 163, 184, 0.1);
            color: #94a3b8;
            border: 1px solid rgba(148, 163, 184, 0.3);
        }

        .status.floating {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            margin: 0;
            border-radius: 0;
            z-index: 1000;
            backdrop-filter: blur(20px);
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
        }

        @media (min-width: 768px) {
            .status.floating {
                bottom: 20px;
                left: 20px;
                right: auto;
                width: 400px;
                border-radius: 8px;
            }
        }

        .visualizer {
            height: 120px;
            background: rgba(255, 255, 255, 0.02), url('Genesis.png') center center/cover;
            border-radius: 12px;
            margin: 15px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .visualizer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 0, 51, 0.85);
            z-index: 0;
        }

        .visualizer > * {
            position: relative;
            z-index: 1;
        }

        .visualizer-content {
            text-align: center;
            color: #c4b5fd;
            font-size: 14px;
        }

        .frequency-vibration {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
        }

        .vibration-wave {
            position: absolute;
            width: 100%;
            height: 80px;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .vibration-wave svg {
            width: 100%;
            height: 100%;
        }

        .vibration-wave:nth-child(1) {
            animation: wave1 1s ease-in-out infinite;
        }

        .vibration-wave:nth-child(2) {
            animation: wave2 0.5s ease-in-out infinite;
        }

        .vibration-wave:nth-child(3) {
            animation: wave3 1.5s ease-in-out infinite;
            opacity: 0.4;
        }

        @keyframes wave1 {
            0%, 100% {
                transform: translateY(-50%) scaleY(0.8);
            }
            50% {
                transform: translateY(-50%) scaleY(1.2);
            }
        }

        @keyframes wave2 {
            0%, 100% {
                transform: translateY(-50%) scaleY(0.7);
            }
            50% {
                transform: translateY(-50%) scaleY(1.3);
            }
        }

        @keyframes wave3 {
            0%, 100% {
                transform: translateY(-50%) scaleY(0.9);
            }
            50% {
                transform: translateY(-50%) scaleY(1.1);
            }
        }

        .sacred-geometry {
            display: none;
        }
        
        .language-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .language-btn {
            padding: 10px 20px;
            border: 2px solid rgba(139, 92, 246, 0.35);
            border-radius: 10px;
            background: rgba(26, 0, 51, 0.5), url('Genesis.png') center center/cover;
            color: #a78bfa;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            text-decoration: none;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.03);
        }

        .language-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 0, 51, 0.75);
            z-index: 0;
            transition: background 0.35s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .language-btn > * {
            position: relative;
            z-index: 1;
        }
        
        .language-btn:hover {
            border-color: #fbbf24;
            background: rgba(139, 92, 246, 0.2), url('Genesis.png') center center/cover;
            color: #fbbf24;
            transform: translateY(-2px);
            box-shadow: 
                0 4px 12px rgba(139, 92, 246, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .language-btn:hover::before {
            background: rgba(26, 0, 51, 0.60);
        }
        
        .language-btn.active {
            border-color: #fbbf24;
            background: rgba(251, 191, 36, 0.2), url('Genesis.png') center center/cover;
            color: #fbbf24;
            box-shadow: 
                0 0 20px rgba(251, 191, 36, 0.35),
                0 4px 12px rgba(139, 92, 246, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.08);
        }

        .language-btn.active::before {
            background: rgba(26, 0, 51, 0.55);
        }
        
        .add-to-home {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.95) 0%, rgba(107, 70, 193, 0.95) 100%);
            padding: 15px;
            text-align: center;
            color: #fff;
            font-size: 14px;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            animation: slideUpBanner 0.5s ease-out;
        }
        
        @media (max-width: 768px) {
            .add-to-home {
                display: block;
            }
        }
        
        @keyframes slideUpBanner {
            from {
                transform: translateY(100%);
            }
            to {
                transform: translateY(0);
            }
        }
        
        .add-to-home-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .add-to-home-icon {
            font-size: 24px;
        }
        
        .add-to-home-text {
            font-weight: 600;
            line-height: 1.4;
        }
        
        .add-to-home-close {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            color: #fff;
            font-size: 20px;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s;
        }
        
        .add-to-home-close:hover {
            opacity: 1;
        }

        

        @media (max-width: 480px) {
            body {
                padding: 5px;
            }

            .container {
                padding: 12px;
                border-radius: 16px;
                margin: 0;
            }

            .header {
                padding: 8px 0 12px 0;
                text-align: center;
            }

            .header h1 {
                font-size: 24px;
                margin-bottom: 8px;
                color: #ffffff;
                text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            }

            .header p {
                font-size: 14px;
                color: #e0e7ff;
                line-height: 1.4;
            }

            .info-modal {
                padding: 8px;
            }

            .info-modal-content {
                padding: 20px 16px;
                max-width: 95vw;
                border-radius: 16px;
                margin: 0 auto;
            }

            .info-modal-header {
                font-size: 22px;
                margin-bottom: 16px;
                color: #fbbf24;
                text-shadow: 0 1px 2px rgba(0,0,0,0.7);
            }

            .info-modal-body {
                font-size: 15px;
                color: #ffffff;
                line-height: 1.6;
            }

            .info-modal-body h3 {
                color: #d4d4ff;
                font-size: 16px;
                font-weight: 600;
            }

            .info-modal-body p {
                color: #f0f0ff;
                margin-bottom: 12px;
                line-height: 1.5;
            }

            /* Improve button visibility on mobile */
            .button {
                font-size: 16px;
                padding: 14px 24px;
                min-height: 48px;
                border-radius: 25px;
                font-weight: 600;
                text-align: center;
                display: inline-flex;
                align-items: center;
                justify-content: center;
                white-space: nowrap;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            }

            .button:active {
                transform: scale(0.98);
            }

            .info-modal-close {
                width: 40px;
                height: 40px;
                font-size: 22px;
            }
        }

        /* Freemium Styles */
        .premium-lock {
            position: relative;
            opacity: 0.7;
        }

        .premium-lock input[type="number"],
        .premium-lock input[type="range"],
        .premium-lock button {
            pointer-events: none;
            opacity: 0.5;
        }

        .premium-lock::after {
            content: 'ðŸ”’';
            position: absolute;
            top: 8px;
            right: 8px;
            font-size: 14px;
            color: #fbbf24;
            background: rgba(26, 0, 51, 0.8);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        .premium-lock > div:first-child {
            position: relative;
        }

        .premium-lock > div:first-child::after {
            content: 'ðŸ”’';
            position: absolute;
            right: -30px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 16px;
            color: #fbbf24;
            background: rgba(26, 0, 51, 0.9);
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            pointer-events: none;
        }

        /* Upgrade Modal */
        .upgrade-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10000;
            animation: fadeIn 0.3s ease-out;
            align-items: flex-start;
            justify-content: center;
            padding: 40px 20px 20px 20px;
            box-sizing: border-box;
        }

        .upgrade-modal-content {
            background: linear-gradient(135deg, rgba(26,0,51,0.95), rgba(139,92,246,0.9));
            border: 2px solid rgba(251,191,36,0.5);
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            max-height: calc(100vh - 80px);
            overflow-y: auto;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            position: relative;
            z-index: 10001;
        }

        .upgrade-modal-header {
            color: #fbbf24;
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .upgrade-modal-body {
            color: #e0e7ff;
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 25px;
        }

        .upgrade-features {
            background: rgba(251,191,36,0.1);
            border: 1px solid rgba(251,191,36,0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
        }

        .upgrade-features h3 {
            color: #fbbf24;
            font-size: 18px;
            margin-bottom: 15px;
            text-align: center;
        }

        .upgrade-features ul {
            list-style: none;
            padding: 0;
        }

        .upgrade-features li {
            color: #d1d5db;
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .upgrade-features li::before {
            content: 'âœ¨';
            position: absolute;
            left: 0;
        }

        .upgrade-btn {
            background: linear-gradient(90deg, #fbbf24, #f59e0b);
            color: #1a0033;
            border: none;
            border-radius: 25px;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(251,191,36,0.3);
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin: 10px;
        }

        .upgrade-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(251,191,36,0.4);
        }

        .upgrade-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            color: #c4b5fd;
            font-size: 28px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
        }

        .upgrade-close:hover {
            background: rgba(139, 92, 246, 0.2);
        }

        /* Duration input with side lock */
        .duration-input-container {
            position: relative;
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .duration-input-container input {
            flex: 1;
            padding-right: 40px; /* Make room for lock icon */
            opacity: 0.7;
            cursor: pointer;
        }

        .duration-input-container input:hover {
            opacity: 0.9;
        }



        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Mobile optimizations for iPhone SE */
        @media (max-width: 320px) {
            body {
                padding: 2px;
            }

            .container {
                padding: 8px;
                border-radius: 8px;
            }

            .header h1 {
                font-size: 18px;
                line-height: 1.2;
            }

            .header p {
                font-size: 12px;
            }

            .info-modal-content {
                padding: 12px 8px;
                max-width: 99vw;
                border-radius: 8px;
            }

            .info-modal-header {
                font-size: 18px;
                margin-bottom: 10px;
            }

            .info-modal-body {
                font-size: 13px;
            }

            .button {
                font-size: 14px !important;
                padding: 10px 16px !important;
                min-height: 40px;
            }
        }

        @media (max-width: 375px) {
            body {
                padding: 3px;
            }

            .container {
                padding: 8px;
                border-radius: 10px;
            }

            .header h1 {
                font-size: 18px;
                line-height: 1.2;
            }

            .header p {
                font-size: 12px;
                line-height: 1.3;
            }

            .welcome-content {
                font-size: 13px;
            }

            .welcome-content h3 {
                font-size: 15px;
            }

            .trinity-title {
                font-size: 14px;
            }

            .trinity-freq .hz {
                font-size: 16px;
            }

            .trinity-freq .label {
                font-size: 11px;
            }

            .visualizer {
                height: 100px;
            }

            .frequency-vibration {
                height: 60px;
            }

            .recipes {
                gap: 6px;
            }

            .recipe-card {
                padding: 10px;
                font-size: 13px;
            }

            .recipe-header {
                font-size: 14px;
            }

            .recipe-freqs {
                font-size: 11px;
            }

            .controls {
                padding: 12px;
            }

            .frequency-controls {
                gap: 8px;
            }

            .control-group {
                padding: 10px;
            }

            .duration-buttons {
                gap: 4px;
            }

            .duration-btn {
                font-size: 16px;
                padding: 12px 16px;
                min-width: 60px;
                font-weight: 600;
                border-radius: 8px;
                border: 2px solid rgba(139, 92, 246, 0.3);
                background: rgba(139, 92, 246, 0.1);
                color: #c4b5fd;
                transition: all 0.2s ease;
            }

            .duration-btn:hover, .duration-btn:active {
                background: rgba(139, 92, 246, 0.2);
                border-color: rgba(139, 92, 246, 0.5);
                transform: scale(1.05);
            }

            .duration-btn.active {
                background: rgba(251, 191, 36, 0.2);
                border-color: #fbbf24;
                color: #fbbf24;
                font-weight: 700;
            }

            .button-group {
                gap: 6px;
            }

            .button {
                font-size: 15px !important;
                padding: 10px 16px !important;
                min-height: 42px;
                min-width: 100px;
            }

            .status {
                font-size: 13px;
                padding: 10px;
            }

            .info-modal-content {
                padding: 14px 10px;
                max-width: 96vw;
                border-radius: 10px;
            }

            .info-modal-header {
                font-size: 18px;
                margin-bottom: 10px;
            }

            .info-modal-body {
                font-size: 13px;
            }

            .instructions-panel {
                padding: 12px !important;
                margin: 0 4px 12px 4px !important;
            }

            .instructions-header h2 {
                font-size: 18px !important;
            }

            .accordion-content {
                padding: 10px 2px 0 2px !important;
                font-size: 13px !important;
            }
        }

        @media (max-width: 320px) {
            body {
                padding: 2px;
            }

            .container {
                padding: 8px;
                border-radius: 8px;
            }

            .header h1 {
                font-size: 18px;
                line-height: 1.2;
            }

            .header p {
                font-size: 12px;
            }

            .info-modal-content {
                padding: 12px 8px;
                max-width: 99vw;
                border-radius: 8px;
            }

            .info-modal-header {
                font-size: 18px;
                margin-bottom: 10px;
            }

            .info-modal-body {
                font-size: 13px;
            }

            .button {
                font-size: 14px !important;
                padding: 10px 16px !important;
                min-height: 40px;
            }
        }

        

        /* Ensure no horizontal overflow anywhere */
        .section, .controls, .frequency-controls, .control-group,
        .duration-input-wrapper, .duration-input-container {
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            overflow-x: hidden;
        }

        /* Align the top row: number input + Hz span */
        .control-group > div {
            display: flex;
            align-items: center;
            gap: 8px;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
        }

        /* Critical: allow the number input to shrink */
        .control-group input[type="number"] {
            flex: 1 1 auto;
            min-width: 0;
            width: 100%;
            box-sizing: border-box;
        }

        /* Keep Hz narrow but not stretching layout */
        .control-group span {
            flex: 0 0 auto;
            width: 30px;
            text-align: right;
            color: #a78bfa;
            font-size: 14px;
            font-weight: 500;
        }

        /* Normalize range sizing - account for browser chrome and thumb */
        .control-group input[type="range"] {
            display: block;
            width: 92%;
            max-width: 92%;
            box-sizing: border-box;
            margin: 10px auto 6px auto;
            padding: 0;
        }

        /* Range value below the slider */
        .range-value {
            width: 100%;
            text-align: center;
            box-sizing: border-box;
        }

        /* So the background overlay can't "clip" content or grab events */
        .control-group::before {
            pointer-events: none;
        }

        /* Duration row */
        .duration-input-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .duration-input-container input {
            flex: 1 1 auto;
            min-width: 0;
            width: 100%;
            box-sizing: border-box;
        }

        /* Buttons wrap nicely on small phones */
        @media (max-width: 375px) {
            .duration-buttons {
                display: grid;
                grid-template-columns: repeat(2, minmax(0, 1fr));
                gap: 6px;
            }
            .control-group {
                padding: 8px;
                border-radius: 10px;
            }
            .range-value {
                font-size: 12px;
            }
        }

        /* Extra hardening (Safari iOS quirks) */
        input[type="number"], input[type="text"] {
            min-width: 0;
        }

        /* Achievement Animations */
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(34,197,94,0.3); }
            50% { box-shadow: 0 0 40px rgba(34,197,94,0.6); }
        }

        @keyframes pulse-intense {
            0%, 100% { transform: scale(1); box-shadow: 0 0 30px rgba(251,191,36,0.4); }
            50% { transform: scale(1.02); box-shadow: 0 0 50px rgba(251,191,36,0.7); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-3px); }
            75% { transform: translateX(3px); }
        }

        @keyframes sparkle {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 1; }
            50% { transform: scale(1.3) rotate(180deg); opacity: 0.7; }
        }

        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(200%); }
        }

        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes pulse-text {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes pulse-text {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Responsive Grid for Achievements */
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        @media (max-width: 768px) {
            .achievements-grid {
                grid-template-columns: 1fr;
                gap: 15px;
                padding: 15px;
            }
        }

        /* Achievement Card Hover Effects */
        .achievement-card {
            transition: all 0.3s ease;
        }

        .achievement-card.locked:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(139,92,246,0.3);
        }

        .achievement-card.unlocked:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(34,197,94,0.5);
        }
    </style>
<script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
</head>
<body>
    <!-- Immersive Welcome Modal -->
    <div id="immersiveWelcome" class="info-modal" style="z-index:5000;">
        <div class="info-modal-content" style="max-width: 500px; text-align: center; background: linear-gradient(135deg, rgba(26,0,51,0.95), rgba(139,92,246,0.9)); border: 2px solid rgba(251,191,36,0.5);">
            <div class="info-modal-header" style="color: #fbbf24; font-size: 28px; margin-bottom: 20px;">Welcome to Genesis Frequencies</div>
            <div class="info-modal-body" style="color: #ffffff; font-size: 18px; line-height: 1.6;">
                <div style="text-align:center;line-height:1.8;padding:20px;">
                    <p style="font-size:18px;color:#fbbf24;margin-bottom:20px;font-weight:600;">
                        The frequencies of creation are now in your hands.
                    </p>
                    <div style="background:linear-gradient(135deg,rgba(251,191,36,0.15),rgba(139,92,246,0.15));border-radius:14px;padding:20px;margin:20px 0;border:2px solid rgba(251,191,36,0.3);">
                        <div style="font-size:24px;color:#fbbf24;margin-bottom:10px;font-weight:700;">
                            37 Ã— 73 = 2701
                        </div>
                        <div style="font-size:15px;color:#ffffff;margin-bottom:8px;">
                            Genesis 1:1 in Hebrew = 2701
                        </div>
                        <div style="font-size:14px;color:#c4b5fd;font-style:italic;margin-top:10px;">
                            "In the beginning God created..."
                        </div>
                    </div>
                    <p style="color:#ffffff;margin-bottom:15px;font-size:15px;">
                        These frequencies are encoded in the <b>first verse of the Bible</b>.<br>
                        Hidden in Scripture for thousands of years.
                    </p>
                    <p style="font-size:16px;color:#fbbf24;font-weight:600;margin-top:20px;">
                        Take a deep breath. Set your intention.
                    </p>
                    <p style="color:#a78bfa;font-size:14px;margin-top:10px;">
                        Your journey begins now.
                    </p>
                </div>
            </div>
            <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
                <button onclick="showFrequencyBenefits()" style="background: linear-gradient(90deg, #fbbf24, #f59e0b); color: #1a0033; border: none; border-radius: 25px; padding: 15px 30px; font-size: 18px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 15px rgba(251,191,36,0.3);">Next</button>
            </div>
        </div>
    </div>

    </div>

    <!-- Frequency Benefits Modal -->
    <div id="frequencyBenefitsModal" class="info-modal" style="z-index:4500;">
        <div class="info-modal-content" style="max-width: 600px; text-align: center; background: linear-gradient(135deg, rgba(26,0,51,0.95), rgba(139,92,246,0.9)); border: 2px solid rgba(251,191,36,0.5);">
            <div class="info-modal-header" style="color: #fbbf24; font-size: 28px; margin-bottom: 20px;">What Can These Frequencies Do?</div>
            <div class="info-modal-body" style="color: #fff; font-size: 16px; line-height: 1.6; text-align: left;">
                <div style="line-height:1.8;padding:20px;">
                    <p style="text-align:center;font-size:16px;color:#fbbf24;margin-bottom:20px;font-weight:600;">
                        Built on the Trinity Foundation: 37 Hz + 73 Hz + one intention frequency
                    </p>
                    
                    <div style="margin-bottom:20px;padding:15px;background:rgba(139,92,246,0.08);border-radius:10px;">
                        <div style="font-size:18px;margin-bottom:8px;">ðŸ§˜â€â™€ï¸ <b style="color:#fbbf24;">Meditation & Prayer</b></div>
                        <p style="font-size:14px;color:#ffffff;margin:0;">
                            Deepen your spiritual practice with frequencies designed to quiet the mind, 
                            enhance focus, and support sacred contemplation.
                        </p>
                    </div>
                    
                    <div style="margin-bottom:20px;padding:15px;background:rgba(139,92,246,0.08);border-radius:10px;">
                        <div style="font-size:18px;margin-bottom:8px;">ðŸ’« <b style="color:#fbbf24;">Energy Work & Balance</b></div>
                        <p style="font-size:14px;color:#ffffff;margin:0;">
                            Support your body's energy centers (chakras) and restore natural harmony 
                            using frequencies rooted in biblical mathematics.
                        </p>
                    </div>
                    
                    <div style="margin-bottom:20px;padding:15px;background:rgba(139,92,246,0.08);border-radius:10px;">
                        <div style="font-size:18px;margin-bottom:8px;">ðŸŒ™ <b style="color:#fbbf24;">Rest & Renewal</b></div>
                        <p style="font-size:14px;color:#ffffff;margin:0;">
                            Promote deep relaxation, improve sleep quality, and release tension. 
                            Many users report feeling more peaceful after sessions.
                        </p>
                    </div>
                    
                    <div style="margin-bottom:20px;padding:15px;background:rgba(139,92,246,0.08);border-radius:10px;">
                        <div style="font-size:18px;margin-bottom:8px;">ðŸŽ¨ <b style="color:#fbbf24;">Creative Flow & Clarity</b></div>
                        <p style="font-size:14px;color:#ffffff;margin:0;">
                            Unlock inspiration, enhance focus, and access flow states for work, 
                            art, writing, and problem-solving.
                        </p>
                    </div>
                    
                    <p style="text-align:center;font-size:13px;color:#9ca3af;margin-top:20px;font-style:italic;">
                        For spiritual exploration â€¢ Not medical treatment
                    </p>
                </div>
            </div>
            <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
                <button onclick="showHowToUse()" style="background: linear-gradient(90deg, #fbbf24, #f59e0b); color: #1a0033; border: none; border-radius: 25px; padding: 15px 30px; font-size: 18px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 15px rgba(251,191,36,0.3);">How to Use</button>
                <button onclick="skipToApp()" style="background: rgba(26,0,51,0.7); color: #c4b5fd; border: none; border-radius: 25px; padding: 15px 30px; font-size: 16px; font-weight: 600; cursor: pointer;">Skip to App</button>
            </div>
        </div>
    </div>

    <!-- How to Use Modal -->
    <div id="howToUseModal" class="info-modal" style="z-index:4000;">
        <div class="info-modal-content" style="max-width: 600px; text-align: center; background: linear-gradient(135deg, rgba(26,0,51,0.95), rgba(139,92,246,0.9)); border: 2px solid rgba(251,191,36,0.5);">
            <div class="info-modal-header" style="color: #fbbf24; font-size: 28px; margin-bottom: 20px;">Your First Session in 3 Steps</div>
            <div class="info-modal-body" style="color: #fff; font-size: 16px; line-height: 1.6; text-align: left;">
                <div style="line-height:1.8;padding:20px;">
                    <div style="background:rgba(251,191,36,0.1);border-radius:12px;padding:20px;margin-bottom:20px;border-left:4px solid #fbbf24;">
                        <p style="font-size:16px;color:#fbbf24;margin-bottom:15px;font-weight:600;">
                            ðŸŽ§ Quick Start
                        </p>
                        <ol style="text-align:left;color:#ffffff;font-size:14px;line-height:1.7;padding-left:20px;">
                            <li style="margin-bottom:10px;">
                                <b>Choose "Genesis Creation"</b> from the Biblical & Original category<br>
                                <span style="font-size:12px;color:#a78bfa;">This is the pure 37 + 73 Hz foundation</span>
                            </li>
                            <li style="margin-bottom:10px;">
                                <b>Set duration to 5-10 minutes</b> and put on headphones<br>
                                <span style="font-size:12px;color:#a78bfa;">Start shortâ€”you can go longer once you feel the frequencies</span>
                            </li>
                            <li>
                                <b>Press PLAY, close your eyes,</b> breathe slowly, and set one intention<br>
                                <span style="font-size:12px;color:#a78bfa;">Simple is powerful: "peace," "clarity," "guidance," or "thank you"</span>
                            </li>
                        </ol>
                    </div>
                    
                    <div style="background:rgba(139,92,246,0.08);border-radius:12px;padding:20px;margin-bottom:20px;">
                        <p style="font-size:16px;color:#c4b5fd;margin-bottom:12px;font-weight:600;">
                            âš™ï¸ Controls You'll Use
                        </p>
                        <ul style="text-align:left;color:#ffffff;font-size:14px;line-height:1.6;padding-left:20px;">
                            <li><b>Frequencies:</b> Explore categories (Biblical, Angel Numbers, Solfeggio, etc.)</li>
                            <li><b>Volume:</b> Start low and adjust to comfort</li>
                            <li><b>Duration:</b> Set a timer for your session</li>
                            <li><b>Play/Pause:</b> Control your session as needed</li>
                        </ul>
                    </div>
                    
                    <div style="background:rgba(251,191,36,0.08);border-radius:10px;padding:18px;">
                        <p style="font-size:16px;color:#fbbf24;margin-bottom:10px;font-weight:600;">
                            ðŸ’¡ Pro Tips
                        </p>
                        <ul style="text-align:left;color:#ffffff;font-size:13px;line-height:1.6;padding-left:20px;">
                            <li>Use during meditation, prayer, or yoga</li>
                            <li>Drink water before and after sessions</li>
                            <li>Try different frequencies at different times of day</li>
                            <li>Journal 1-2 sentences after each session</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
                <button onclick="showPWATip()" style="background: linear-gradient(90deg, #fbbf24, #f59e0b); color: #1a0033; border: none; border-radius: 25px; padding: 15px 30px; font-size: 18px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 15px rgba(251,191,36,0.3);">Pro Tip</button>
                <button onclick="skipToApp()" style="background: rgba(26,0,51,0.7); color: #c4b5fd; border: none; border-radius: 25px; padding: 15px 30px; font-size: 16px; font-weight: 600; cursor: pointer;">Skip to App</button>
            </div>
        </div>
    </div>

    <!-- PWA Tip Modal -->
    <div id="pwaTipModal" class="info-modal" style="z-index:3500;">
        <div class="info-modal-content" style="max-width: 500px; text-align: center; background: linear-gradient(135deg, rgba(26,0,51,0.95), rgba(139,92,246,0.9)); border: 2px solid rgba(251,191,36,0.5);">
            <div class="info-modal-header" style="color: #fbbf24; font-size: 28px; margin-bottom: 20px;">âš¡ Pro Tip</div>
            <div class="info-modal-body" style="color: #fff; font-size: 18px; line-height: 1.6;">
                <div style="text-align:center;line-height:1.8;padding:20px;">
                    <p style="font-size:18px;color:#fbbf24;margin-bottom:15px;font-weight:600;">
                        Add to Your Home Screen for the Full Experience
                    </p>
                    <div style="background:linear-gradient(135deg,rgba(139,92,246,0.1),rgba(251,191,36,0.1));border-radius:14px;padding:20px;margin:20px 0;">
                        <p style="font-size:16px;color:#ffffff;margin-bottom:15px;">
                            ðŸ“± <b>Why add Genesis FG to your home screen?</b>
                        </p>
                        <ul style="text-align:left;max-width:400px;margin:0 auto;color:#ffffff;font-size:14px;line-height:1.7;">
                            <li>âš¡ <b>Works offline</b> â€” Listen anytime, anywhere</li>
                            <li>ðŸš€ <b>Faster loading</b> â€” Instant access with one tap</li>
                            <li>ðŸŽµ <b>Background playback</b> â€” Frequencies continue while you work</li>
                            <li>ðŸ“Š <b>Track your progress</b> â€” Session streaks and achievements</li>
                        </ul>
                    </div>
                    <div style="background:rgba(139,92,246,0.08);border-radius:10px;padding:15px;margin:20px 0;">
                        <p style="color:#c4b5fd;font-weight:600;margin-bottom:8px;">How to install:</p>
                        <p style="color:#ffffff;font-size:13px;">
                            Tap your browser's <b>Share button</b> (iOS) or <b>Menu</b> (Android)<br>
                            â†’ Select <b>"Add to Home Screen"</b>
                        </p>
                    </div>
                    <p style="font-size:13px;color:#a78bfa;margin-top:20px;">
                        Most people add it after their first session. You can always do it later!
                    </p>
                </div>
            </div>
            <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
                <button onclick="showUpgradeBenefits()" style="background: linear-gradient(90deg, #fbbf24, #f59e0b); color: #1a0033; border: none; border-radius: 25px; padding: 15px 30px; font-size: 18px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 15px rgba(251,191,36,0.3);">Discover Premium</button>
                <button onclick="skipToApp()" style="background: rgba(26,0,51,0.7); color: #c4b5fd; border: none; border-radius: 25px; padding: 15px 30px; font-size: 16px; font-weight: 600; cursor: pointer;">Skip to App</button>
            </div>
        </div>
    </div>
    <div id="upgradeBenefitsModal" class="info-modal" style="z-index:3000;">
        <div class="info-modal-content" style="max-width:420px; text-align: center;">
            <div class="info-modal-header" style="color: #fbbf24; font-size: 28px; margin-bottom: 20px;">âœ¨ Unlock the Complete Experience</div>
                <div class="info-modal-body" style="color: #fff; font-size: 16px; line-height: 1.6;">
                    <div style="line-height:1.8;padding:20px;">
                        <p style="text-align:center;font-size:17px;color:#fbbf24;margin-bottom:20px;font-weight:600;">
                            Ready to go deeper? Premium gives you full control.
                        </p>
                        
                        <div style="margin-bottom:15px;padding:15px;background:rgba(251,191,36,0.08);border-radius:10px;border-left:3px solid #fbbf24;">
                            <div style="font-size:16px;margin-bottom:6px;"><b style="color:#fbbf24;">ðŸŽšï¸ Individual Volume Controls</b></div>
                            <p style="font-size:14px;color:#ffffff;margin:0;">
                                Adjust each of the 3 frequencies separately for perfect harmonic balance tailored to your needs.
                            </p>
                        </div>
                        
                        <div style="margin-bottom:15px;padding:15px;background:rgba(139,92,246,0.08);border-radius:10px;border-left:3px solid #8b5cf6;">
                            <div style="font-size:16px;margin-bottom:6px;"><b style="color:#c4b5fd;">â° Unlimited Durations</b></div>
                            <p style="font-size:14px;color:#ffffff;margin:0;">
                                Set any session length from 1 minute to hours of continuous playbackâ€”perfect for sleep, work, or deep meditation.
                            </p>
                        </div>
                        
                        <div style="margin-bottom:15px;padding:15px;background:rgba(251,191,36,0.08);border-radius:10px;border-left:3px solid #fbbf24;">
                            <div style="font-size:16px;margin-bottom:6px;"><b style="color:#fbbf24;">ðŸ† Track Your Journey</b></div>
                            <p style="font-size:14px;color:#ffffff;margin:0;">
                                Session streaks, achievements, personal notes, and progress tracking. Watch your transformation unfold.
                            </p>
                        </div>
                        
                        <div style="margin-bottom:15px;padding:15px;background:rgba(139,92,246,0.08);border-radius:10px;border-left:3px solid #8b5cf6;">
                            <div style="font-size:16px;margin-bottom:6px;"><b style="color:#c4b5fd;">ðŸ”Š Background Playback</b></div>
                            <p style="font-size:14px;color:#ffffff;margin:0;">
                                Keep frequencies playing while you use other apps, browse, or work.
                            </p>
                        </div>
                        
                        <div style="margin-bottom:20px;padding:15px;background:rgba(251,191,36,0.08);border-radius:10px;border-left:3px solid #fbbf24;">
                            <div style="font-size:16px;margin-bottom:6px;"><b style="color:#fbbf24;">ðŸ’¾ Export & Save Tracks</b></div>
                            <p style="font-size:14px;color:#ffffff;margin:0;">
                                Save your favorite frequency combinations as WAV files for offline listening or sharing with loved ones.
                            </p>
                        </div>
                        
                        <div style="text-align:center;background:linear-gradient(135deg,rgba(251,191,36,0.15),rgba(139,92,246,0.15));border-radius:14px;padding:20px;margin:20px 0;border:2px solid rgba(251,191,36,0.4);">
                            <p style="font-size:20px;color:#fbbf24;font-weight:700;margin-bottom:8px;">
                                ðŸŒŸ Lifetime Access
                            </p>
                            <p style="font-size:15px;color:#ffffff;margin-bottom:5px;">
                                One-Time Payment â€¢ No Subscriptions
                            </p>
                            <p style="font-size:13px;color:#a78bfa;">
                                Join thousands unlocking the full Genesis experience
                            </p>
                        </div>
                        
                        <p style="text-align:center;font-size:12px;color:#9ca3af;margin-top:15px;font-style:italic;">
                            Try the free version first. Upgrade anytime from the Settings menu.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Upgrade Modal -->
    <div id="upgradeModal" class="upgrade-modal">
        <div class="upgrade-modal-content">
            <button class="upgrade-close" onclick="closeUpgradeModal()">Ã—</button>
            <div class="upgrade-modal-header">ðŸš€ Upgrade to Premium</div>
            <div class="upgrade-modal-body">
                <p style="margin-bottom: 20px; font-size: 18px;">
                    Unlock the full power of sacred frequencies with lifetime access!
                </p>

                <div class="upgrade-features">
                    <h3>âœ¨ Premium Features Include:</h3>
                    <ul>
                        <li><strong>Silent Mode Bypass</strong> - Play frequencies even when phone is silenced</li>
                        <li><strong>Individual Volume Controls</strong> - Adjust each of the 3 frequencies separately</li>
                        <li><strong>Custom Durations</strong> - Set any length from seconds to hours</li>
                        <li><strong>WAV Export</strong> - Save tracks for offline use anywhere</li>
                        <li><strong>Background Playback</strong> - Frequencies play when app is minimized</li>
                        <li><strong>All Achievements</strong> - Unlock the complete achievement system</li>
                        <li><strong>Unlimited Listening</strong> - No time restrictions on your sessions</li>
                        <li><strong>Premium Support</strong> - Direct access to updates and new features</li>
                    </ul>
                </div>

                <p style="margin: 20px 0; color: #fbbf24; font-weight: 600;">
                    ðŸ’Ž One-time payment â€¢ Lifetime access â€¢ No subscriptions â€¢ No data collected
                </p>

                <a href="https://etsy.com/your-listing-link" class="upgrade-btn" target="_blank">
                    ðŸš€ Get Lifetime Access - $XX.XX
                </a>

                <p style="margin-top: 15px; font-size: 14px; color: #9ca3af;">
                    Questions? Contact us through Etsy
                </p>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="language-selector">
            <button class="language-btn active" onclick="changeLanguage('en')" data-lang="en">English</button>
            <button class="language-btn" onclick="changeLanguage('pt')" data-lang="pt">PortuguÃªs</button>
            <button class="language-btn" onclick="changeLanguage('es')" data-lang="es">EspaÃ±ol</button>
            <button class="language-btn" onclick="changeLanguage('it')" data-lang="it">Italiano</button>
        </div>
        
        <div class="header">
            <div class="hebrew-header">×‘Ö°Ö¼×¨Öµ××©Ö´××™×ª ×‘Ö¸Ö¼×¨Ö¸× ×Ö±×œÖ¹×”Ö´×™× ×Öµ×ª ×”Ö·×©Ö¸Ö¼××žÖ·×™Ö´× ×•Ö°×Öµ×ª ×”Ö¸×Ö¸×¨Ö¶×¥</div>
            <div class="hebrew-translation" data-translate="hebrewTranslation">In the beginning God created the heavens and the earth</div>
            <div style="font-size:22px; font-weight:800; color:#fbbf24; text-align:center; margin-bottom:2px;">Genesis Frequency Generator</div>
            <div style="font-size:16px; font-weight:600; color:#ffffff; text-align:center; margin-bottom:10px; text-shadow: 0 1px 2px rgba(0,0,0,0.3);">inspired by</div>
            <h1 class="main-title" data-translate="title" style="margin-bottom:0;">Genesis 1:1</h1>
            <div class="subtitle" data-translate="subtitle">Biblical Trinity Frequency System</div>
            <div class="divider"></div>
            <div class="gematria" style="font-size: 18px;">37 Hz + 73 Hz</div>
            <div class="gematria" style="font-size: 15px; margin-top: -15px;" data-translate="pattern">Prayer Amplifier</div>

            <!-- Sacred Guide Button -->
            <div style="text-align: center; margin: 20px 0;">
                <button id="genesisCompanionBtn" class="btn-instructions" onclick="handleCompanionClick(event)" style="font-size: 18px; font-weight: 700; background: linear-gradient(90deg, #8b5cf6 0%, #fbbf24 100%); color: #1a0033; border: none; border-radius: 12px; padding: 10px 24px; box-shadow: 0 2px 12px rgba(139,92,246,0.15); cursor: pointer; position: relative; z-index: 1000; pointer-events: auto;">
                    Genesis Companion
                </button>
            </div>

            <!-- Instructions Panel (expandable) -->
            <div id="instructionsPanel" class="instructions-panel" style="display: none; max-width: 900px; margin: 0 auto 18px auto; background: rgba(26,0,51,0.97); border-radius: 18px; box-shadow: 0 8px 32px rgba(139,92,246,0.18); padding: 20px; color: #fff; z-index: 1000000; position: relative;">
                <div class="instructions-content" style="text-align:center;">
                    <div class="instructions-header" style="display: flex; justify-content: center; align-items: center;">
                        <h2 style="font-size: 24px; color: #fbbf24; font-weight: 800; margin: 0 auto; text-align:center; width:100%;">Genesis Frequency Companion</h2>
                        <button class="btn-close" id="companionCloseBtn" style="background: none; border: none; color: #c4b5fd; font-size: 28px; cursor: pointer; position:absolute; right:24px; z-index: 1000002; padding: 10px;">âœ•</button>
                    </div>
                    <div class="instructions-body" style="margin-top: 18px;">
                        <!-- BEGIN: Expandable/Collapsible Instructions Tab Structure -->
                        <div id="instructionsAccordion" class="instructions-accordion">
                            <!-- Sections will be dynamically rendered here by JS for accordion, search, and navigation -->
                        </div>



                        <div style="margin-top:32px; text-align:center; color:#fbbf24; font-size:18px; font-weight:700;">This is your complete Genesis companion. Everything you need to understand, master, and share the divine frequencies.</div>
                    </div>
                </div>
            </div>
        </div>
        </div>

        <!-- Premium Upgrade CTA -->
        <div class="section premium-cta-section" style="text-align: center; margin: 30px 0; padding: 25px; background: linear-gradient(135deg, rgba(26,0,51,0.8), rgba(139,92,246,0.6)); border-radius: 15px; border: 2px solid rgba(251,191,36,0.3); position: relative; z-index: 1100;">
            <h3 style="color: #fbbf24; font-size: 22px; font-weight: 700; margin-bottom: 15px;">ðŸš€ Ready to Unlock Premium Features?</h3>
            <p style="color: #c4b5fd; font-size: 16px; margin-bottom: 20px; line-height: 1.5;">
                Get lifetime access to individual volume controls, custom durations, WAV export, background playback, silent mode bypass, and the achievement system.
            </p>
            <button onclick="showUpgradeModal()" style="background: linear-gradient(90deg, #fbbf24, #f59e0b); color: #1a0033; border: none; border-radius: 25px; padding: 15px 30px; font-size: 18px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 15px rgba(251,191,36,0.3);">
                Upgrade to Premium
            </button>
            <p style="margin-top: 15px; font-size: 14px; color: #9ca3af;">
                One-time payment â€¢ Lifetime access â€¢ No subscriptions
            </p>
        </div>

        <div class="trinity-base">
            <div class="trinity-title" data-translate="trinityTitle">Trinity Foundation Frequencies</div>
            <div class="trinity-frequencies">
                <div class="trinity-freq">
                    <div class="hz">37 Hz</div>
                    <div class="label">Form/Matter</div>
                </div>
                <div class="trinity-arrow">+</div>
                <div class="trinity-freq">
                    <div class="hz">73 Hz</div>
                    <div class="label">Spirit/Divine</div>
                </div>
            </div>
        </div>

        <div class="visualizer">
            <div class="frequency-vibration">
                <div class="vibration-wave">
                    <svg viewBox="0 0 1000 100" preserveAspectRatio="none">
                        <path d="M0,50 Q50,20 100,50 T200,50 T300,50 T400,50 T500,50 T600,50 T700,50 T800,50 T900,50 T1000,50" 
                              fill="none" stroke="rgba(251, 191, 36, 0.8)" stroke-width="3"/>
                    </svg>
                </div>
                <div class="vibration-wave">
                    <svg viewBox="0 0 1000 100" preserveAspectRatio="none">
                        <path d="M0,50 Q25,15 50,50 T100,50 T150,50 T200,50 T250,50 T300,50 T350,50 T400,50 T450,50 T500,50 T550,50 T600,50 T650,50 T700,50 T750,50 T800,50 T850,50 T900,50 T950,50 T1000,50" 
                              fill="none" stroke="rgba(139, 92, 246, 0.8)" stroke-width="3"/>
                    </svg>
                </div>
                <div class="vibration-wave">
                    <svg viewBox="0 0 1000 100" preserveAspectRatio="none">
                        <path d="M0,50 Q40,25 80,50 T160,50 T240,50 T320,50 T400,50 T480,50 T560,50 T640,50 T720,50 T800,50 T880,50 T960,50 T1000,50" 
                              fill="none" stroke="rgba(168, 85, 247, 0.3)" stroke-width="3"/>
                    </svg>
                </div>
            </div>
            <div class="sacred-geometry"></div>
            <div class="visualizer-content">
            </div>
        </div>

        

        <div class="section">
            <div class="section-title" data-translate="recipesTitle">Trinity Frequency Recipes</div>
            <div class="recipes" id="recipes">
                <!-- Recipes will be populated by JavaScript -->
            </div>
        </div>

        <!-- Info Modal -->
        <div class="info-modal" id="infoModal">
            <div class="info-modal-content">
                <button class="info-modal-close" onclick="closeInfoModal()">Ã—</button>
                <div class="info-modal-header" id="modalTitle"></div>
                <div class="info-modal-freqs" id="modalFreqs"></div>
                <div class="info-modal-body" id="modalBody"></div>
            </div>
        </div>

        <div class="section">
            <div class="section-title" data-translate="controlsTitle">Frequency Controls</div>
            <div class="controls">
                <div class="frequency-controls">
                    <div class="control-group premium-lock" onclick="showUpgradeModal()">
                        <div>
                            <input type="number" id="freq1" min="0.1" max="100000" step="0.1" value="37">
                            <span>Hz</span>
                        </div>
                        <input type="range" id="volume1" min="0" max="100" value="50">
                        <div class="range-value" id="volume1Value">50%</div>
                    </div>
                    
                    <div class="control-group premium-lock" onclick="showUpgradeModal()">
                        <div>
                            <input type="number" id="freq2" min="0.1" max="100000" step="0.1" value="73">
                            <span>Hz</span>
                        </div>
                        <input type="range" id="volume2" min="0" max="100" value="50">
                        <div class="range-value" id="volume2Value">50%</div>
                    </div>
                    
                    <div class="control-group premium-lock" onclick="showUpgradeModal()">
                        <div>
                            <input type="number" id="freq3" min="0.1" max="100000" step="0.1" value="0">
                            <span>Hz</span>
                        </div>
                        <input type="range" id="volume3" min="0" max="100" value="50">
                        <div class="range-value" id="volume3Value">50%</div>
                    </div>
                </div>
                
                <div class="control-group duration-control">
                    <label for="duration" data-translate="duration">â±ï¸ Duration</label>
                    <div class="duration-input-wrapper">
                        <div class="duration-input-container premium-lock" onclick="showUpgradeModal()">
                            <input type="text" id="duration" placeholder="05:00" value="05:00" pattern="[0-9]{1,2}:[0-9]{2}" maxlength="5" readonly>
                        </div>
                        <div class="duration-buttons">
                            <button type="button" class="duration-btn" data-time="01:00">1m</button>
                            <button type="button" class="duration-btn" data-time="05:00">5m</button>
                            <button type="button" class="duration-btn" data-time="10:00">10m</button>
                            <button type="button" class="duration-btn" data-time="30:00">30m</button>
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <button class="button button-primary" id="playBtn" aria-label="Play frequency generator">â–¶ PLAY</button>
                    <button class="button button-danger" id="stopBtn" aria-label="Stop frequency generator">â–  STOP</button>
                    <button class="button button-secondary premium-lock" id="exportBtn" onclick="showUpgradeModal()" aria-label="Export as WAV file - Premium feature">â¬‡ EXPORT WAV</button>
                    <button class="button button-secondary" id="resetBtn" aria-label="Reset frequencies to default">â†º RESET</button>
                </div>
            </div>
        </div>

        <div class="status stopped" id="status">
            Ready to Generate Genesis Frequencies
        </div>

        <div class="visualizer" style="margin-top: 20px;">
            <div class="frequency-vibration">
                <div class="vibration-wave">
                    <svg viewBox="0 0 1000 100" preserveAspectRatio="none">
                        <path d="M0,50 Q50,20 100,50 T200,50 T300,50 T400,50 T500,50 T600,50 T700,50 T800,50 T900,50 T1000,50" 
                              fill="none" stroke="rgba(251, 191, 36, 0.8)" stroke-width="3"/>
                    </svg>
                </div>
                <div class="vibration-wave">
                    <svg viewBox="0 0 1000 100" preserveAspectRatio="none">
                        <path d="M0,50 Q25,15 50,50 T100,50 T150,50 T200,50 T250,50 T300,50 T350,50 T400,50 T450,50 T500,50 T550,50 T600,50 T650,50 T700,50 T750,50 T800,50 T850,50 T900,50 T950,50 T1000,50" 
                              fill="none" stroke="rgba(139, 92, 246, 0.8)" stroke-width="3"/>
                    </svg>
                </div>
                <div class="vibration-wave">
                    <svg viewBox="0 0 1000 100" preserveAspectRatio="none">
                        <path d="M0,50 Q40,25 80,50 T160,50 T240,50 T320,50 T400,50 T480,50 T560,50 T640,50 T720,50 T800,50 T880,50 T960,50 T1000,50" 
                              fill="none" stroke="rgba(168, 85, 247, 0.3)" stroke-width="3"/>
                    </svg>
                </div>
            </div>
            <div class="sacred-geometry"></div>
            <div class="visualizer-content">
            </div>
        </div>

        <!-- Bottom Upgrade CTA -->
        <div style="text-align: center; margin: 40px 0; padding: 30px; background: linear-gradient(135deg, rgba(26,0,51,0.8), rgba(139,92,246,0.6)); border-radius: 20px; border: 2px solid rgba(251,191,36,0.3); position: relative; z-index: 1100;">
            <h3 style="color: #fbbf24; font-size: 24px; margin-bottom: 15px;">ðŸš€ Ready to Unlock Premium Features?</h3>
            <p style="color: #c4b5fd; font-size: 16px; margin-bottom: 20px; line-height: 1.6;">
                Get lifetime access to individual volume controls, custom durations, WAV export, background playback, and the achievement system.
            </p>
            <button onclick="showUpgradeModal()" style="background: linear-gradient(90deg, #fbbf24, #f59e0b); color: #1a0033; border: none; border-radius: 25px; padding: 15px 30px; font-size: 18px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 15px rgba(251,191,36,0.3);">
                Upgrade to Premium
            </button>
            <p style="margin-top: 15px; font-size: 14px; color: #9ca3af;">
                One-time payment â€¢ Lifetime access â€¢ No subscriptions
            </p>
        </div>
    </div>

    
    <div class="add-to-home" id="addToHome">
        <button class="add-to-home-close" onclick="closeAddToHome()">Ã—</button>
        <div class="add-to-home-content" style="cursor:pointer;" onclick="showAddToHomePopup()">
            <span class="add-to-home-icon">ðŸŒŸ</span>
            <span class="add-to-home-text" style="font-weight:700;">Click here to add to home screen</span>
        </div>
        <!-- Add to Home Screen Popup Modal -->
        <div id="addToHomeModal" class="info-modal" style="z-index:2000;">
            <div class="info-modal-content" style="max-width:420px;">
                <button class="info-modal-close" onclick="closeAddToHomePopup()">Ã—</button>
                <div class="info-modal-header" style="color:#6B46C1;">ðŸŒŸ ðŸ“± Add Genesis Frequency Generator to your Home Screen ðŸ“± ðŸŒŸ</div>
                <div class="info-modal-body" style="color:#333; font-size:16px;">
                    <ul style="margin-left:18px; margin-bottom:10px;">
                        <li>On <b>iOS</b>: Tap <b>Share</b> <span style="font-size:18px;">ðŸ”—</span> then "Add to Home Screen".</li>
                        <li>On <b>Android</b>: Tap browser menu <span style="font-size:18px;">â‹®</span> then "Add to Home Screen".</li>
                    </ul>
                    <p style="color:#a78bfa; font-size:15px;">Once added, you won't see this message again. Enjoy instant access!</p>
                </div>
            </div>
        </div>
    </div>

    <script>
                        // Instructions panel toggle function
                        window.toggleInstructions = function() {
                            console.log('ðŸŽ¯ toggleInstructions called!');
                            var panel = document.getElementById('instructionsPanel');
                            console.log('ðŸ“‹ Panel element:', panel);
                            if (panel.style.display === 'none' || panel.style.display === '') {
                                console.log('ðŸ“‚ Showing panel');
                                // Create modal overlay
                                var overlay = document.createElement('div');
                                overlay.id = 'instructionsOverlay';
                                overlay.style.cssText = 'position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 1000000; display: flex; align-items: center; justify-content: center;';
                                // Safari-compatible: only close if clicking directly on overlay, not its children
                                overlay.addEventListener('click', function(e) {
                                    if (e.target === overlay) {
                                        window.toggleInstructions();
                                    }
                                });
                                
                                // Style the panel for modal
                                panel.style.cssText = 'display: block; position: relative; z-index: 1000001; max-width: 900px; margin: 0; background: rgba(26,0,51,0.97); border-radius: 18px; box-shadow: 0 8px 32px rgba(139,92,246,0.18); padding: 20px; color: #fff; max-height: 80vh; overflow-y: auto;';
                                
                                overlay.appendChild(panel);
                                document.body.appendChild(overlay);
                                
                                renderInstructionsCategories();
                                addInstructionsSearch();
                            } else {
                                console.log('ðŸ“ Hiding panel');
                                var overlay = document.getElementById('instructionsOverlay');
                                if (overlay) {
                                    // Reset panel styles
                                    panel.style.cssText = 'display: none; max-width: 900px; margin: 0 auto 18px auto; background: rgba(26,0,51,0.97); border-radius: 18px; box-shadow: 0 8px 32px rgba(139,92,246,0.18); padding: 20px; color: #fff; z-index: 10; position: relative;';
                                    // Move panel back to original location
                                    document.querySelector('.header').appendChild(panel);
                                    // Remove overlay
                                    document.body.removeChild(overlay);
                                }
                            }
                        }

                        // Handle companion button click
                        window.handleCompanionClick = function(event) {
                            console.log('ðŸŽ¯ Companion button clicked!', event);
                            console.log('Event target:', event.target);
                            console.log('Event type:', event.type);
                            event.preventDefault();
                            event.stopPropagation();
                            console.log('Calling toggleInstructions...');
                            window.toggleInstructions();
                            console.log('toggleInstructions called successfully');
                            
                            // Bind close button after panel is shown (Safari compatibility)
                            setTimeout(function() {
                                var closeBtn = document.getElementById('companionCloseBtn');
                                if (closeBtn) {
                                    closeBtn.onclick = function(e) {
                                        e.preventDefault();
                                        e.stopPropagation();
                                        window.toggleInstructions();
                                    };
                                }
                            }, 100);
                        }
                // Add to Home Screen popup logic
                function showAddToHomePopup() {
                    document.getElementById('addToHomeModal').style.display = 'flex';
                }
                function closeAddToHomePopup() {
                    document.getElementById('addToHomeModal').style.display = 'none';
                    document.getElementById('addToHome').style.display = 'none';
                    localStorage.setItem('hideAddToHome', 'true');
                }
                document.addEventListener('DOMContentLoaded', function() {
                    if (localStorage.getItem('hideAddToHome') === 'true') {
                        document.getElementById('addToHome').style.display = 'none';
                    } else {
                        document.getElementById('addToHome').style.display = 'block';
                    }
                    document.getElementById('addToHomeModal').style.display = 'none';
                });
        // Modal flow functions for first-time users
        function showFrequencyBenefits() {
            document.getElementById('immersiveWelcome').classList.remove('active');
            document.getElementById('frequencyBenefitsModal').classList.add('active');
        }

        function showHowToUse() {
            document.getElementById('frequencyBenefitsModal').classList.remove('active');
            document.getElementById('howToUseModal').classList.add('active');
        }

        function showPWATip() {
            document.getElementById('howToUseModal').classList.remove('active');
            document.getElementById('pwaTipModal').classList.add('active');
        }

        function showUpgradeBenefits() {
            console.log('showUpgradeBenefits() called - adding active class to upgrade modal');
            // Hide any current modal
            document.getElementById('pwaTipModal')?.classList.remove('active');
            
            // Mark onboarding as complete
            localStorage.setItem('onboardingComplete', 'true');
            
            // Show benefits screen (as info-modal)
            const benefits = document.getElementById('upgradeBenefitsModal');
            if (benefits) {
                // ensure no other info-modals are open
                document.querySelectorAll('.info-modal.active').forEach(m => m.classList.remove('active'));
                benefits.classList.add('active');
            }
        }

        function skipToApp() {
            // Hide all modals
            document.getElementById('immersiveWelcome').classList.remove('active');
            document.getElementById('frequencyBenefitsModal').classList.remove('active');
            document.getElementById('howToUseModal').classList.remove('active');
            document.getElementById('pwaTipModal').classList.remove('active');
            document.getElementById('upgradeBenefitsModal').classList.remove('active');
            
            // Mark onboarding as complete
            localStorage.setItem('onboardingComplete', 'true');
        }

        // Close upgrade benefits modal
        function closeUpgradeBenefitsModal() {
            document.getElementById('upgradeBenefitsModal').classList.remove('active');
        }

        // Debug function to force show upgrade modal (call forceShowUpgrade() in console)
        window.forceShowUpgrade = function() {
            document.getElementById('upgradeBenefitsModal').innerHTML = `
                <div class="info-modal-content" style="max-width:420px; text-align: center;">
                    <div class="info-modal-header" style="color: #fbbf24; font-size: 28px; margin-bottom: 20px;">Premium Features</div>
                    <div class="info-modal-body" style="color: #fff; font-size: 16px; line-height: 1.6;">
                        <div style="text-align: left; margin-bottom: 20px;">
                            <div style="margin-bottom: 15px;">
                                <h3 style="color: #c4b5fd; margin-bottom: 8px;">ðŸŽšï¸ Individual Volume Controls</h3>
                                <p>Adjust each of the 3 frequencies separately for perfect harmonic balance.</p>
                            </div>
                            <div style="margin-bottom: 15px;">
                                <h3 style="color: #c4b5fd; margin-bottom: 8px;">â° Custom Durations</h3>
                                <p>Set any session length from 1 minute to hours of continuous playback.</p>
                            </div>
                            <div style="margin-bottom: 15px;">
                                <h3 style="color: #c4b5fd; margin-bottom: 8px;">ðŸ† Achievement System</h3>
                                <p>Track your progress, unlock achievements, and log your sacred sessions.</p>
                            </div>
                            <div style="margin-bottom: 15px;">
                                <h3 style="color: #c4b5fd; margin-bottom: 8px;">ðŸ”Š Background Playback</h3>
                                <p>Continue your frequency sessions while using other apps.</p>
                            </div>
                            <div style="margin-bottom: 15px;">
                                <h3 style="color: #c4b5fd; margin-bottom: 8px;">ðŸ’¾ Export & Save</h3>
                                <p>Save your frequency combinations as WAV files for offline use.</p>
                            </div>
                        </div>
                        <div style="background: rgba(251,191,36,0.1); padding: 15px; border-radius: 12px; margin-bottom: 20px; border: 1px solid rgba(251,191,36,0.3);">
                            <p style="font-size: 18px; color: #fbbf24; font-weight: 600; margin-bottom: 8px;">ðŸŒŸ Lifetime Access - One Time Payment</p>
                            <p style="font-size: 14px; color: #d1d5db;">No subscriptions, no recurring fees. Unlock everything forever.</p>
                        </div>
                        <div style="display: flex; gap: 15px; justify-content: center; margin-top: 20px;">
                            <button onclick="showUpgradeModal()" style="background: linear-gradient(90deg, #fbbf24, #f59e0b); color: #1a0033; border: none; border-radius: 25px; padding: 15px 30px; font-size: 18px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 15px rgba(251,191,36,0.3);">Upgrade Now</button>
                            <button onclick="closeUpgradeBenefitsModal()" style="background: rgba(26,0,51,0.7); color: #c4b5fd; border: none; border-radius: 25px; padding: 15px 30px; font-size: 16px; font-weight: 600; cursor: pointer;">Maybe Later</button>
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('upgradeBenefitsModal').classList.add('active');
        };

        // Freemium upgrade functions
        function showUpgradeModal() {
            // Close any active welcome modals first
            document.querySelectorAll('.info-modal.active').forEach(m => m.classList.remove('active'));
            localStorage.setItem('onboardingComplete', 'true');

            // Close any info-modals that could be dimming the screen
            document.querySelectorAll('.info-modal.active').forEach(m => m.classList.remove('active'));

            // Show upgrade modal on top
            const modal = document.getElementById('upgradeModal');
            if (modal) {
                modal.style.display = 'flex';
                modal.style.opacity = '1';
            }
        }

        function closeUpgradeModal() {
            document.getElementById('upgradeModal').style.display = 'none';
            // Update premium features in case user just upgraded
            setTimeout(updatePremiumFeatures, 100);
        }

        // Function to enable/disable premium features based on access status
        function updatePremiumFeatures() {
            const isPremium = localStorage.getItem('premiumAccessGranted') === 'true';
            const premiumLockedElements = document.querySelectorAll('.premium-lock input, .premium-lock button');
            
            premiumLockedElements.forEach(element => {
                if (isPremium) {
                    // Enable premium features
                    element.style.pointerEvents = 'auto';
                    element.style.opacity = '1';
                    element.closest('.premium-lock').style.opacity = '1';
                    // Remove lock icon
                    element.closest('.premium-lock').style.position = 'relative';
                    const lockIcon = element.closest('.premium-lock').querySelector('::after');
                    if (lockIcon) lockIcon.style.display = 'none';
                } else {
                    // Disable premium features
                    element.style.pointerEvents = 'none';
                    element.style.opacity = '0.5';
                    element.closest('.premium-lock').style.opacity = '0.7';
                }
            });
        }
        const translations = {
            en: {
                hebrewTranslation: "In the beginning God created the heavens and the earth",
                title: "Genesis 1:1",
                subtitle: "The Sound of Creation",
                pattern: "Prayer Amplifier",
                trinityTitle: "ðŸŒŸ Trinity Foundation Frequencies ðŸŒŸ",
                formMatter: "Form/Matter",
                spiritDivine: "Spirit/Divine",
                beatPattern: "Beat Pattern",
                recipesTitle: "ðŸŒŸ Trinity Frequency Recipes ðŸŒŸ",
                controlsTitle: "ðŸŒŸ Frequency Controls ðŸŒŸ",
                duration: "Duration",
                play: "PLAY",
                pause: "PAUSE",
                stop: "STOP",
                export: "EXPORT WAV",
                reset: "RESET",
                ready: "ðŸŒŸ Ready to Generate Genesis Frequencies ðŸŒŸ",
                stopped: "ðŸŒŸ Stopped - Ready to Generate ðŸŒŸ",
                playing: "â–¶ Playing",
                remaining: "remaining",
                selected: "Selected",
                autoBalanced: "Auto-balanced volumes",
                addToHomeText: "ðŸŒŸ Add to Home Screen for quick access! ðŸŒŸ",
                // Category names
                catBiblical: "Biblical & Original",
                catSolfeggio: "Solfeggio & Healing",
                catAngel: "Angel Numbers",
                catMaster: "Master Numbers",
                catCosmic: "Cosmic & Planetary",
                catWellness: "Wellness & States",
                // Track names
                trackGenesisCreation: "Genesis Creation",
                trackDivineAbundance: "Divine Abundance",
                track12Apostles: "12 Apostles",
                track7Churches: "7 Churches",
                track40Days: "40 Days",
                track3Days: "3 Days",
                trackSacredHealing: "Sacred Healing",
                trackLoveFrequency: "Love Frequency",
                trackLiberation396: "Liberation (396)",
                trackResolution417: "Resolution (417)",
                trackTransformation639: "Transformation (639)",
                trackAwakening852: "Awakening (852)",
                trackHigherSelf: "Higher Self",
                trackIntuition: "Intuition",
                trackAngelNumbers: "Angel Numbers",
                trackAngel222: "Angel 222",
                trackAngel333: "Angel 333",
                trackAngel444: "Angel 444",
                trackAngel555: "Angel 555",
                trackAngel666: "Angel 666",
                trackAngel777: "Angel 777",
                trackAngel888: "Angel 888",
                trackAngel999: "Angel 999",
                trackMaster1111: "Master 11:11",
                trackMaster22: "Master 22",
                trackMaster33: "Master 33",
                trackMaster44: "Master 44",
                trackMaster55: "Master 55",
                trackEarthResonance: "Earth Resonance",
                trackVenusLove: "Venus Love",
                trackMarsAction: "Mars Action",
                trackFibonacci144: "Fibonacci 144",
                trackPi314: "Pi 314",
                trackGoldenRatio: "Golden Ratio",
                trackPainRelief: "Pain Relief",
                trackStressRelief: "Stress Relief",
                trackSleepDeep: "Sleep Deep",
                trackFocusClear: "Focus Clear",
                trackMemoryBoost: "Memory Boost",
                trackMiracleTone: "Miracle Tone",
                // Achievement names and descriptions
                achFirstSession: "ðŸŒŸ First Session",
                achFirstSessionDesc: "Completed your first frequency session",
                achFiveSessions: "ðŸ”¥ Five Sessions", 
                achFiveSessionsDesc: "Completed 5 sessions",
                achTenSessions: "ðŸ’ª Ten Sessions",
                achTenSessionsDesc: "Completed 10 sessions",
                achTwentyFiveSessions: "â­ Twenty-Five Sessions",
                achTwentyFiveSessionsDesc: "Completed 25 sessions",
                achFiftySessions: "ðŸ† Fifty Sessions",
                achFiftySessionsDesc: "Completed 50 sessions",
                achHundredSessions: "ðŸ‘‘ Century Master",
                achHundredSessionsDesc: "Completed 100 sessions",
                achFiveMinutes: "â±ï¸ Five Minutes",
                achFiveMinutesDesc: "Total listening time exceeds 5 minutes",
                achHalfHour: "ðŸ• Half Hour",
                achHalfHourDesc: "Total listening time exceeds 30 minutes",
                achHourTotal: "â° Hour Master",
                achHourTotalDesc: "Total listening time exceeds 1 hour",
                achFiveHours: "ðŸ•’ Five Hours",
                achFiveHoursDesc: "Total listening time exceeds 5 hours",
                achTenHours: "ðŸ•› Ten Hours",
                achTenHoursDesc: "Total listening time exceeds 10 hours",
                achThreeDayStreak: "ðŸ“… Three Day Streak",
                achThreeDayStreakDesc: "Used the app for 3 consecutive days",
                achWeekStreak: "ðŸ“… Week Warrior",
                achWeekStreakDesc: "Used the app for 7 consecutive days",
                achTwoWeekStreak: "ðŸ“… Two Week Champion",
                achTwoWeekStreakDesc: "Used the app for 14 consecutive days",
                achMonthStreak: "ðŸ“… Month Master",
                achMonthStreakDesc: "Used the app for 30 consecutive days",
                achTrinityMaster: "ðŸ”º Trinity Master",
                achTrinityMasterDesc: "Used all three Trinity frequencies together",
                achSolfeggioExplorer: "ðŸ’š Solfeggio Explorer",
                achSolfeggioExplorerDesc: "Explored Solfeggio healing frequencies",
                achAngelWhisperer: "ðŸ‘¼ Angel Whisperer",
                achAngelWhispererDesc: "Connected with Angel Number frequencies",
                achCosmicTraveler: "ðŸŒŒ Cosmic Traveler",
                achCosmicTravelerDesc: "Journeyed through Cosmic & Planetary frequencies",
                achWavExporter: "â¬‡ WAV Creator",
                achWavExporterDesc: "Exported your first WAV file",
                achNoteTaker: "ðŸ“ Journal Keeper",
                achNoteTakerDesc: "Added your first personal note",
                achPwaUser: "ðŸ“± Home Screen Hero",
                achPwaUserDesc: "Added app to home screen",
                achMultilingual: "ðŸŒ World Explorer",
                achMultilingualDesc: "Changed language settings",
                achFrequencyScholar: "ðŸŽ“ Frequency Scholar",
                achFrequencyScholarDesc: "Explored all frequency categories",
                achDedicatedSeeker: "ðŸ”® Dedicated Seeker",
                achDedicatedSeekerDesc: "100 sessions and 10 hours of listening",
                achGenesisMaster: "âœ¨ Genesis Master",
                achGenesisMasterDesc: "Unlocked all achievements",
                // Achievement names and descriptions
                achFirstSession: "ðŸŒŸ First Session",
                achFirstSessionDesc: "Completed your first frequency session",
                achFiveSessions: "ðŸ”¥ Five Sessions", 
                achFiveSessionsDesc: "Completed 5 sessions",
                achTenSessions: "ðŸ’ª Ten Sessions",
                achTenSessionsDesc: "Completed 10 sessions",
                achTwentyFiveSessions: "â­ Twenty-Five Sessions",
                achTwentyFiveSessionsDesc: "Completed 25 sessions",
                achFiftySessions: "ðŸ† Fifty Sessions",
                achFiftySessionsDesc: "Completed 50 sessions",
                achHundredSessions: "ðŸ‘‘ Century Master",
                achHundredSessionsDesc: "Completed 100 sessions",
                achFiveMinutes: "â±ï¸ Five Minutes",
                achFiveMinutesDesc: "Total listening time exceeds 5 minutes",
                achHalfHour: "ðŸ• Half Hour",
                achHalfHourDesc: "Total listening time exceeds 30 minutes",
                achHourTotal: "â° Hour Master",
                achHourTotalDesc: "Total listening time exceeds 1 hour",
                achFiveHours: "ðŸ•’ Five Hours",
                achFiveHoursDesc: "Total listening time exceeds 5 hours",
                achTenHours: "ðŸ•› Ten Hours",
                achTenHoursDesc: "Total listening time exceeds 10 hours",
                achThreeDayStreak: "ðŸ“… Three Day Streak",
                achThreeDayStreakDesc: "Used the app for 3 consecutive days",
                achWeekStreak: "ðŸ“… Week Warrior",
                achWeekStreakDesc: "Used the app for 7 consecutive days",
                achTwoWeekStreak: "ðŸ“… Two Week Champion",
                achTwoWeekStreakDesc: "Used the app for 14 consecutive days",
                achMonthStreak: "ðŸ“… Month Master",
                achMonthStreakDesc: "Used the app for 30 consecutive days",
                achTrinityMaster: "ðŸ”º Trinity Master",
                achTrinityMasterDesc: "Used all three Trinity frequencies together",
                achSolfeggioExplorer: "ðŸ’š Solfeggio Explorer",
                achSolfeggioExplorerDesc: "Explored Solfeggio healing frequencies",
                achAngelWhisperer: "ðŸ‘¼ Angel Whisperer",
                achAngelWhispererDesc: "Connected with Angel Number frequencies",
                achCosmicTraveler: "ðŸŒŒ Cosmic Traveler",
                achCosmicTravelerDesc: "Journeyed through Cosmic & Planetary frequencies",
                achWavExporter: "â¬‡ WAV Creator",
                achWavExporterDesc: "Exported your first WAV file",
                achNoteTaker: "ðŸ“ Journal Keeper",
                achNoteTakerDesc: "Added your first personal note",
                achPwaUser: "ðŸ“± Home Screen Hero",
                achPwaUserDesc: "Added app to home screen",
                achMultilingual: "ðŸŒ World Explorer",
                achMultilingualDesc: "Changed language settings",
                achFrequencyScholar: "ðŸŽ“ Frequency Scholar",
                achFrequencyScholarDesc: "Explored all frequency categories",
                achDedicatedSeeker: "ðŸ”® Dedicated Seeker",
                achDedicatedSeekerDesc: "100 sessions and 10 hours of listening",
                achGenesisMaster: "âœ¨ Genesis Master",
                achGenesisMasterDesc: "Unlocked all achievements",
                // Achievement categories
                catSessions: "Sessions",
                catTime: "Time",
                catStreaks: "Streaks", 
                catFrequencies: "Frequencies",
                catCategories: "Categories",
                catActions: "Actions",
                catMastery: "Mastery"
            },
            pt: {
                hebrewTranslation: "No princÃ­pio Deus criou os cÃ©us e a terra",
                title: "GÃªnesis 1:1",
                subtitle: "O Som da CriaÃ§Ã£o",
                pattern: "Amplificador de OraÃ§Ã£o",
                trinityTitle: "ðŸŒŸ FrequÃªncias da FundaÃ§Ã£o da Trindade ðŸŒŸ",
                formMatter: "Forma/MatÃ©ria",
                spiritDivine: "EspÃ­rito/Divino",
                beatPattern: "PadrÃ£o de Batida",
                recipesTitle: "ðŸŒŸ Receitas de FrequÃªncia da Trindade ðŸŒŸ",
                controlsTitle: "ðŸŒŸ Controles de FrequÃªncia ðŸŒŸ",
                duration: "DuraÃ§Ã£o",
                play: "TOCAR",
                pause: "PAUSAR",
                stop: "PARAR",
                export: "EXPORTAR WAV",
                reset: "REINICIAR",
                ready: "ðŸŒŸ Pronto para Gerar FrequÃªncias Genesis ðŸŒŸ",
                stopped: "ðŸŒŸ Parado - Pronto para Gerar ðŸŒŸ",
                playing: "Tocando",
                remaining: "restante",
                selected: "Selecionado",
                autoBalanced: "Volumes auto-balanceados",
                addToHomeText: "ðŸŒŸ Adicione Ã  Tela Inicial para acesso rÃ¡pido! ðŸŒŸ",
                // Category names
                catBiblical: "BÃ­blico & Original",
                catSolfeggio: "Solfeggio & Cura",
                catAngel: "NÃºmeros dos Anjos",
                catMaster: "NÃºmeros Mestres",
                catCosmic: "CÃ³smico & PlanetÃ¡rio",
                catWellness: "Bem-estar & Estados",
                // Track names
                trackGenesisCreation: "CriaÃ§Ã£o de GÃªnesis",
                trackDivineAbundance: "AbundÃ¢ncia Divina",
                track12Apostles: "12 ApÃ³stolos",
                track7Churches: "7 Igrejas",
                track40Days: "40 Dias",
                track3Days: "3 Dias",
                trackSacredHealing: "Cura Sagrada",
                trackLoveFrequency: "FrequÃªncia do Amor",
                trackLiberation396: "LibertaÃ§Ã£o (396)",
                trackResolution417: "ResoluÃ§Ã£o (417)",
                trackTransformation639: "TransformaÃ§Ã£o (639)",
                trackAwakening852: "Despertar (852)",
                trackHigherSelf: "Eu Superior",
                trackIntuition: "IntuiÃ§Ã£o",
                trackAngelNumbers: "NÃºmeros dos Anjos",
                trackAngel222: "Anjo 222",
                trackAngel333: "Anjo 333",
                trackAngel444: "Anjo 444",
                trackAngel555: "Anjo 555",
                trackAngel666: "Anjo 666",
                trackAngel777: "Anjo 777",
                trackAngel888: "Anjo 888",
                trackAngel999: "Anjo 999",
                trackMaster1111: "Mestre 11:11",
                trackMaster22: "Mestre 22",
                trackMaster33: "Mestre 33",
                trackMaster44: "Mestre 44",
                trackMaster55: "Mestre 55",
                trackEarthResonance: "RessonÃ¢ncia da Terra",
                trackVenusLove: "Amor de VÃªnus",
                trackMarsAction: "AÃ§Ã£o de Marte",
                trackFibonacci144: "Fibonacci 144",
                trackPi314: "Pi 314",
                trackGoldenRatio: "ProporÃ§Ã£o Ãurea",
                trackPainRelief: "AlÃ­vio da Dor",
                trackStressRelief: "AlÃ­vio do Estresse",
                trackSleepDeep: "Sono Profundo",
                trackFocusClear: "Foco Claro",
                trackMemoryBoost: "Impulso de MemÃ³ria",
                trackMiracleTone: "Tom do Milagre",
                // Achievement names and descriptions
                achFirstSession: "ðŸŒŸ Primeira SessÃ£o",
                achFirstSessionDesc: "Completou sua primeira sessÃ£o de frequÃªncia",
                achFiveSessions: "ðŸ”¥ Cinco SessÃµes", 
                achFiveSessionsDesc: "Completou 5 sessÃµes",
                achTenSessions: "ðŸ’ª Dez SessÃµes",
                achTenSessionsDesc: "Completou 10 sessÃµes",
                achTwentyFiveSessions: "â­ Vinte e Cinco SessÃµes",
                achTwentyFiveSessionsDesc: "Completou 25 sessÃµes",
                achFiftySessions: "ðŸ† Cinquenta SessÃµes",
                achFiftySessionsDesc: "Completou 50 sessÃµes",
                achHundredSessions: "ðŸ‘‘ Mestre do SÃ©culo",
                achHundredSessionsDesc: "Completou 100 sessÃµes",
                achFiveMinutes: "â±ï¸ Cinco Minutos",
                achFiveMinutesDesc: "Tempo total de escuta excede 5 minutos",
                achHalfHour: "ðŸ• Meia Hora",
                achHalfHourDesc: "Tempo total de escuta excede 30 minutos",
                achHourTotal: "â° Mestre da Hora",
                achHourTotalDesc: "Tempo total de escuta excede 1 hora",
                achFiveHours: "ðŸ•’ Cinco Horas",
                achFiveHoursDesc: "Tempo total de escuta excede 5 horas",
                achTenHours: "ðŸ•› Dez Horas",
                achTenHoursDesc: "Tempo total de escuta excede 10 horas",
                achThreeDayStreak: "ðŸ“… SequÃªncia de TrÃªs Dias",
                achThreeDayStreakDesc: "Usou o app por 3 dias consecutivos",
                achWeekStreak: "ðŸ“… Guerreiro da Semana",
                achWeekStreakDesc: "Usou o app por 7 dias consecutivos",
                achTwoWeekStreak: "ðŸ“… CampeÃ£o de Duas Semanas",
                achTwoWeekStreakDesc: "Usou o app por 14 dias consecutivos",
                achMonthStreak: "ðŸ“… Mestre do MÃªs",
                achMonthStreakDesc: "Usou o app por 30 dias consecutivos",
                achTrinityMaster: "ðŸ”º Mestre da Trindade",
                achTrinityMasterDesc: "Usou todas as trÃªs frequÃªncias da Trindade juntas",
                achSolfeggioExplorer: "ðŸ’š Explorador Solfeggio",
                achSolfeggioExplorerDesc: "Explorou frequÃªncias de cura Solfeggio",
                achAngelWhisperer: "ðŸ‘¼ Sussurrador de Anjos",
                achAngelWhispererDesc: "Conectou-se com frequÃªncias de NÃºmeros dos Anjos",
                achCosmicTraveler: "ðŸŒŒ Viajante CÃ³smico",
                achCosmicTravelerDesc: "Viajou atravÃ©s de frequÃªncias CÃ³smicas & PlanetÃ¡rias",
                achWavExporter: "â¬‡ Criador WAV",
                achWavExporterDesc: "Exportou seu primeiro arquivo WAV",
                achNoteTaker: "ðŸ“ GuardiÃ£o do DiÃ¡rio",
                achNoteTakerDesc: "Adicionou sua primeira nota pessoal",
                achPwaUser: "ðŸ“± HerÃ³i da Tela Inicial",
                achPwaUserDesc: "Adicionou app Ã  tela inicial",
                achMultilingual: "ðŸŒ Explorador Mundial",
                achMultilingualDesc: "Alterou configuraÃ§Ãµes de idioma",
                achFrequencyScholar: "ðŸŽ“ Erudito das FrequÃªncias",
                achFrequencyScholarDesc: "Explorou todas as categorias de frequÃªncia",
                achDedicatedSeeker: "ðŸ”® Buscador Dedicado",
                achDedicatedSeekerDesc: "100 sessÃµes e 10 horas de escuta",
                achGenesisMaster: "âœ¨ Mestre Genesis",
                achGenesisMasterDesc: "Desbloqueou todas as conquistas",
                // Achievement categories
                catSessions: "SessÃµes",
                catTime: "Tempo",
                catStreaks: "SequÃªncias", 
                catFrequencies: "FrequÃªncias",
                catCategories: "Categorias",
                catActions: "AÃ§Ãµes",
                catMastery: "Maestria"
            },
            es: {
                hebrewTranslation: "En el principio creÃ³ Dios los cielos y la tierra",
                title: "GÃ©nesis 1:1",
                subtitle: "El Sonido de la CreaciÃ³n",
                pattern: "Amplificador de OraciÃ³n",
                trinityTitle: "ðŸŒŸ Frecuencias de la FundaciÃ³n de la Trinidad ðŸŒŸ",
                formMatter: "Forma/Materia",
                spiritDivine: "EspÃ­ritu/Divino",
                beatPattern: "PatrÃ³n de Latido",
                recipesTitle: "ðŸŒŸ Recetas de Frecuencia de la Trinidad ðŸŒŸ",
                controlsTitle: "ðŸŒŸ Controles de Frecuencia ðŸŒŸ",
                duration: "DuraciÃ³n",
                play: "REPRODUCIR",
                pause: "PAUSAR",
                stop: "DETENER",
                export: "EXPORTAR WAV",
                reset: "REINICIAR",
                ready: "ðŸŒŸ Listo para Generar Frecuencias Genesis ðŸŒŸ",
                stopped: "ðŸŒŸ Detenido - Listo para Generar ðŸŒŸ",
                playing: "Reproduciendo",
                remaining: "restante",
                selected: "Seleccionado",
                autoBalanced: "VolÃºmenes auto-balanceados",
                addToHomeText: "ðŸŒŸ Â¡Agregar a la Pantalla de Inicio para acceso rÃ¡pido! ðŸŒŸ",
                // Category names
                catBiblical: "BÃ­blico & Original",
                catSolfeggio: "Solfeggio & SanaciÃ³n",
                catAngel: "NÃºmeros Angelicales",
                catMaster: "NÃºmeros Maestros",
                catCosmic: "CÃ³smico & Planetario",
                catWellness: "Bienestar & Estados",
                // Track names
                trackGenesisCreation: "CreaciÃ³n de GÃ©nesis",
                trackDivineAbundance: "Abundancia Divina",
                track12Apostles: "12 ApÃ³stoles",
                track7Churches: "7 Iglesias",
                track40Days: "40 DÃ­as",
                track3Days: "3 DÃ­as",
                trackSacredHealing: "SanaciÃ³n Sagrada",
                trackLoveFrequency: "Frecuencia del Amor",
                trackLiberation396: "LiberaciÃ³n (396)",
                trackResolution417: "ResoluciÃ³n (417)",
                trackTransformation639: "TransformaciÃ³n (639)",
                trackAwakening852: "Despertar (852)",
                trackHigherSelf: "Yo Superior",
                trackIntuition: "IntuiciÃ³n",
                trackAngelNumbers: "NÃºmeros Angelicales",
                trackAngel222: "Ãngel 222",
                trackAngel333: "Ãngel 333",
                trackAngel444: "Ãngel 444",
                trackAngel555: "Ãngel 555",
                trackAngel666: "Ãngel 666",
                trackAngel777: "Ãngel 777",
                trackAngel888: "Ãngel 888",
                trackAngel999: "Ãngel 999",
                trackMaster1111: "Maestro 11:11",
                trackMaster22: "Maestro 22",
                trackMaster33: "Maestro 33",
                trackMaster44: "Maestro 44",
                trackMaster55: "Maestro 55",
                trackEarthResonance: "Resonancia de la Tierra",
                trackVenusLove: "Amor de Venus",
                trackMarsAction: "AcciÃ³n de Marte",
                trackFibonacci144: "Fibonacci 144",
                trackPi314: "Pi 314",
                trackGoldenRatio: "ProporciÃ³n Ãurea",
                trackPainRelief: "Alivio del Dolor",
                trackStressRelief: "Alivio del EstrÃ©s",
                trackSleepDeep: "SueÃ±o Profundo",
                trackFocusClear: "Enfoque Claro",
                trackMemoryBoost: "Impulso de Memoria",
                trackMiracleTone: "Tono Milagroso",
                // Achievement names and descriptions
                achFirstSession: "ðŸŒŸ Primera SesiÃ³n",
                achFirstSessionDesc: "CompletÃ³ su primera sesiÃ³n de frecuencia",
                achFiveSessions: "ðŸ”¥ Cinco Sesiones", 
                achFiveSessionsDesc: "CompletÃ³ 5 sesiones",
                achTenSessions: "ðŸ’ª Diez Sesiones",
                achTenSessionsDesc: "CompletÃ³ 10 sesiones",
                achTwentyFiveSessions: "â­ Veinticinco Sesiones",
                achTwentyFiveSessionsDesc: "CompletÃ³ 25 sesiones",
                achFiftySessions: "ðŸ† Cincuenta Sesiones",
                achFiftySessionsDesc: "CompletÃ³ 50 sesiones",
                achHundredSessions: "ðŸ‘‘ Maestro del Siglo",
                achHundredSessionsDesc: "CompletÃ³ 100 sesiones",
                achFiveMinutes: "â±ï¸ Cinco Minutos",
                achFiveMinutesDesc: "El tiempo total de escucha excede 5 minutos",
                achHalfHour: "ðŸ• Media Hora",
                achHalfHourDesc: "El tiempo total de escucha excede 30 minutos",
                achHourTotal: "â° Maestro de la Hora",
                achHourTotalDesc: "El tiempo total de escucha excede 1 hora",
                achFiveHours: "ðŸ•’ Cinco Horas",
                achFiveHoursDesc: "El tiempo total de escucha excede 5 horas",
                achTenHours: "ðŸ•› Diez Horas",
                achTenHoursDesc: "El tiempo total de escucha excede 10 horas",
                achThreeDayStreak: "ðŸ“… Racha de Tres DÃ­as",
                achThreeDayStreakDesc: "UsÃ³ la app por 3 dÃ­as consecutivos",
                achWeekStreak: "ðŸ“… Guerrero de la Semana",
                achWeekStreakDesc: "UsÃ³ la app por 7 dÃ­as consecutivos",
                achTwoWeekStreak: "ðŸ“… CampeÃ³n de Dos Semanas",
                achTwoWeekStreakDesc: "UsÃ³ la app por 14 dÃ­as consecutivos",
                achMonthStreak: "ðŸ“… Maestro del Mes",
                achMonthStreakDesc: "UsÃ³ la app por 30 dÃ­as consecutivos",
                achTrinityMaster: "ðŸ”º Maestro de la Trinidad",
                achTrinityMasterDesc: "UsÃ³ las tres frecuencias de la Trinidad juntas",
                achSolfeggioExplorer: "ðŸ’š Explorador Solfeggio",
                achSolfeggioExplorerDesc: "ExplorÃ³ frecuencias de sanaciÃ³n Solfeggio",
                achAngelWhisperer: "ðŸ‘¼ Susurrador de Ãngeles",
                achAngelWhispererDesc: "Se conectÃ³ con frecuencias de NÃºmeros Angelicales",
                achCosmicTraveler: "ðŸŒŒ Viajero CÃ³smico",
                achCosmicTravelerDesc: "ViajÃ³ a travÃ©s de frecuencias CÃ³smicas & Planetarias",
                achWavExporter: "â¬‡ Creador WAV",
                achWavExporterDesc: "ExportÃ³ su primer archivo WAV",
                achNoteTaker: "ðŸ“ GuardiÃ¡n del Diario",
                achNoteTakerDesc: "AgregÃ³ su primera nota personal",
                achPwaUser: "ðŸ“± HÃ©roe de la Pantalla de Inicio",
                achPwaUserDesc: "AgregÃ³ app a la pantalla de inicio",
                achMultilingual: "ðŸŒ Explorador Mundial",
                achMultilingualDesc: "CambiÃ³ configuraciones de idioma",
                achFrequencyScholar: "ðŸŽ“ Erudito de las Frecuencias",
                achFrequencyScholarDesc: "ExplorÃ³ todas las categorÃ­as de frecuencia",
                achDedicatedSeeker: "ðŸ”® Buscador Dedicado",
                achDedicatedSeekerDesc: "100 sesiones y 10 horas de escucha",
                achGenesisMaster: "âœ¨ Maestro GÃ©nesis",
                achGenesisMasterDesc: "DesbloqueÃ³ todos los logros",
                // Achievement categories
                catSessions: "Sesiones",
                catTime: "Tiempo",
                catStreaks: "Rachas", 
                catFrequencies: "Frecuencias",
                catCategories: "CategorÃ­as",
                catActions: "Acciones",
                catMastery: "MaestrÃ­a"
            },
            it: {
                hebrewTranslation: "In principio Dio creÃ² il cielo e la terra",
                title: "Genesi 1:1",
                subtitle: "Il Suono della Creazione",
                pattern: "Amplificatore di Preghiera",
                trinityTitle: "ðŸŒŸ Frequenze della Fondazione della TrinitÃ  ðŸŒŸ",
                formMatter: "Forma/Materia",
                spiritDivine: "Spirito/Divino",
                beatPattern: "Schema del Battito",
                recipesTitle: "ðŸŒŸ Ricette di Frequenza della TrinitÃ  ðŸŒŸ",
                controlsTitle: "ðŸŒŸ Controlli di Frequenza ðŸŒŸ",
                duration: "Durata",
                play: "RIPRODUCI",
                pause: "PAUSA",
                stop: "FERMA",
                export: "ESPORTA WAV",
                reset: "RIPRISTINA",
                ready: "ðŸŒŸ Pronto per Generare Frequenze Genesis ðŸŒŸ",
                stopped: "ðŸŒŸ Fermato - Pronto per Generare ðŸŒŸ",
                playing: "Riproduzione",
                remaining: "rimanente",
                selected: "Selezionato",
                autoBalanced: "Volumi auto-bilanciati",
                addToHomeText: "ðŸŒŸ Aggiungi alla schermata Home per un accesso rapido! ðŸŒŸ",
                // Category names
                catBiblical: "Biblico & Originale",
                catSolfeggio: "Solfeggio & Guarigione",
                catAngel: "Numeri Angelici",
                catMaster: "Numeri Maestri",
                catCosmic: "Cosmico & Planetario",
                catWellness: "Benessere & Stati",
                // Track names
                trackGenesisCreation: "Creazione di Genesi",
                trackDivineAbundance: "Abbondanza Divina",
                track12Apostles: "12 Apostoli",
                track7Churches: "7 Chiese",
                track40Days: "40 Giorni",
                track3Days: "3 Giorni",
                trackSacredHealing: "Guarigione Sacra",
                trackLoveFrequency: "Frequenza dell'Amore",
                trackLiberation396: "Liberazione (396)",
                trackResolution417: "Risoluzione (417)",
                trackTransformation639: "Trasformazione (639)",
                trackAwakening852: "Risveglio (852)",
                trackHigherSelf: "SÃ© Superiore",
                trackIntuition: "Intuizione",
                trackAngelNumbers: "Numeri Angelici",
                trackAngel222: "Angelo 222",
                trackAngel333: "Angelo 333",
                trackAngel444: "Angelo 444",
                trackAngel555: "Angelo 555",
                trackAngel666: "Angelo 666",
                trackAngel777: "Angelo 777",
                trackAngel888: "Angelo 888",
                trackAngel999: "Angelo 999",
                trackMaster1111: "Maestro 11:11",
                trackMaster22: "Maestro 22",
                trackMaster33: "Maestro 33",
                trackMaster44: "Maestro 44",
                trackMaster55: "Maestro 55",
                trackEarthResonance: "Risonanza della Terra",
                trackVenusLove: "Amore di Venere",
                trackMarsAction: "Azione di Marte",
                trackFibonacci144: "Fibonacci 144",
                trackPi314: "Pi 314",
                trackGoldenRatio: "Rapporto Aureo",
                trackPainRelief: "Sollievo dal Dolore",
                trackStressRelief: "Sollievo dallo Stress",
                trackSleepDeep: "Sonno Profondo",
                trackFocusClear: "Focus Chiaro",
                trackMemoryBoost: "Incremento Memoria",
                trackMiracleTone: "Tono Miracoloso",
                // Achievement names and descriptions
                achFirstSession: "ðŸŒŸ Prima Sessione",
                achFirstSessionDesc: "Completata la tua prima sessione di frequenza",
                achFiveSessions: "ðŸ”¥ Cinque Sessioni", 
                achFiveSessionsDesc: "Completate 5 sessioni",
                achTenSessions: "ðŸ’ª Dieci Sessioni",
                achTenSessionsDesc: "Completate 10 sessioni",
                achTwentyFiveSessions: "â­ Venticinque Sessioni",
                achTwentyFiveSessionsDesc: "Completate 25 sessioni",
                achFiftySessions: "ðŸ† Cinquanta Sessioni",
                achFiftySessionsDesc: "Completate 50 sessioni",
                achHundredSessions: "ðŸ‘‘ Maestro del Secolo",
                achHundredSessionsDesc: "Completate 100 sessioni",
                achFiveMinutes: "â±ï¸ Cinque Minuti",
                achFiveMinutesDesc: "Il tempo totale di ascolto supera i 5 minuti",
                achHalfHour: "ðŸ• Mezza Ora",
                achHalfHourDesc: "Il tempo totale di ascolto supera i 30 minuti",
                achHourTotal: "â° Maestro dell'Ora",
                achHourTotalDesc: "Il tempo totale di ascolto supera 1 ora",
                achFiveHours: "ðŸ•’ Cinque Ore",
                achFiveHoursDesc: "Il tempo totale di ascolto supera 5 ore",
                achTenHours: "ðŸ•› Dieci Ore",
                achTenHoursDesc: "Il tempo totale di ascolto supera 10 ore",
                achThreeDayStreak: "ðŸ“… Serie di Tre Giorni",
                achThreeDayStreakDesc: "Hai usato l'app per 3 giorni consecutivi",
                achWeekStreak: "ðŸ“… Guerriero della Settimana",
                achWeekStreakDesc: "Hai usato l'app per 7 giorni consecutivi",
                achTwoWeekStreak: "ðŸ“… Campione di Due Settimane",
                achTwoWeekStreakDesc: "Hai usato l'app per 14 giorni consecutivi",
                achMonthStreak: "ðŸ“… Maestro del Mese",
                achMonthStreakDesc: "Hai usato l'app per 30 giorni consecutivi",
                achTrinityMaster: "ðŸ”º Maestro della TrinitÃ ",
                achTrinityMasterDesc: "Hai usato tutte e tre le frequenze della TrinitÃ  insieme",
                achSolfeggioExplorer: "ðŸ’š Esploratore Solfeggio",
                achSolfeggioExplorerDesc: "Hai esplorato le frequenze di guarigione Solfeggio",
                achAngelWhisperer: "ðŸ‘¼ Sussurratore di Angeli",
                achAngelWhispererDesc: "Ti sei connesso con le frequenze dei Numeri Angelici",
                achCosmicTraveler: "ðŸŒŒ Viaggiatore Cosmico",
                achCosmicTravelerDesc: "Hai viaggiato attraverso le frequenze Cosmiche & Planetarie",
                achWavExporter: "â¬‡ Creatore WAV",
                achWavExporterDesc: "Hai esportato il tuo primo file WAV",
                achNoteTaker: "ðŸ“ Custode del Diario",
                achNoteTakerDesc: "Hai aggiunto la tua prima nota personale",
                achPwaUser: "ðŸ“± Eroe della Schermata Home",
                achPwaUserDesc: "Hai aggiunto l'app alla schermata home",
                achMultilingual: "ðŸŒ Esploratore Mondiale",
                achMultilingualDesc: "Hai cambiato le impostazioni della lingua",
                achFrequencyScholar: "ðŸŽ“ Studioso delle Frequenze",
                achFrequencyScholarDesc: "Hai esplorato tutte le categorie di frequenza",
                achDedicatedSeeker: "ðŸ”® Cercatore Dedicato",
                achDedicatedSeekerDesc: "100 sessioni e 10 ore di ascolto",
                achGenesisMaster: "âœ¨ Maestro Genesi",
                achGenesisMasterDesc: "Hai sbloccato tutti i traguardi",
                // Achievement categories
                catSessions: "Sessioni",
                catTime: "Tempo",
                catStreaks: "Serie", 
                catFrequencies: "Frequenze",
                catCategories: "Categorie",
                catActions: "Azioni",
                catMastery: "Maestria"
            }
        };
        
        let currentLanguage = 'en';
        
        // Load saved language preference on startup
        (function() {
            const savedLanguage = localStorage.getItem('preferredLanguage');
            if (savedLanguage && translations[savedLanguage]) {
                currentLanguage = savedLanguage;
                // Don't call changeLanguage here, wait for DOM and function to be ready
                // It will be called in DOMContentLoaded
            }
        })();
        
        function closeAddToHome() {
            const banner = document.getElementById('addToHome');
            banner.style.display = 'none';
            localStorage.setItem('hideAddToHome', 'true');
        }
        
        // Check if user already dismissed the banner
        if (localStorage.getItem('hideAddToHome') === 'true') {
            const banner = document.getElementById('addToHome');
            if (banner) banner.style.display = 'none';
        }
        
        function changeLanguage(lang) {
            currentLanguage = lang;
            const t = translations[lang];
            
            // Save language preference
            localStorage.setItem('preferredLanguage', lang);
            
            // Update active button state
            document.querySelectorAll('.language-btn').forEach(btn => {
                if (btn.getAttribute('data-lang') === lang) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
            
            // Update all elements with data-translate attribute
            document.querySelectorAll('[data-translate]').forEach(el => {
                const key = el.getAttribute('data-translate');
                if (t[key]) {
                    el.textContent = t[key];
                }
            });
            
            // Update Trinity section labels
            const trinityLabels = document.querySelectorAll('.trinity-freq .label');
            if (trinityLabels[0]) trinityLabels[0].textContent = t.formMatter;
            if (trinityLabels[1]) trinityLabels[1].textContent = t.spiritDivine;
            if (trinityLabels[2]) trinityLabels[2].textContent = t.beatPattern;
            
            // Update buttons (keep PLAY in English for universal recognition)
            const playBtn = document.getElementById('playBtn');
            if (playBtn && playBtn.textContent.includes('PLAY')) {
                playBtn.textContent = 'â–¶ PLAY';
            }
            document.getElementById('stopBtn').textContent = `â–  ${t.stop}`;
            document.getElementById('exportBtn').textContent = `â¬‡ ${t.export}`;
            document.getElementById('resetBtn').textContent = `â†º ${t.reset}`;
            
            // Update status if not playing
            const statusEl = document.getElementById('status');
            if (statusEl && statusEl.textContent.includes('Ready')) {
                statusEl.textContent = `â–¡ ${t.ready}`;
            }
            
            // Update progress section to reflect new language
            if (typeof instructionsSections !== 'undefined') {
                renderInstructionsCategories();
            }
        }
        
        // Enhanced Trinity Frequency Recipes Database with Categories
        // Order: Biblical, Angel Numbers, Cosmic & Planetary, Master Numbers, Solfeggio & Healing, Wellness & States
        const trinityRecipes = {
            "Chakra Frequencies": [
                {
                    name: "Root Chakra",
                    frequencies: [37, 73, 396],
                    description: "Grounding, safety, and stability. Associated with Liberation (396 Hz).",
                    fullInfo: {
                        whatItIs: "396 Hz is the Solfeggio frequency for liberating guilt and fear, working on the root chakra for grounding and stability.",
                        benefits: "Promotes grounding, releases fear, and enhances feelings of safety and security.",
                        howToUse: "Listen for 10-15 minutes during meditation or when you need grounding. Visualize roots connecting you to the earth."
                    }
                },
                {
                    name: "Sacral Chakra",
                    frequencies: [37, 73, 417],
                    description: "Creativity, pleasure, and emotional balance. Associated with Resolution (417 Hz).",
                    fullInfo: {
                        whatItIs: "417 Hz facilitates change and helps undo negative situations, working on the sacral chakra for creativity and emotional healing.",
                        benefits: "Enhances creativity, emotional balance, and pleasure in life.",
                        howToUse: "Use for 10-15 minutes to boost creativity or emotional healing. Focus on the lower abdomen."
                    }
                },
                {
                    name: "Solar Plexus Chakra",
                    frequencies: [37, 73, 528],
                    description: "Personal power, confidence, and transformation. Associated with Love Frequency (528 Hz).",
                    fullInfo: {
                        whatItIs: "528 Hz is the frequency of transformation and DNA repair, working on the solar plexus for personal power and confidence.",
                        benefits: "Boosts confidence, personal power, and supports transformation.",
                        howToUse: "Listen for 10-15 minutes to empower yourself before important tasks. Focus on the upper abdomen."
                    }
                },
                {
                    name: "Heart Chakra",
                    frequencies: [37, 73, 639],
                    description: "Love, compassion, and relationships. Associated with Transformation (639 Hz).",
                    fullInfo: {
                        whatItIs: "639 Hz promotes connection and love, working on the heart chakra for emotional healing and relationships.",
                        benefits: "Opens the heart, enhances compassion, and heals relationships.",
                        howToUse: "Use for 10-15 minutes to open your heart or heal relationships. Place hands on your heart while listening."
                    }
                },
                {
                    name: "Throat Chakra",
                    frequencies: [37, 73, 741],
                    description: "Communication, truth, and self-expression. Associated with Intuition (741 Hz).",
                    fullInfo: {
                        whatItIs: "741 Hz cleanses the body and opens the throat chakra for clear communication and self-expression.",
                        benefits: "Improves communication, self-expression, and clarity.",
                        howToUse: "Listen for 10-15 minutes before important conversations or creative work. Focus on the throat area."
                    }
                },
                {
                    name: "Third Eye Chakra",
                    frequencies: [37, 73, 852],
                    description: "Intuition, insight, and spiritual awareness. Associated with Awakening (852 Hz).",
                    fullInfo: {
                        whatItIs: "852 Hz awakens intuition and spiritual order, working on the third eye for insight and awareness.",
                        benefits: "Enhances intuition, insight, and spiritual perception.",
                        howToUse: "Use for 10-15 minutes during meditation or when seeking insight. Focus on the forehead between the eyes."
                    }
                },
                {
                    name: "Crown Chakra",
                    frequencies: [37, 73, 963],
                    description: "Spiritual connection, enlightenment, and unity. Associated with Higher Self (963 Hz).",
                    fullInfo: {
                        whatItIs: "963 Hz is the frequency of divine consciousness, working on the crown chakra for spiritual connection and enlightenment.",
                        benefits: "Promotes spiritual connection, unity, and enlightenment.",
                        howToUse: "Listen for 10-15 minutes during deep meditation or spiritual practice. Focus on the top of the head."
                    }
                }
            ],
            "Biblical & Original": [
                {
                    name: "Genesis Creation",
                    frequencies: [37, 73],
                    description: "Original creation pattern - form meets spirit",
                    fullInfo: {
                        whatItIs: "The Genesis Creation frequency combines the foundational 37 Hz (representing form and matter) with 73 Hz (representing spirit and the divine). These numbers are derived from the gematria value of Genesis 1:1 in Hebrew, encoding the very pattern of creation itself.",
                        benefits: "This combination aligns you with the original creative force of the universe. It helps manifest intentions, brings clarity to new beginnings, and connects you to the divine blueprint of creation. Perfect for prayer amplification and spiritual manifestation work.",
                        howToUse: "Listen for 5-10 minutes during morning meditation or prayer. Visualize your intentions being woven into the fabric of creation. Ideal for new moon rituals or when starting new projects."
                    }
                },
                {
                    name: "Divine Abundance",
                    frequencies: [37, 73, 888],
                    description: "Amplify manifestation with divine numerology",
                    fullInfo: {
                        whatItIs: "Divine Abundance adds 888 Hz to the Trinity foundation. In biblical numerology, 8 represents new beginnings and resurrection, while 888 is the gematria value of Jesus in Greek, representing divine abundance and eternal provision.",
                        benefits: "Opens channels for divine prosperity and abundance in all areas of life. Helps release scarcity consciousness and aligns you with infinite supply. Particularly powerful for financial breakthroughs and recognizing opportunities.",
                        howToUse: "Listen for 15-20 minutes while focusing on gratitude for what you have and openness to receive. Best used during full moon or Thursday (Jupiter's day). Journal your abundance wins afterward."
                    }
                },
                {
                    name: "12 Apostles",
                    frequencies: [37, 73, 12],
                    description: "Divine leadership and spiritual authority",
                    fullInfo: {
                        whatItIs: "The number 12 represents divine government, leadership, and spiritual authority. This frequency combination invokes the power of the 12 apostles and the 12 tribes of Israel, symbolizing complete divine order.",
                        benefits: "Strengthens leadership abilities, provides spiritual authority in challenging situations, and helps you stand firm in your convictions. Excellent for those in ministry, teaching, or positions of spiritual guidance.",
                        howToUse: "Use for 10-15 minutes before important decisions or leadership responsibilities. Pray for wisdom and discernment. Ideal for Sunday listening or before leading groups."
                    }
                },
                {
                    name: "7 Churches",
                    frequencies: [37, 73, 7],
                    description: "Spiritual completeness and perfection",
                    fullInfo: {
                        whatItIs: "Seven is the number of spiritual perfection and completion in Scripture. This frequency references the 7 churches in Revelation, representing the complete body of believers and spiritual wholeness.",
                        benefits: "Brings a sense of completion to spiritual cycles, promotes wholeness and integration, and helps you recognize divine perfection in your journey. Useful for ending chapters and spiritual transitions.",
                        howToUse: "Listen for 7 minutes during transitions or when seeking closure. Perfect for Saturday (Sabbath preparation) or when completing spiritual milestones. Reflect on your spiritual growth."
                    }
                },
                {
                    name: "40 Days",
                    frequencies: [37, 73, 40],
                    description: "Spiritual testing and transformation",
                    fullInfo: {
                        whatItIs: "Forty represents testing, trial, and transformation in Scriptureâ€”Jesus' 40 days in the wilderness, Noah's 40 days of rain, Israel's 40 years in the desert. This frequency supports you through transformative periods.",
                        benefits: "Provides strength during trials, supports spiritual endurance, and helps you emerge transformed from difficult seasons. Accelerates spiritual maturity and deepens faith through challenges.",
                        howToUse: "Use daily for 10-20 minutes during challenging periods or 40-day spiritual commitments. Journal insights and spiritual lessons. Combine with fasting or intensive prayer practices."
                    }
                },
                {
                    name: "3 Days",
                    frequencies: [37, 73, 3],
                    description: "Resurrection and divine completion",
                    fullInfo: {
                        whatItIs: "Three days represents resurrection powerâ€”the time between Christ's death and resurrection. This frequency carries the energy of divine completion and the power to resurrect dead situations.",
                        benefits: "Brings new life to stagnant areas, restores hope in seemingly impossible situations, and activates resurrection power in your circumstances. Perfect for breakthrough moments.",
                        howToUse: "Listen for 3 minutes three times daily during 3-day prayer intensives. Speak life over dead situations. Particularly powerful Friday through Sunday or during personal 3-day fasts."
                    }
                }
            ],
            "Solfeggio & Healing": [
                {
                    name: "Sacred Healing",
                    frequencies: [37, 73, 432],
                    description: "Universal healing with Trinity foundation",
                    fullInfo: {
                        whatItIs: "432 Hz is known as the 'natural frequency of the universe,' promoting healing and harmony with nature. Combined with the Trinity foundation, this creates a powerful healing environment at cellular and spiritual levels.",
                        benefits: "Reduces stress and anxiety, promotes physical healing, aligns you with natural rhythms, and creates inner peace. Helps resolve emotional wounds and trauma at deep levels.",
                        howToUse: "Listen for 20-30 minutes during healing sessions, before sleep, or when feeling physically unwell. Breathe deeply and allow the frequencies to permeate every cell. Can be used during energy healing work."
                    }
                },
                {
                    name: "Love Frequency",
                    frequencies: [37, 73, 528],
                    description: "DNA repair + Trinity foundation",
                    fullInfo: {
                        whatItIs: "528 Hz is called the 'Love Frequency' or 'Miracle Tone,' scientifically shown to repair DNA and promote cellular healing. It's the exact frequency used by genetic engineers to repair DNA.",
                        benefits: "Repairs DNA damage, promotes cellular regeneration, opens the heart chakra, increases love and compassion, and facilitates profound healing at the genetic level. Helps release ancestral trauma.",
                        howToUse: "Use for 15-20 minutes daily for DNA repair and heart healing. Place hands on heart while listening. Excellent for morning rituals or before important heart-centered conversations."
                    }
                },
                {
                    name: "Liberation (396)",
                    frequencies: [37, 73, 396],
                    description: "Fear release + Trinity foundation",
                    fullInfo: {
                        whatItIs: "396 Hz is the Solfeggio frequency for liberating guilt and fear. It works on the root chakra, helping to release deep-seated negative emotions and trauma from the subconscious.",
                        benefits: "Releases fear, guilt, and trauma stored in the body. Helps break free from limiting beliefs and past conditioning. Creates safety and security at the foundational level of being.",
                        howToUse: "Listen for 10-15 minutes while identifying fears or guilt to release. Breathe into areas of tension. Best used in evening or during shadow work. Journal afterward to process released emotions."
                    }
                },
                {
                    name: "Resolution (417)",
                    frequencies: [37, 73, 417],
                    description: "Negative energy clearing + Trinity",
                    fullInfo: {
                        whatItIs: "417 Hz facilitates change and helps undo negative situations. It cleanses traumatic experiences and clears destructive influences from past events, working on the sacral chakra.",
                        benefits: "Clears negative energy and influences, facilitates positive change, removes energetic blockages, and helps break negative patterns. Excellent for clearing spaces and resetting energy.",
                        howToUse: "Use for 15 minutes when feeling energetically heavy or stuck. Move your body gently while listening. Great for space clearing or after difficult interactions. Visualize light dissolving darkness."
                    }
                },
                {
                    name: "Transformation (639)",
                    frequencies: [37, 73, 639],
                    description: "Relationship healing + Trinity",
                    fullInfo: {
                        whatItIs: "639 Hz promotes connection, love, and understanding in relationships. It works on the heart chakra, facilitating communication and emotional balance in all types of relationships.",
                        benefits: "Heals relationship conflicts, improves communication, promotes empathy and understanding, strengthens bonds with others, and helps forgive and release resentment.",
                        howToUse: "Listen for 20 minutes before difficult conversations or relationship healing work. Can be used with partner present. Excellent for family gatherings or when healing from relationship trauma."
                    }
                },
                {
                    name: "Awakening (852)",
                    frequencies: [37, 73, 852],
                    description: "Spiritual order + Trinity base",
                    fullInfo: {
                        whatItIs: "852 Hz awakens intuition and returns you to spiritual order. It works on the third eye chakra, cutting through illusions and revealing truth, helping you see the divine order in all things.",
                        benefits: "Awakens intuition and inner vision, reveals truth, strengthens spiritual perception, aligns you with divine order, and helps discern genuine spiritual guidance.",
                        howToUse: "Use for 15-20 minutes during meditation or before making important decisions. Focus on third eye area. Best used in morning or during new spiritual practices. Keep a vision journal."
                    }
                },
                {
                    name: "Higher Self",
                    frequencies: [37, 73, 963],
                    description: "Pineal gland activation + Trinity",
                    fullInfo: {
                        whatItIs: "963 Hz is the frequency of divine consciousness and pineal gland activation. It represents the return to oneness and connection with the higher self and divine source.",
                        benefits: "Activates pineal gland, connects you with higher consciousness, facilitates spiritual awakening, promotes unity consciousness, and opens channels for divine downloads and revelation.",
                        howToUse: "Listen for 10-15 minutes during deep meditation or spiritual contemplation. Best used in darkness or with closed eyes. Ideal for crown chakra work or receiving spiritual insights."
                    }
                },
                {
                    name: "Intuition",
                    frequencies: [37, 73, 741],
                    description: "Third eye opening + Trinity base",
                    fullInfo: {
                        whatItIs: "741 Hz cleanses the body of toxins and electromagnetic radiation while opening the third eye. It promotes expression, solution-finding, and intuitive perception.",
                        benefits: "Strengthens intuition, cleanses electromagnetic pollution, promotes detoxification, enhances problem-solving abilities, and helps express truth clearly.",
                        howToUse: "Use for 15 minutes daily to develop intuition. Excellent after screen time or in urban environments. Ask questions and trust the answers that arise. Keep an intuition journal."
                    }
                }
                       ],
            "Angel Numbers": [
                {
                    name: "Angel Numbers",
                    frequencies: [37, 73, 111],
                    description: "Connect with angelic frequencies (111 = 37Ã—3)",
                    fullInfo: {
                        whatItIs: "111 is a powerful angel number representing new beginnings, manifestation, and spiritual awakening. Mathematically, 111 = 37 Ã— 3, creating a divine alignment with the Trinity foundation.",
                        benefits: "Opens communication with angels and spirit guides, signals new beginnings, accelerates manifestation of thoughts into reality, and heightens spiritual awareness and synchronicities.",
                        howToUse: "Listen for 11 minutes when you notice 11:11 on the clock. Focus on your intentions and desires. Perfect for manifesting work or when seeking angelic guidance. Pay attention to signs afterward."
                    }
                },
                {
                    name: "Angel 222",
                    frequencies: [37, 73, 222],
                    description: "Divine partnerships (222 = 37Ã—6)",
                    fullInfo: {
                        whatItIs: "222 represents balance, harmony, and divine partnerships. The mathematical relationship to 37 (222 = 37Ã—6) creates perfect harmony with the creation frequency.",
                        benefits: "Brings balance to relationships, attracts divine partnerships and soul connections, promotes cooperation and harmony, and signals that your prayers are being answered.",
                        howToUse: "Use for 15-20 minutes during relationship work or when seeking partnership. Visualize balanced relationships. Great for attracting business partners or romantic connections."
                    }
                },
                {
                    name: "Angel 333",
                    frequencies: [37, 73, 333],
                    description: "Ascended masters (333 = 37Ã—9)",
                    fullInfo: {
                        whatItIs: "333 signals the presence of ascended masters and divine support. The 9 in the equation (333 = 37Ã—9) represents spiritual completion and enlightenment.",
                        benefits: "Connects you with ascended masters, confirms you're on the right path, provides divine protection and guidance, and accelerates spiritual growth and awakening.",
                        howToUse: "Listen for 15 minutes when seeking guidance from higher realms. Call upon specific ascended masters. Best used during spiritual study or when facing spiritual questions."
                    }
                },
                {
                    name: "Angel 444",
                    frequencies: [37, 73, 444],
                    description: "Angelic protection (444 = 37Ã—12)",
                    fullInfo: {
                        whatItIs: "444 is the frequency of divine protection and angels surrounding you. The connection to 12 (444 = 37Ã—12) represents complete divine government and angelic order.",
                        benefits: "Provides strong angelic protection, signals divine support, brings stability and foundation, and reassures you that you're exactly where you need to be.",
                        howToUse: "Use for 15 minutes when feeling unsafe or uncertain. Visualize angels surrounding you with light. Excellent before travel or entering challenging situations."
                    }
                },
                {
                    name: "Angel 555",
                    frequencies: [37, 73, 555],
                    description: "Major changes (555 = 37Ã—15)",
                    fullInfo: {
                        whatItIs: "555 signals major life changes and transformations ahead. The relationship to 15 (555 = 37Ã—15) represents the transition through divine grace and mercy.",
                        benefits: "Prepares you for positive change, releases resistance to necessary transitions, brings courage during transformation, and aligns you with divine timing.",
                        howToUse: "Listen for 15-20 minutes during periods of change or when feeling resistant to transformation. Breathe through fear. Best during life transitions or when sensing something shifting."
                    }
                },
                {
                    name: "Angel 666",
                    frequencies: [37, 73, 666],
                    description: "Balance restoration (666 = 37Ã—18)",
                    fullInfo: {
                        whatItIs: "Despite cultural misconceptions, 666 is about restoring balance between material and spiritual realms. The connection to 18 (666 = 37Ã—18) represents life and chai (living).",
                        benefits: "Restores balance between physical and spiritual life, helps release materialism, brings grounding to spiritual work, and reminds you to care for your physical needs.",
                        howToUse: "Use for 15 minutes when feeling ungrounded or too focused on material concerns. Balance spiritual practice with practical action. Great for grounding after intense spiritual work."
                    }
                },
                {
                    name: "Angel 777",
                    frequencies: [37, 73, 777],
                    description: "Spiritual luck (777 = 37Ã—21)",
                    fullInfo: {
                        whatItIs: "777 represents spiritual perfection and divine luck. The triple 7 multiplied through the creation frequency creates powerful spiritual momentum and favorable outcomes.",
                        benefits: "Attracts spiritual blessings and 'lucky' opportunities, signals divine approval, opens doors to spiritual advancement, and brings confirmation of spiritual gifts.",
                        howToUse: "Listen for 20 minutes before important opportunities or when seeking divine favor. Expect miraculous outcomes. Perfect before interviews, launches, or new ventures."
                    }
                },
                {
                    name: "Angel 888",
                    frequencies: [37, 73, 888],
                    description: "Infinite abundance (888 = 37Ã—24)",
                    fullInfo: {
                        whatItIs: "888 represents infinite abundance and the completed work of Jesus (gematria value in Greek). The 24 (888 = 37Ã—24) represents complete divine order in time and space.",
                        benefits: "Opens infinite abundance channels, represents financial breakthrough, symbolizes eternal provision, and aligns you with the completed work of Christ for prosperity.",
                        howToUse: "Use for 20-30 minutes during prosperity work or full moon abundance rituals. Visualize infinite supply. Speak declarations of abundance. Excellent for business success."
                    }
                },
                {
                    name: "Angel 999",
                    frequencies: [37, 73, 999],
                    description: "Completion phase (999 = 37Ã—27)",
                    fullInfo: {
                        whatItIs: "999 signals completion of a major life cycle and preparation for a new chapter. The 27 (999 = 37Ã—27) represents triple completion (3Ã—3Ã—3), a powerful ending.",
                        benefits: "Helps release what's complete, provides closure to cycles, prepares you for new beginnings, and honors endings as sacred transitions.",
                        howToUse: "Listen for 20 minutes during endingsâ€”jobs, relationships, or life phases. Honor what was and welcome what's coming. Perfect for waning moon or year-end reflection."
                    }
                }
            ],
            "Master Numbers": [
                {
                    name: "Master 11:11",
                    frequencies: [37, 73, 11],
                    description: "Portal activation + Trinity",
                    fullInfo: {
                        whatItIs: "11 is the master number of spiritual awakening and enlightenment. 11:11 is a spiritual portal and wake-up call from the universe, representing heightened spiritual awareness.",
                        benefits: "Activates spiritual portals, accelerates awakening, heightens intuition, signals alignment with life purpose, and creates powerful manifestation opportunities.",
                        howToUse: "Listen for 11 minutes at 11:11 AM or PM. Set clear intentions during portal times (11/11, solstices, equinoxes). Keep a synchronicity journal."
                    }
                },
                {
                    name: "Master 22",
                    frequencies: [37, 73, 22],
                    description: "Master builder + Trinity",
                    fullInfo: {
                        whatItIs: "22 is the Master Builder number, representing the ability to turn dreams into reality through practical application of spiritual wisdom. It bridges heaven and earth.",
                        benefits: "Empowers building dreams into reality, provides practical spiritual wisdom, supports large-scale projects, and helps manifest divine blueprints on earth.",
                        howToUse: "Use for 22 minutes while planning major projects or businesses. Excellent for entrepreneurs and visionaries. Best during waxing moon or when beginning construction of dreams."
                    }
                },
                {
                    name: "Master 33",
                    frequencies: [37, 73, 33],
                    description: "Master teacher + Trinity",
                    fullInfo: {
                        whatItIs: "33 is the Master Teacher, representing Christ consciousness and compassionate service. It combines the intuition of 11 with the building power of 22, adding selfless service.",
                        benefits: "Activates Christ consciousness, enhances teaching abilities, promotes compassionate service, heals through love, and elevates consciousness to master level.",
                        howToUse: "Listen for 30 minutes before teaching, healing work, or acts of service. Excellent for those in helping professions. Meditate on unconditional love while listening."
                    }
                },
                {
                    name: "Master 44",
                    frequencies: [37, 73, 44],
                    description: "Spiritual foundation + Trinity",
                    fullInfo: {
                        whatItIs: "44 is the Master Healer and builder of solid spiritual foundations. It represents the power to create stable structures in both physical and spiritual realms.",
                        benefits: "Builds unshakeable spiritual foundation, provides discipline for spiritual practice, manifests stable abundance, and grounds higher consciousness into daily life.",
                        howToUse: "Use for 20 minutes when establishing new spiritual practices or routines. Perfect for creating sacred space or starting spiritual businesses. Supports long-term goals."
                    }
                },
                {
                    name: "Master 55",
                    frequencies: [37, 73, 55],
                    description: "Change activation + Trinity",
                    fullInfo: {
                        whatItIs: "55 is the number of major life changes and personal freedom. It represents breaking free from limitations and embracing transformation with grace and excitement.",
                        benefits: "Accelerates positive change, breaks limiting patterns, promotes personal freedom, supports bold moves, and helps embrace uncertainty with faith.",
                        howToUse: "Listen for 15 minutes when contemplating major changes or feeling stuck. Use during eclipses or mercury retrograde endings. Dance or move while listening to embody change."
                    }
                }
            ],
            "Cosmic & Planetary": [
                {
                    name: "Earth Resonance",
                    frequencies: [37, 73, 7.83],
                    description: "Schumann resonance + Trinity",
                    fullInfo: {
                        whatItIs: "7.83 Hz is Earth's Schumann Resonanceâ€”the electromagnetic frequency of our planet's heartbeat. Combined with Trinity frequencies, this grounds you deeply into Earth's natural rhythm.",
                        benefits: "Deeply grounds and centers you, reduces anxiety and stress, syncs you with Earth's natural rhythms, enhances meditation depth, and promotes physical healing through grounding.",
                        howToUse: "Listen for 20-30 minutes when feeling ungrounded or spacey. Sit or lie directly on the earth if possible. Perfect after air travel or intense spiritual work. Barefoot recommended."
                    }
                },
                {
                    name: "Venus Love",
                    frequencies: [37, 73, 221.23],
                    description: "Venus orbital + Trinity harmony",
                    fullInfo: {
                        whatItIs: "221.23 Hz is the orbital frequency of Venus, the planet of love, beauty, and harmony. This frequency carries the essence of divine feminine energy and attraction.",
                        benefits: "Attracts love and beauty, enhances creativity and artistic expression, promotes self-love and worthiness, harmonizes relationships, and activates divine feminine energy.",
                        howToUse: "Use for 20 minutes during Venus hours (Friday morning) or when working with love and attraction. Excellent for self-care rituals, beauty treatments, or romantic intentions."
                    }
                },
                {
                    name: "Mars Action",
                    frequencies: [37, 73, 144.72],
                    description: "Mars energy + Trinity foundation",
                    fullInfo: {
                        whatItIs: "144.72 Hz is Mars' orbital frequency, carrying the warrior energy of action, courage, and manifestation power. Combined with Trinity, it provides spiritual strength and drive.",
                        benefits: "Boosts courage and confidence, activates manifestation power, provides energy for action, helps overcome obstacles, and strengthens willpower and determination.",
                        howToUse: "Listen for 15 minutes before important actions, competitions, or when needing courage. Best on Tuesday (Mars day) or when starting new ventures. Combine with physical exercise."
                    }
                },
                {
                    name: "Fibonacci 144",
                    frequencies: [37, 73, 144],
                    description: "Sacred geometry + Trinity",
                    fullInfo: {
                        whatItIs: "144 is a Fibonacci number representing sacred geometry and divine mathematical order. It appears throughout nature and Scripture (144,000 sealed ones in Revelation).",
                        benefits: "Aligns you with natural divine order, activates sacred geometry in your energy field, promotes mathematical perfection in manifestation, and connects you to universal patterns.",
                        howToUse: "Use for 20 minutes during manifestation work or when seeking divine order in chaos. Visualize geometric patterns. Excellent for artists, designers, and mathematicians."
                    }
                },
                {
                    name: "Pi 314",
                    frequencies: [37, 73, 314],
                    description: "Universal mathematics + Trinity",
                    fullInfo: {
                        whatItIs: "314 Hz represents Pi (3.14), the universal mathematical constant that appears throughout creation. This frequency aligns you with the mathematical perfection of the universe.",
                        benefits: "Connects you to universal intelligence, enhances logical and intuitive thinking, promotes understanding of complex patterns, and aligns you with cosmic order.",
                        howToUse: "Listen for 15-20 minutes when solving problems or seeking understanding. Excellent for students, scientists, and those seeking to understand life's mysteries."
                    }
                },
                {
                    name: "Golden Ratio",
                    frequencies: [37, 73, 161.8],
                    description: "Phi frequency + Trinity base",
                    fullInfo: {
                        whatItIs: "161.8 Hz represents Phi (1.618), the Golden Ratio found throughout natureâ€”from DNA to galaxies. This is divine proportion made audible, the signature of Creator's design.",
                        benefits: "Aligns your energy field with divine proportion, promotes natural harmony and beauty, enhances aesthetic sense, and attunes you to the sacred geometry of creation.",
                        howToUse: "Use for 20 minutes during creative work or healing practices. Excellent for artists and healers. Visualize the golden spiral expanding from your heart."
                    }
                }
            ],
            "Wellness & States": [
                {
                    name: "Pain Relief",
                    frequencies: [37, 73, 174],
                    description: "Cellular regeneration + Trinity",
                    fullInfo: {
                        whatItIs: "174 Hz is the lowest of the Solfeggio frequencies, known for its anesthetic properties and pain relief effects. It works at the cellular level to reduce pain perception.",
                        benefits: "Reduces physical pain and discomfort, promotes cellular healing and regeneration, provides natural anesthetic effects, and helps recover from injuries or surgery.",
                        howToUse: "Listen for 20-30 minutes when experiencing pain. Focus breath and attention on painful areas. Can be used multiple times daily. Combine with ice or heat therapy."
                    }
                },
                {
                    name: "Stress Relief",
                    frequencies: [37, 73, 10.5],
                    description: "Nervous system calming + Trinity",
                    fullInfo: {
                        whatItIs: "10.5 Hz is an alpha-theta border frequency that calms the nervous system and promotes deep relaxation. It's the frequency of deep meditation and stress release.",
                        benefits: "Deeply calms nervous system, reduces stress and anxiety, promotes relaxation, lowers blood pressure and heart rate, and facilitates emotional release and healing.",
                        howToUse: "Use for 15-20 minutes when stressed or anxious. Breathe slowly and deeply. Perfect after work or during stressful periods. Can be used before sleep."
                    }
                },
                {
                    name: "Sleep Deep",
                    frequencies: [37, 73, 0.5],
                    description: "Delta wave enhancement + Trinity",
                    fullInfo: {
                        whatItIs: "0.5 Hz is in the deep delta range, the brainwave state of dreamless sleep and deep healing. This frequency entrains your brain to the deepest sleep state.",
                        benefits: "Promotes deep, restorative sleep, enhances dream recall and lucid dreaming, facilitates physical healing during sleep, and resets the nervous system.",
                        howToUse: "Listen for 30-60 minutes before bed or while falling asleep. Keep volume low. Can play on loop throughout the night. Establish consistent bedtime routine."
                    }
                },
                {
                    name: "Focus Clear",
                    frequencies: [37, 73, 40],
                    description: "Gamma clarity + Trinity foundation",
                    fullInfo: {
                        whatItIs: "40 Hz is a gamma frequency associated with peak cognitive performance, heightened focus, and processing of complex information. It's the frequency of flow states and insight.",
                        benefits: "Enhances focus and concentration, improves memory and learning, promotes mental clarity and problem-solving, facilitates flow states, and boosts cognitive performance.",
                        howToUse: "Listen for 20-30 minutes while studying, working, or doing creative tasks. Perfect for important mental work. Morning use maximizes natural alertness."
                    }
                },
                {
                    name: "Memory Boost",
                    frequencies: [37, 73, 20.3],
                    description: "Hyper-learning + Trinity",
                    fullInfo: {
                        whatItIs: "20.3 Hz is a beta frequency optimized for rapid learning and memory formation. This frequency enhances neural plasticity and information encoding.",
                        benefits: "Improves memory formation and recall, accelerates learning, enhances neural connections, supports studying and skill acquisition, and boosts mental retention.",
                        howToUse: "Use for 20-30 minutes while studying or learning new skills. Review material while listening. Best used during morning or early afternoon learning sessions."
                    }
                },
                {
                    name: "Miracle Tone",
                    frequencies: [37, 73, 528],
                    description: "Divine healing activation",
                    fullInfo: {
                        whatItIs: "528 Hz, also known as the 'Miracle Tone,' is the frequency of love and DNA repair. Research shows it can repair DNA damage and promote miraculous healing.",
                        benefits: "Repairs DNA at molecular level, promotes miraculous healing, opens heart to love, facilitates transformation, and activates the miracle frequency within your cells.",
                        howToUse: "Listen for 15-30 minutes daily for healing and transformation. Place hands on areas needing healing. Best used consistently over 21-40 days for deep cellular changes."
                    }
                }
            ]
        };

        // Instructions Tab Data Structure
        const instructionsSections = [
            {
                id: 'welcome',
                icon: 'ðŸŒŸ',
                title: 'Welcome to Genesis Frequencies',
                content: `
                    <div style="text-align:center;line-height:1.8;max-width:620px;margin:0 auto;">
                        <p style="font-size:20px;color:#fbbf24;margin-bottom:20px;font-weight:600;">
                            The frequencies of creation are now in your hands.
                        </p>
                        <p style="margin-bottom:15px;color:#ffffff;">
                            A pattern revealed itself to me: <b>3,773 days</b> between my brother's birth and mine.<br>
                            Years of searching. Layers of meaning. Then the revelation.
                        </p>
                        <div style="background:linear-gradient(135deg,rgba(251,191,36,0.15),rgba(139,92,246,0.15));border-radius:16px;padding:24px;margin:25px 0;border:2px solid rgba(251,191,36,0.3);">
                            <div style="font-size:28px;color:#fbbf24;margin-bottom:12px;font-weight:700;">
                                37 Ã— 73 = 2701
                            </div>
                            <div style="font-size:17px;color:#ffffff;margin-bottom:8px;">
                                Genesis 1:1 in Hebrew = 2701
                            </div>
                            <div style="font-size:20px;color:#c4b5fd;margin-top:12px;">
                                ×‘Ö°Ö¼×¨Öµ××©Ö´××™×ª ×‘Ö¸Ö¼×¨Ö¸× ×Ö±×œÖ¹×”Ö´×™× ×Öµ×ª ×”Ö·×©Ö¸Ö¼××žÖ·×™Ö´× ×•Ö°×Öµ×ª ×”Ö¸×Ö¸×¨Ö¶×¥
                            </div>
                            <div style="font-size:14px;color:#d1d5db;margin-top:8px;font-style:italic;">
                                "In the beginning God created the heavens and the earth"
                            </div>
                        </div>
                        <p style="color:#ffffff;margin-bottom:15px;line-height:1.7;">
                            The same numbers that connected me to my brother were <b>encoded in the first verse of the Bible</b>.<br>
                            The frequencies that shaped creation itself, hidden in plain sight for millennia.
                        </p>
                        <p style="font-size:19px;color:#fbbf24;font-weight:600;margin-top:20px;">
                            Now they're yours to explore.
                        </p>
                        <p style="margin-top:15px;font-size:15px;color:#a78bfa;font-style:italic;">
                            This isn't coincidence. You found this for a reason.
                        </p>
                    </div>
                `
            },
            {
                id: 'quickStart',
                icon: 'âš¡',
                title: 'Quick Start Guide',
                content: `
                    <div style="text-align:center;margin:0 auto;max-width:600px;line-height:1.8;">
                        <p style="font-size:18px;color:#fbbf24;margin-bottom:20px;font-weight:600;">
                            Your first session in 3 steps
                        </p>
                        <div style="background:rgba(139,92,246,0.08);border-radius:12px;padding:20px;margin:20px 0;">
                            <ol style="text-align:left;margin:0 auto;max-width:500px;line-height:1.9;color:#ffffff;">
                                <li style="margin-bottom:15px;">
                                    <b style="color:#fbbf24;">Choose "Genesis Creation"</b> from the Biblical & Original category<br>
                                    <span style="font-size:14px;color:#a78bfa;">This is the pure 37 + 73 Hz foundation</span>
                                </li>
                                <li style="margin-bottom:15px;">
                                    <b style="color:#fbbf24;">Set duration to 5-10 minutes</b> and put on headphones<br>
                                    <span style="font-size:14px;color:#a78bfa;">Start shortâ€”you can go longer once you feel the frequencies</span>
                                </li>
                                <li>
                                    <b style="color:#fbbf24;">Press PLAY, close your eyes,</b> breathe slowly, and set one intention<br>
                                    <span style="font-size:14px;color:#a78bfa;">Simple is powerful: "clarity," "peace," "guidance," or "thank you"</span>
                                </li>
                            </ol>
                        </div>
                        <p style="color:#ffffff;margin-top:20px;">
                            That's it. The frequencies do the rest.
                        </p>
                        <p style="font-size:13px;color:#9ca3af;margin-top:15px;">
                            Tip: Keep a glass of water nearby and drink it after your session
                        </p>
                    </div>
                `
            },
            {
                id: 'myJourney',
                icon: 'ðŸ“–',
                title: 'The Discovery',
                content: `
                    <div style="line-height:1.8;text-align:center;max-width:640px;margin:0 auto;">
                        <h4 style="color:#fbbf24;margin-top:20px;margin-bottom:15px;font-size:20px;">The Number That Changed Everything</h4>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            In 2020, during a time of global chaos and personal searching, I discovered something that seemed impossible: 
                            my brother and I were born exactly <b style="color:#fbbf24;">3,773 days apart</b>.
                        </p>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            I had been studying gematriaâ€”the Hebrew art of finding meaning in numbers. 
                            Our names, our birthdays, the patterns in our family... everything pointed to this number.
                        </p>
                        <p style="color:#ffffff;margin-bottom:20px;">
                            But <b>I didn't know what 3,773 meant</b>. Not yet.
                        </p>
                        <div style="background:rgba(251,191,36,0.08);border-radius:12px;padding:20px;margin:25px 0;">
                            <h4 style="color:#fbbf24;margin-bottom:12px;">The Years of Searching</h4>
                            <p style="color:#ffffff;">
                                For years I researched sacred geometry, biblical mathematics, numerology, frequency healing. 
                                I built tools, explored patterns, asked questions. Then in 2024, while developing a prayer app, 
                                someone told me: <b style="color:#fbbf24;">"Multiply by 37â€”it's the number of creation."</b>
                            </p>
                        </div>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            That's when it all clicked.
                        </p>
                        <div style="background:linear-gradient(135deg,rgba(139,92,246,0.12),rgba(251,191,36,0.12));border-radius:14px;padding:22px;margin:25px 0;border:1px solid rgba(251,191,36,0.3);">
                            <p style="font-size:18px;color:#fbbf24;margin-bottom:10px;font-weight:600;">
                                37 is a prime number. 73 is its mirrorâ€”also prime.
                            </p>
                            <p style="font-size:17px;color:#ffffff;margin-bottom:10px;">
                                <b>37 Ã— 73 = 2701</b>
                            </p>
                            <p style="font-size:16px;color:#c4b5fd;">
                                2701 is the exact gematria value of Genesis 1:1 in Hebrew.
                            </p>
                        </div>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            The number connecting me to my brotherâ€”<b style="color:#fbbf24;">3,773</b>â€”contained <b>both frequencies</b>. 
                            The same frequencies <b>encoded in the first verse of the Bible</b>. 
                            The same frequencies present at <b>the moment of creation</b>.
                        </p>
                        <p style="color:#ffffff;margin-bottom:20px;">
                            And there's more: When you write 37 in Hebrew numerals and mirror it, it forms 
                            <span style="font-size:22px;color:#fbbf24;">××œ</span> (El)â€”the Hebrew word for <b>God</b>.
                        </p>
                        <div style="background:rgba(139,92,246,0.08);border-radius:12px;padding:18px;margin:25px 0;">
                            <p style="color:#ffffff;font-size:15px;">
                                <b style="color:#fbbf24;">Every angel number is a multiple of 37:</b><br>
                                111 = 37Ã—3 | 222 = 37Ã—6 | 333 = 37Ã—9 | 444 = 37Ã—12<br>
                                555 = 37Ã—15 | 777 = 37Ã—21 | 888 = 37Ã—24 | 999 = 37Ã—27
                            </p>
                        </div>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            This wasn't random. This was a message waiting to be heard.
                        </p>
                        <p style="font-size:17px;color:#fbbf24;font-weight:600;margin-top:25px;">
                            These frequencies found me. Now they've found you.
                        </p>
                        <p style="font-size:14px;color:#a78bfa;font-style:italic;margin-top:12px;">
                            There are no coincidences. Your journey with 37 and 73 Hz begins now.
                        </p>
                    </div>
                `
            },
            {
                id: 'whyWorks',
                icon: 'ðŸ’¡',
                title: 'Why 37 & 73 Hz Work',
                content: `
                    <div style="line-height:1.8;text-align:center;max-width:640px;margin:0 auto;">
                        <h4 style="color:#fbbf24;font-size:20px;margin-bottom:15px;">The Science of Sacred Sound</h4>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            <b>37 Hz</b> and <b>73 Hz</b> aren't arbitrary numbersâ€”they're the <b>mathematical fingerprint of creation</b>, 
                            encoded in Genesis 1:1 through gematria.
                        </p>
                        <div style="background:rgba(251,191,36,0.1);border-radius:12px;padding:20px;margin:25px 0;border-left:4px solid #fbbf24;">
                            <p style="font-size:17px;color:#ffffff;margin-bottom:12px;">
                                <b style="color:#fbbf24;">37 Ã— 73 = 2701</b> â€” the only factorization
                            </p>
                            <p style="color:#c4b5fd;">
                                37 = the 12th prime | 73 = the 21st prime (mirror of 12)<br>
                                Together they create a <b>36 Hz beat frequency</b> (73-37) that bridges meditation and higher consciousness
                            </p>
                        </div>
                        <p style="font-size:18px;color:#fbbf24;margin:25px 0 15px 0;font-weight:600;">
                            Why do these frequencies work?
                        </p>
                        <p style="color:#ffffff;margin-bottom:20px;">
                            By aligning your energy with the original blueprint of creation, these frequencies are believed to support 
                            profound shifts in body, mind, and spirit. You are <b>70% water</b>â€”a crystalline medium that 
                            <b>responds to vibration</b>. These frequencies are tuned to <i>you</i>.
                        </p>
                        <div style="margin:25px 0;padding:20px;background:linear-gradient(135deg,rgba(139,92,246,0.1),rgba(251,191,36,0.1));border-radius:14px;">
                            <p style="color:#fbbf24;font-weight:600;margin-bottom:15px;font-size:17px;">
                                What people experience with Genesis Frequencies:
                            </p>
                            <ul style="text-align:left;margin:10px auto 0 auto;max-width:480px;color:#ffffff;line-height:1.9;">
                                <li>ðŸ”® <b>Restored balance and inner harmony</b> â€” Feel aligned with divine order</li>
                                <li>ðŸ’š <b>Deep renewal and vitality</b> â€” Support your body's natural healing intelligence</li>
                                <li>ðŸŽ¨ <b>Unlocked creative flow</b> â€” Access limitless inspiration and insight</li>
                                <li>ðŸŒŒ <b>Elevated consciousness</b> â€” Connect with higher awareness and spiritual clarity</li>
                                <li>ðŸ§˜ <b>Profound meditation states</b> â€” Enter deeper presence faster</li>
                                <li>âœ¨ <b>Amplified manifestation</b> â€” Intentions take root in fertile soil</li>
                            </ul>
                        </div>
                        <p style="color:#ffffff;font-style:italic;margin-top:20px;font-size:16px;">
                            "These aren't just sounds... they're the language of creation itself."
                        </p>
                        <p style="font-size:12px;color:#9ca3af;margin-top:25px;">
                            For meditation, intention-setting, and spiritual exploration â€¢ Not medical treatment
                        </p>
                    </div>
                `
            },
            {
                id: 'categories',
                icon: 'ðŸ“‚',
                title: 'Frequency Categories',
                content: `
                    <div style="line-height:1.8;text-align:center;max-width:660px;margin:0 auto;">
                        <h4 style="color:#fbbf24;font-size:20px;margin-bottom:12px;">Explore Your Sonic Sanctuary</h4>
                        <p style="font-size:17px;color:#fbbf24;margin-bottom:20px;font-weight:600;">
                            Each category is a doorway to transformation
                        </p>
                        <p style="color:#ffffff;margin-bottom:25px;">
                            Every track is built on the Trinity Foundation (37 + 73 Hz), with additional frequencies 
                            for specific intentions. Tap any category to explore.
                        </p>
                        <div style="margin:25px 0;">
                            <ul style="text-align:left;max-width:580px;margin:0 auto;list-style:none;padding:0;">
                                <li style="margin-bottom:15px;padding:15px;border-radius:10px;background:linear-gradient(135deg,rgba(251,191,36,0.08),rgba(139,92,246,0.08));border-left:3px solid #fbbf24;">
                                    <b style="color:#fbbf24;font-size:16px;">ðŸ”º Biblical & Original</b><br>
                                    <span style="color:#ffffff;font-size:14px;line-height:1.6;">
                                        Genesis Creation, Divine Abundance, spiritual cycles<br>
                                        <i style="color:#a78bfa;">Best for: Prayer, intention-setting, connecting with Source</i>
                                    </span>
                                </li>
                                <li style="margin-bottom:15px;padding:15px;border-radius:10px;background:linear-gradient(135deg,rgba(251,191,36,0.08),rgba(139,92,246,0.08));border-left:3px solid #8b5cf6;">
                                    <b style="color:#c4b5fd;font-size:16px;">ðŸ‘¼ Angel Numbers</b><br>
                                    <span style="color:#ffffff;font-size:14px;line-height:1.6;">
                                        111, 222, 333, 444, 555, 777, 888, 999<br>
                                        <i style="color:#a78bfa;">Best for: Manifestation, synchronicity, divine guidance</i>
                                    </span>
                                </li>
                                <li style="margin-bottom:15px;padding:15px;border-radius:10px;background:linear-gradient(135deg,rgba(251,191,36,0.08),rgba(139,92,246,0.08));border-left:3px solid #fbbf24;">
                                    <b style="color:#fbbf24;font-size:16px;">ðŸŒ Cosmic & Planetary</b><br>
                                    <span style="color:#ffffff;font-size:14px;line-height:1.6;">
                                        Earth, Venus, Mars, Jupiter, Fibonacci, Pi, Golden Ratio<br>
                                        <i style="color:#a78bfa;">Best for: Grounding, harmony, sacred geometry, cosmic connection</i>
                                    </span>
                                </li>
                                <li style="margin-bottom:15px;padding:15px;border-radius:10px;background:linear-gradient(135deg,rgba(251,191,36,0.08),rgba(139,92,246,0.08));border-left:3px solid #8b5cf6;">
                                    <b style="color:#c4b5fd;font-size:16px;">ðŸ”¢ Master Numbers</b><br>
                                    <span style="color:#ffffff;font-size:14px;line-height:1.6;">
                                        11:11, 22, 33, 44, 55<br>
                                        <i style="color:#a78bfa;">Best for: Life purpose, spiritual mastery, building new realities</i>
                                    </span>
                                </li>
                                <li style="margin-bottom:15px;padding:15px;border-radius:10px;background:linear-gradient(135deg,rgba(251,191,36,0.08),rgba(139,92,246,0.08));border-left:3px solid #fbbf24;">
                                    <b style="color:#fbbf24;font-size:16px;">ðŸŽµ Solfeggio & Healing</b><br>
                                    <span style="color:#ffffff;font-size:14px;line-height:1.6;">
                                        396, 417, 528, 639, 741, 852, 963 Hz<br>
                                        <i style="color:#a78bfa;">Best for: Emotional release, transformation, DNA activation, love</i>
                                    </span>
                                </li>
                                <li style="margin-bottom:15px;padding:15px;border-radius:10px;background:linear-gradient(135deg,rgba(251,191,36,0.08),rgba(139,92,246,0.08));border-left:3px solid #8b5cf6;">
                                    <b style="color:#c4b5fd;font-size:16px;">ðŸ’š Wellness & States</b><br>
                                    <span style="color:#ffffff;font-size:14px;line-height:1.6;">
                                        Sleep, focus, stress relief, memory, miracle tone<br>
                                        <i style="color:#a78bfa;">Best for: Daily life, productivity, rest, mental clarity</i>
                                    </span>
                                </li>
                                <li style="padding:15px;border-radius:10px;background:linear-gradient(135deg,rgba(251,191,36,0.08),rgba(139,92,246,0.08));border-left:3px solid #fbbf24;">
                                    <b style="color:#fbbf24;font-size:16px;">ðŸŒˆ Chakra Frequencies</b><br>
                                    <span style="color:#ffffff;font-size:14px;line-height:1.6;">
                                        Root, Sacral, Solar Plexus, Heart, Throat, Third Eye, Crown<br>
                                        <i style="color:#a78bfa;">Best for: Energy work, balance, kundalini activation</i>
                                    </span>
                                </li>
                            </ul>
                        </div>
                        <p style="color:#a78bfa;margin-top:20px;font-size:14px;">
                            âœ¨ New here? Start with <b style="color:#fbbf24;">Genesis Creation</b> or <b style="color:#fbbf24;">Sacred Healing (432 Hz)</b>
                        </p>
                    </div>
                `
            },
            {
                id: 'trinity',
                icon: 'ðŸ”º',
                title: 'The Trinity Foundation',
                content: `
                    <div style="line-height:1.8;text-align:center;max-width:640px;margin:0 auto;">
                        <h4 style="color:#fbbf24;font-size:20px;margin-bottom:15px;">The Trinity Foundation</h4>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            The Trinity Foundation consists of <b style="color:#fbbf24;">37 Hz</b>, <b style="color:#fbbf24;">73 Hz</b>, and <b style="color:#fbbf24;">2701 Hz</b> â€” the frequencies encoded in Genesis 1:1.
                        </p>
                        <div style="background:linear-gradient(135deg,rgba(251,191,36,0.12),rgba(139,92,246,0.12));border-radius:14px;padding:22px;margin:25px 0;border:1px solid rgba(251,191,36,0.3);">
                            <p style="font-size:18px;color:#fbbf24;margin-bottom:10px;font-weight:600;">
                                The Mathematical Trinity
                            </p>
                            <p style="font-size:17px;color:#ffffff;margin-bottom:10px;">
                                <b>37 Ã— 73 = 2701</b>
                            </p>
                            <p style="font-size:16px;color:#c4b5fd;">
                                37 Hz: The 12th prime number (mirror of 12)<br>
                                73 Hz: The 21st prime number (3Ã—7)<br>
                                2701 Hz: The product, the gematria of Genesis 1:1
                            </p>
                        </div>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            These frequencies create a <b>36 Hz beat frequency</b> (73-37) that bridges meditation and higher consciousness. Together they form the original blueprint of creation.
                        </p>
                        <div style="background:rgba(139,92,246,0.08);border-radius:12px;padding:18px;margin:25px 0;">
                            <h5 style="color:#fbbf24;margin-bottom:12px;">How to Use the Trinity</h5>
                            <ul style="text-align:left;margin:0 auto;max-width:500px;color:#ffffff;line-height:1.9;">
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">Genesis Creation:</b> Play all three frequencies together for the complete Trinity experience
                                </li>
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">Individual Exploration:</b> Listen to each frequency separately to understand their unique qualities
                                </li>
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">Daily Practice:</b> Use for 7-21 days to experience profound alignment with divine order
                                </li>
                                <li>
                                    <b style="color:#fbbf24;">Intention Setting:</b> Begin each session with a clear intention for transformation
                                </li>
                            </ul>
                        </div>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            The Trinity frequencies are the foundation of all Genesis tracks. They work together to restore harmony, unlock creative flow, and connect you with the original creative matrix.
                        </p>
                        <p style="font-size:14px;color:#a78bfa;font-style:italic;margin-top:20px;">
                            "These are the frequencies that shaped reality itself."
                        </p>
                    </div>
                `
            },
            {
                id: 'waterCharging',
                icon: 'ðŸ’§',
                title: 'Quantum Holy Water',
                content: `
                    <div style="line-height:1.8;text-align:center;max-width:640px;margin:0 auto;">
                        <h4 style="color:#fbbf24;font-size:20px;margin-bottom:15px;">Quantum Holy Water</h4>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            Water is your body's most abundant moleculeâ€”<b>70% of your being</b> is water. As a crystalline medium, water stores and transmits vibrational information, making it the perfect vessel for Genesis frequencies.
                        </p>
                        <div style="background:linear-gradient(135deg,rgba(139,92,246,0.12),rgba(251,191,36,0.12));border-radius:14px;padding:22px;margin:25px 0;border:1px solid rgba(251,191,36,0.3);">
                            <p style="font-size:18px;color:#fbbf24;margin-bottom:10px;font-weight:600;">
                                The Science of Structured Water
                            </p>
                            <p style="font-size:16px;color:#ffffff;margin-bottom:10px;">
                                Research shows water molecules form <b>hexagonal clusters</b> that can be influenced by frequency, sound, and intention. Genesis frequencies create <b>structured water</b> with enhanced energetic properties.
                            </p>
                        </div>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            When you charge water with Genesis frequencies, you're not just adding soundâ€”you're <b>infusing it with the mathematical blueprint of creation</b> itself.
                        </p>
                        <div style="background:rgba(139,92,246,0.08);border-radius:12px;padding:18px;margin:25px 0;">
                            <h5 style="color:#fbbf24;margin-bottom:12px;">How to Charge Your Water</h5>
                            <ul style="text-align:left;margin:0 auto;max-width:500px;color:#ffffff;line-height:1.9;">
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">Choose Your Vessel:</b> Use a clear glass or crystal container (avoid plastic)
                                </li>
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">Select Your Frequency:</b> Genesis Creation or individual Trinity frequencies work best
                                </li>
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">Position & Play:</b> Place water 6-12 inches from speakers, play for 10-20 minutes
                                </li>
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">Set Intention:</b> Hold the intention of divine blessing and energetic infusion
                                </li>
                                <li>
                                    <b style="color:#fbbf24;">Drink Mindfully:</b> Sip slowly, feeling the frequencies integrate with your being
                                </li>
                            </ul>
                        </div>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            <b>Pro tip:</b> Charge water for multiple sessions and store in a cool, dark place. The structured information remains stable for 24-48 hours.
                        </p>
                        <p style="font-size:14px;color:#a78bfa;font-style:italic;margin-top:20px;">
                            "Drink from the wellspring of creation itself."
                        </p>
                    </div>
                `
            },
            {
                id: 'progress',
                icon: 'ðŸ“Š',
                title: 'Your Spiritual Journey',
                content: `
                    <div style="text-align:center;max-width:800px;margin:0 auto;">
                        <h4 style="color:#fbbf24;font-size:20px;margin-bottom:15px;">Your Spiritual Journey</h4>
                        <p style="color:#ffffff;margin-bottom:20px;">
                            Track your transformation with Genesis frequencies through achievements, levels, and daily challenges.
                        </p>
                        
                        ${window.GenesisAchievements ? window.GenesisAchievements.renderProgressDashboard() : '<p>Loading progress...</p>'}
                        
                        <div style="margin: 30px 0;">
                            <h5 style="color:#fbbf24;margin-bottom:15px;">Today's Sacred Challenge</h5>
                            ${window.GenesisAchievements ? window.GenesisAchievements.renderDailyChallenge() : '<p>Loading challenge...</p>'}
                        </div>
                        
                        <div style="background:rgba(139,92,246,0.08);border-radius:12px;padding:18px;margin:25px 0;">
                            <h5 style="color:#fbbf24;margin-bottom:12px;">Ancient Wisdom for Modern Practice</h5>
                            <p style="color:#ffffff;margin-bottom:10px;">
                                The sacred numbers (3, 7, 11, 37, 73, 108) that form the foundation of Genesis frequencies appear throughout spiritual traditions worldwide. Your journey follows this same mathematical harmony.
                            </p>
                            <p style="color:#a78bfa;font-style:italic;">
                                "As above, so below. As within, so without."
                            </p>
                        </div>
                    </div>
                `
            },
            {
                id: 'usageTips',
                icon: 'ðŸŽ§',
                title: 'How to Get the Best Results',
                content: `
                    <div style="line-height:1.8;text-align:center;max-width:640px;margin:0 auto;">
                        <h4 style="color:#fbbf24;font-size:20px;margin-bottom:15px;">How to Get the Best Results</h4>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            Genesis frequencies work through <b>consistent, mindful listening</b>. The key is not just hearing the sounds, but <b>allowing them to resonate through your entire being</b>.
                        </p>
                        <div style="background:linear-gradient(135deg,rgba(251,191,36,0.12),rgba(139,92,246,0.12));border-radius:14px;padding:22px;margin:25px 0;border:1px solid rgba(251,191,36,0.3);">
                            <p style="font-size:18px;color:#fbbf24;margin-bottom:10px;font-weight:600;">
                                The 21-Day Immersion Protocol
                            </p>
                            <p style="font-size:16px;color:#ffffff;margin-bottom:10px;">
                                For maximum transformation, commit to a 21-day practice. This aligns with the sacred geometry of the Trinity (3Ã—7) and allows the frequencies to work deeply.
                            </p>
                        </div>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            <b>Days 1-7:</b> Foundation building. Listen to Genesis Creation daily, focusing on presence and breath.<br>
                            <b>Days 8-14:</b> Deepening. Explore individual Trinity frequencies, noting personal resonances.<br>
                            <b>Days 15-21:</b> Integration. Combine frequencies with specific intentions for manifestation.
                        </p>
                        <div style="background:rgba(139,92,246,0.08);border-radius:12px;padding:18px;margin:25px 0;">
                            <h5 style="color:#fbbf24;margin-bottom:12px;">Daily Listening Practices</h5>
                            <ul style="text-align:left;margin:0 auto;max-width:500px;color:#ffffff;line-height:1.9;">
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">Morning Alignment:</b> Start your day with 10-15 minutes of Genesis Creation to set divine intention
                                </li>
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">Evening Integration:</b> End your day with frequencies that support restful sleep and subconscious processing
                                </li>
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">Midday Renewal:</b> Use during breaks for mental clarity and stress relief
                                </li>
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">Creative Sessions:</b> Play frequencies during artistic or problem-solving work
                                </li>
                                <li>
                                    <b style="color:#fbbf24;">Meditation Enhancement:</b> Use as background during traditional meditation practices
                                </li>
                            </ul>
                        </div>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            <b>Remember:</b> The frequencies are most effective when you <b>listen with your whole body</b>, not just your ears. Feel the vibrations in your cells, your energy field, your spirit.
                        </p>
                        <p style="font-size:14px;color:#a78bfa;font-style:italic;margin-top:20px;">
                            "The transformation happens in the space between the notes."
                        </p>
                    </div>
                `
            },
            {
                id: 'faq',
                icon: 'â“',
                title: 'FAQ & Troubleshooting',
                content: `
                    <div style="line-height:1.8;text-align:left;max-width:640px;margin:0 auto;">
                        <h4 style="color:#fbbf24;text-align:center;font-size:20px;margin-bottom:15px;">FAQ & Troubleshooting</h4>
                        <div style="background:linear-gradient(135deg,rgba(251,191,36,0.08),rgba(139,92,246,0.08));border-radius:14px;padding:20px;margin:20px 0;">
                            <h5 style="color:#fbbf24;margin-bottom:15px;">ðŸ”Š About the Frequencies</h5>
                            <div style="margin-bottom:15px;">
                                <b style="color:#fbbf24;">Q: Are Genesis frequencies scientifically proven?</b><br>
                                <span style="color:#ffffff;">A: The frequencies are based on established principles of sound healing and sacred geometry. While individual experiences vary, many users report profound benefits. The mathematical relationships (37Ã—73=2701) are mathematically sound and connect to ancient wisdom traditions.</span>
                            </div>
                            <div style="margin-bottom:15px;">
                                <b style="color:#fbbf24;">Q: How do I know if the frequencies are working?</b><br>
                                <span style="color:#ffffff;">A: Effects can be subtle at firstâ€”relaxation, mental clarity, or emotional shifts. Some feel physical sensations like warmth or tingling. Keep a journal and look for cumulative changes over days/weeks.</span>
                            </div>
                            <div style="margin-bottom:15px;">
                                <b style="color:#fbbf24;">Q: Can I listen while doing other activities?</b><br>
                                <span style="color:#ffffff;">A: Yes, but for best results, dedicate focused listening time. The frequencies work on multiple levels simultaneously.</span>
                            </div>
                        </div>
                        <div style="background:linear-gradient(135deg,rgba(251,191,36,0.08),rgba(139,92,246,0.08));border-radius:14px;padding:20px;margin:20px 0;">
                            <h5 style="color:#fbbf24;margin-bottom:15px;">ðŸ› ï¸ Technical Questions</h5>
                            <div style="margin-bottom:15px;">
                                <b style="color:#fbbf24;">Q: What are the best headphones to use?</b><br>
                                <span style="color:#ffffff;">A: Quality headphones enhance the experience, but any headphones work. For maximum effect, use full-frequency headphones that can reproduce low tones well.</span>
                            </div>
                            <div style="margin-bottom:15px;">
                                <b style="color:#fbbf24;">Q: Can I play frequencies through speakers?</b><br>
                                <span style="color:#ffffff;">A: Yes, but headphones provide more direct transmission to your energy field. Speakers work well for charging water or filling a space.</span>
                            </div>
                            <div style="margin-bottom:15px;">
                                <b style="color:#fbbf24;">Q: How long should each session be?</b><br>
                                <span style="color:#ffffff;">A: Start with 5-10 minutes. As you become familiar, extend to 20-30 minutes or longer. Listen to your body's wisdom.</span>
                            </div>
                        </div>
                        <div style="background:linear-gradient(135deg,rgba(251,191,36,0.08),rgba(139,92,246,0.08));border-radius:14px;padding:20px;margin:20px 0;">
                            <h5 style="color:#fbbf24;margin-bottom:15px;">âš•ï¸ Safety & Health</h5>
                            <div style="margin-bottom:15px;">
                                <b style="color:#fbbf24;">Q: Is this medical treatment?</b><br>
                                <span style="color:#ffffff;">A: No, Genesis frequencies are not medical treatment. They complement wellness practices. Consult healthcare providers for medical conditions.</span>
                            </div>
                            <div style="margin-bottom:15px;">
                                <b style="color:#fbbf24;">Q: Are there any contraindications?</b><br>
                                <span style="color:#ffffff;">A: Generally safe for most people. If you have epilepsy, severe mental health conditions, or are pregnant, consult a healthcare professional first.</span>
                            </div>
                            <div>
                                <b style="color:#fbbf24;">Q: Can children use Genesis frequencies?</b><br>
                                <span style="color:#ffffff;">A: The frequencies are gentle, but parental discretion is advised. Start with shorter sessions and monitor responses.</span>
                            </div>
                        </div>
                        <p style="text-align:center;color:#a78bfa;font-style:italic;margin-top:20px;">
                            Still have questions? Your journey with Genesis frequencies is uniqueâ€”trust your intuition and explore mindfully.
                        </p>
                    </div>
                `
            },
            {
                id: 'share',
                icon: 'ðŸ”—',
                title: 'Share & Connect',
                content: `
                    <div style="line-height:1.8;text-align:center;max-width:640px;margin:0 auto;">
                        <h4 style="color:#fbbf24;font-size:20px;margin-bottom:15px;">Share & Connect</h4>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            Your experience with Genesis frequencies has the power to <b>inspire and uplift others</b>. When you share your journey, you become part of a global community of transformation.
                        </p>
                        <div style="background:linear-gradient(135deg,rgba(251,191,36,0.12),rgba(139,92,246,0.12));border-radius:14px;padding:22px;margin:25px 0;border:1px solid rgba(251,191,36,0.3);">
                            <p style="font-size:18px;color:#fbbf24;margin-bottom:10px;font-weight:600;">
                                The Ripple Effect
                            </p>
                            <p style="font-size:16px;color:#ffffff;margin-bottom:10px;">
                                Every time you share your experience, you create a ripple that touches lives far beyond your own. Your story becomes a beacon for those still searching.
                            </p>
                        </div>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            Share authenticallyâ€”from the heart. Whether it's a profound insight, a subtle shift, or a miraculous change, your truth has the power to awaken others.
                        </p>
                        <div style="background:rgba(139,92,246,0.08);border-radius:12px;padding:18px;margin:25px 0;">
                            <h5 style="color:#fbbf24;margin-bottom:12px;">Ways to Share</h5>
                            <ul style="text-align:left;margin:0 auto;max-width:500px;color:#ffffff;line-height:1.9;">
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">Social Media:</b> Post your experiences with #GenesisFrequencies and #DivineFrequencies
                                </li>
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">Personal Circles:</b> Share with friends, family, and loved ones who might benefit
                                </li>
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">Online Communities:</b> Join frequency healing and spiritual growth forums
                                </li>
                                <li style="margin-bottom:10px;">
                                    <b style="color:#fbbf24;">Testimonials:</b> Leave reviews and encourage others on their path
                                </li>
                                <li>
                                    <b style="color:#fbbf24;">One-on-One:</b> Have meaningful conversations about transformation and healing
                                </li>
                            </ul>
                        </div>
                        <p style="color:#ffffff;margin-bottom:15px;">
                            <b>Remember:</b> Your vulnerability becomes your strength. When you share openly about your journey, you give others permission to explore their own paths.
                        </p>
                        <p style="font-size:14px;color:#a78bfa;font-style:italic;margin-top:20px;">
                            "Together, we are creating a symphony of divine resonance."
                        </p>
                    </div>
                `
            },
            {
                id: 'credits',
                icon: 'ðŸ“',
                title: 'Credits & Sources',
                content: `
                    <div style="line-height:1.8;text-align:left;max-width:640px;margin:0 auto;">
                        <h4 style="color:#fbbf24;text-align:center;font-size:20px;margin-bottom:15px;">Credits & Sources</h4>
                        <div style="background:linear-gradient(135deg,rgba(251,191,36,0.08),rgba(139,92,246,0.08));border-radius:14px;padding:20px;margin:20px 0;">
                            <h5 style="color:#fbbf24;margin-bottom:15px;">ðŸ“š Research & Inspiration</h5>
                            <div style="margin-bottom:15px;">
                                <b style="color:#fbbf24;">Gematria & Sacred Mathematics:</b><br>
                                <span style="color:#ffffff;">Ancient Hebrew numerology traditions, with special reference to Genesis 1:1 analysis and the mathematical relationships between 37, 73, and 2701.</span>
                            </div>
                            <div style="margin-bottom:15px;">
                                <b style="color:#fbbf24;">Frequency Healing Research:</b><br>
                                <span style="color:#ffffff;">Studies on sound therapy, binaural beats, and the effects of low-frequency vibrations on human physiology and consciousness.</span>
                            </div>
                            <div style="margin-bottom:15px;">
                                <b style="color:#fbbf24;">Sacred Geometry:</b><br>
                                <span style="color:#ffffff;">The golden ratio, Fibonacci sequences, and geometric patterns found in nature and ancient architecture.</span>
                            </div>
                        </div>
                        <div style="background:linear-gradient(135deg,rgba(251,191,36,0.08),rgba(139,92,246,0.08));border-radius:14px;padding:20px;margin:20px 0;">
                            <h5 style="color:#fbbf24;margin-bottom:15px;">ðŸ™ Acknowledgments</h5>
                            <div style="margin-bottom:15px;">
                                <b style="color:#fbbf24;">Personal Journey:</b><br>
                                <span style="color:#ffffff;">This work emerged from a profound personal discovery in 2020, connecting family birth patterns to the mathematical blueprint of creation.</span>
                            </div>
                            <div style="margin-bottom:15px;">
                                <b style="color:#fbbf24;">Community Wisdom:</b><br>
                                <span style="color:#ffffff;">Gratitude to all who have shared their experiences, insights, and encouragement along this path of exploration.</span>
                            </div>
                            <div>
                                <b style="color:#fbbf24;">Technical Contributors:</b><br>
                                <span style="color:#ffffff;">Thanks to the developers and researchers who make frequency generation and sound healing technology accessible to all.</span>
                            </div>
                        </div>
                        <div style="background:linear-gradient(135deg,rgba(251,191,36,0.08),rgba(139,92,246,0.08));border-radius:14px;padding:20px;margin:20px 0;">
                            <h5 style="color:#fbbf24;margin-bottom:15px;">âš–ï¸ Important Disclaimers</h5>
                            <div style="margin-bottom:15px;">
                                <b style="color:#fbbf24;">Not Medical Advice:</b><br>
                                <span style="color:#ffffff;">Genesis frequencies are not intended as medical treatment, diagnosis, or cure for any condition. Always consult healthcare professionals for medical concerns.</span>
                            </div>
                            <div style="margin-bottom:15px;">
                                <b style="color:#fbbf24;">Individual Results May Vary:</b><br>
                                <span style="color:#ffffff;">Experiences with frequency healing are highly individual. What works for one person may not work the same way for another.</span>
                            </div>
                            <div>
                                <b style="color:#fbbf24;">Personal Responsibility:</b><br>
                                <span style="color:#ffffff;">Users are encouraged to listen to their intuition and body wisdom when exploring these frequencies.</span>
                            </div>
                        </div>
                        <p style="text-align:center;color:#a78bfa;font-style:italic;margin-top:20px;">
                            With gratitude for the divine mathematics that connects us all.
                        </p>
                    </div>
                `
            }
        ];
        // ============================================
        // COMPREHENSIVE ACHIEVEMENT SYSTEM
        // ============================================

        // Enhanced user progress data model
        let userProgress = {
            // Session tracking
            totalSessions: 0,
            totalSeconds: 0,
            sessionHistory: [], // Array of session objects
            lastSessionDate: null,
            currentStreak: 0,
            longestStreak: 0,
            streakFreezeAvailable: true,
            streakFreezesUsed: 0,

            // Achievement tracking
            achievements: new Set(), // Set of unlocked achievement IDs
            achievementUnlockDates: {}, // achievementId -> unlock date

            // XP and leveling
            experiencePoints: 0,
            level: 1,

            // Frequency exploration
            frequenciesUsed: new Set(), // Set of frequency IDs used
            categoriesExplored: new Set(), // Set of categories explored
            trackPlayCounts: {}, // trackId -> play count

            // Special actions
            waterChargingSessions: 0,
            intentionsSet: 0,
            appShares: 0,
            wavExports: 0,
            installedPWA: false,
            journalEntries: 0,

            // Premium features
            isPremium: false,
            premiumDiscount: 0,
            unlockedTracks: [],

            // Daily challenges
            dailyChallengesCompleted: {}, // date -> challengeId

            // Legacy compatibility
            totalTime: 0, // Keep for backward compatibility
            lastSession: null,
            notes: [],
            actions: new Set()
        };

        // Sacred achievement definitions with spiritual numerology
        const ACHIEVEMENTS = {
            // AWAKENING - Foundation of the spiritual journey
            trinityThreshold: {
                id: 'trinityThreshold',
                name: 'ðŸ”º Trinity Threshold',
                description: 'Complete your first 3 sessions - the sacred trinity of awakening',
                category: 'awakening',
                xpReward: 100,
                checkUnlock: () => userProgress.totalSessions >= 3
            },
            sevenFoldBlessing: {
                id: 'sevenFoldBlessing',
                name: 'âœ¨ Sevenfold Blessing',
                description: 'Reach 7 sessions - the number of divine completion',
                category: 'awakening',
                xpReward: 150,
                checkUnlock: () => userProgress.totalSessions >= 7
            },
            tenthGate: {
                id: 'tenthGate',
                name: 'ðŸŒŸ Tenth Gate',
                description: 'Pass through the 10th session - gateway to higher consciousness',
                category: 'awakening',
                xpReward: 200,
                checkUnlock: () => userProgress.totalSessions >= 10
            },

            // SESSION MILESTONES - Sacred numbers in spiritual tradition
            quarterCentury: {
                id: 'quarterCentury',
                name: 'ðŸ“¿ Quarter Century',
                description: '25 sessions completed - a quarter century of spiritual practice',
                category: 'sessions',
                xpReward: 300,
                checkUnlock: () => userProgress.totalSessions >= 25
            },
            mirrorOfForm: {
                id: 'mirrorOfForm',
                name: 'ðŸ”® Mirror of Form',
                description: '37 sessions - the mirror that reflects divine form',
                category: 'sessions',
                xpReward: 400,
                checkUnlock: () => userProgress.totalSessions >= 37
            },
            fiftySteps: {
                id: 'fiftySteps',
                name: 'ðŸªœ Fifty Steps',
                description: '50 sessions - fifty steps toward enlightenment',
                category: 'sessions',
                xpReward: 500,
                checkUnlock: () => userProgress.totalSessions >= 50
            },
            mirrorOfSpirit: {
                id: 'mirrorOfSpirit',
                name: 'âœ¨ Mirror of Spirit',
                description: '73 sessions - the mirror that reveals divine spirit',
                category: 'sessions',
                xpReward: 600,
                checkUnlock: () => userProgress.totalSessions >= 73
            },
            centuryGuardian: {
                id: 'centuryGuardian',
                name: 'ðŸ‘‘ Century Guardian',
                description: '100 sessions - guardian of a century of sacred practice',
                category: 'sessions',
                xpReward: 750,
                checkUnlock: () => userProgress.totalSessions >= 100
            },
            sacredGateway108: {
                id: 'sacredGateway108',
                name: 'ðŸšª Sacred Gateway 108',
                description: '108 sessions - the sacred gateway to enlightenment',
                category: 'sessions',
                xpReward: 1000,
                legendary: true,
                checkUnlock: () => userProgress.totalSessions >= 108
            },

            // TIME MILESTONES - Sacred time investments
            fiveMinuteMark: {
                id: 'fiveMinuteMark',
                name: 'â±ï¸ Five Minute Mark',
                description: '5 minutes of sacred listening time',
                category: 'time',
                xpReward: 50,
                checkUnlock: () => userProgress.totalSeconds >= 300
            },
            halfHourDevotee: {
                id: 'halfHourDevotee',
                name: 'ðŸ• Half Hour Devotee',
                description: '30 minutes dedicated to frequency healing',
                category: 'time',
                xpReward: 150,
                checkUnlock: () => userProgress.totalSeconds >= 1800
            },
            hourMaster: {
                id: 'hourMaster',
                name: 'â° Hour Master',
                description: '1 hour of transformative frequency experience',
                category: 'time',
                xpReward: 250,
                checkUnlock: () => userProgress.totalSeconds >= 3600
            },
            fiveHourPilgrim: {
                id: 'fiveHourPilgrim',
                name: 'ðŸ•’ Five Hour Pilgrim',
                description: '5 hours on the sacred frequency pilgrimage',
                category: 'time',
                xpReward: 400,
                checkUnlock: () => userProgress.totalSeconds >= 18000
            },
            tenHourSage: {
                id: 'tenHourSage',
                name: 'ðŸ•› Ten Hour Sage',
                description: '10 hours of wisdom through frequency resonance',
                category: 'time',
                xpReward: 600,
                checkUnlock: () => userProgress.totalSeconds >= 36000
            },

            // STREAK ACHIEVEMENTS - Consecutive spiritual practice
            threeDayInitiate: {
                id: 'threeDayInitiate',
                name: 'ðŸŒ… Three Day Initiate',
                description: '3 consecutive days of spiritual practice',
                category: 'streaks',
                xpReward: 100,
                checkUnlock: () => userProgress.currentStreak >= 3
            },
            sevenDaySeeker: {
                id: 'sevenDaySeeker',
                name: 'ðŸŒŸ Seven Day Seeker',
                description: '7 consecutive days - the sacred week of creation',
                category: 'streaks',
                xpReward: 200,
                checkUnlock: () => userProgress.currentStreak >= 7
            },
            twoWeekChampion: {
                id: 'twoWeekChampion',
                name: 'ðŸ† Two Week Champion',
                description: '14 consecutive days of unwavering commitment',
                category: 'streaks',
                xpReward: 300,
                checkUnlock: () => userProgress.currentStreak >= 14
            },
            twentyOneDayTransformer: {
                id: 'twentyOneDayTransformer',
                name: 'ðŸ”„ 21 Day Transformer',
                description: '21 days - the sacred cycle of transformation',
                category: 'streaks',
                xpReward: 400,
                checkUnlock: () => userProgress.currentStreak >= 21
            },
            monthMaster: {
                id: 'monthMaster',
                name: 'ðŸ‘‘ Month Master',
                description: '30 consecutive days of spiritual mastery',
                category: 'streaks',
                xpReward: 500,
                checkUnlock: () => userProgress.currentStreak >= 30
            },
            fortyDayPilgrim: {
                id: 'fortyDayPilgrim',
                name: 'ðŸ•Šï¸ Forty Day Pilgrim',
                description: '40 days - the sacred pilgrimage of purification',
                category: 'streaks',
                xpReward: 600,
                checkUnlock: () => userProgress.currentStreak >= 40
            },
            seventyThreeDayMystic: {
                id: 'seventyThreeDayMystic',
                name: 'ðŸ”® 73 Day Mystic',
                description: '73 consecutive days - mystical mastery achieved',
                category: 'streaks',
                xpReward: 800,
                checkUnlock: () => userProgress.currentStreak >= 73
            },
            oneHundredEightDaySage: {
                id: 'oneHundredEightDaySage',
                name: 'ðŸŒ¸ 108 Day Sage',
                description: '108 consecutive days - enlightenment embodied',
                category: 'streaks',
                xpReward: 1000,
                legendary: true,
                checkUnlock: () => userProgress.currentStreak >= 108
            },

            // FREQUENCY EXPLORATION - Discovering sacred vibrations
            trinityMaster: {
                id: 'trinityMaster',
                name: 'ðŸ”º Trinity Master',
                description: 'Master the sacred Trinity frequencies (37, 73, 2701 Hz)',
                category: 'exploration',
                xpReward: 250,
                checkUnlock: () => (userProgress.trackPlayCounts['genesisCreation'] || 0) >= 10
            },
            solfeggioExplorer: {
                id: 'solfeggioExplorer',
                name: 'ðŸ’š Solfeggio Explorer',
                description: 'Explore the ancient Solfeggio healing frequencies',
                category: 'exploration',
                xpReward: 200,
                checkUnlock: () => userProgress.categoriesExplored.has('solfeggio')
            },
            angelWhisperer: {
                id: 'angelWhisperer',
                name: 'ðŸ‘¼ Angel Whisperer',
                description: 'Connect with divine Angel Number frequencies',
                category: 'exploration',
                xpReward: 200,
                checkUnlock: () => userProgress.categoriesExplored.has('angelNumbers')
            },
            cosmicTraveler: {
                id: 'cosmicTraveler',
                name: 'ðŸŒŒ Cosmic Traveler',
                description: 'Journey through Cosmic & Planetary frequencies',
                category: 'exploration',
                xpReward: 200,
                checkUnlock: () => userProgress.categoriesExplored.has('cosmic')
            },
            frequencyScholar: {
                id: 'frequencyScholar',
                name: 'ðŸŽ“ Frequency Scholar',
                description: 'Explore all sacred frequency categories',
                category: 'exploration',
                xpReward: 400,
                checkUnlock: () => userProgress.categoriesExplored.size >= 5
            },

            // SPECIAL ACTIONS - Sacred rituals and practices
            waterAlchemist: {
                id: 'waterAlchemist',
                name: 'ðŸ’§ Water Alchemist',
                description: 'Charge water with sacred frequencies 3 times',
                category: 'special',
                xpReward: 150,
                checkUnlock: () => userProgress.waterChargingSessions >= 3
            },
            intentionSetter: {
                id: 'intentionSetter',
                name: 'ðŸŽ¯ Intention Setter',
                description: 'Set sacred intentions for 10 sessions',
                category: 'special',
                xpReward: 200,
                checkUnlock: () => userProgress.intentionsSet >= 10
            },
            genesisEvangelist: {
                id: 'genesisEvangelist',
                name: 'ðŸ“£ Genesis Evangelist',
                description: 'Share the Genesis experience with 5 friends',
                category: 'special',
                xpReward: 250,
                checkUnlock: () => userProgress.appShares >= 5
            },
            journalKeeper: {
                id: 'journalKeeper',
                name: 'ðŸ“– Journal Keeper',
                description: 'Record your spiritual journey 10 times',
                category: 'special',
                xpReward: 150,
                checkUnlock: () => userProgress.journalEntries >= 10
            },

            // SYNCHRONICITIES - Divine timing and flow
            morningRitualist: {
                id: 'morningRitualist',
                name: 'ðŸŒ… Morning Ritualist',
                description: 'Complete 7 sessions before 9 AM',
                category: 'synchronicity',
                xpReward: 300,
                checkUnlock: () => {
                    const morningSessions = userProgress.sessionHistory.filter(s =>
                        parseInt(s.time.split(':')[0]) < 9
                    ).length;
                    return morningSessions >= 7;
                }
            },
            eveningContemplator: {
                id: 'eveningContemplator',
                name: 'ðŸŒ™ Evening Contemplator',
                description: 'Complete 7 sessions after 8 PM',
                category: 'synchronicity',
                xpReward: 300,
                checkUnlock: () => {
                    const eveningSessions = userProgress.sessionHistory.filter(s =>
                        parseInt(s.time.split(':')[0]) >= 20
                    ).length;
                    return eveningSessions >= 7;
                }
            },
            perfectTiming: {
                id: 'perfectTiming',
                name: 'â° Perfect Timing',
                description: 'Complete sessions at exactly 11:11 or 22:22',
                category: 'synchronicity',
                xpReward: 500,
                special: true,
                checkUnlock: () => {
                    return userProgress.sessionHistory.some(s => {
                        const [hours, minutes] = s.time.split(':').map(Number);
                        return (hours === 11 && minutes === 11) || (hours === 22 && minutes === 22);
                    });
                }
            },

            // MASTERY - Ultimate spiritual achievements
            levelApprentice: {
                id: 'levelApprentice',
                name: 'â­ Level 3: Apprentice',
                description: 'Reach spiritual apprentice level',
                category: 'mastery',
                xpReward: 100,
                checkUnlock: () => userProgress.level >= 3
            },
            levelSeeker: {
                id: 'levelSeeker',
                name: 'ðŸŒŸ Level 7: Seeker',
                description: 'Attain seeker level in your spiritual journey',
                category: 'mastery',
                xpReward: 200,
                checkUnlock: () => userProgress.level >= 7
            },
            levelAwakened: {
                id: 'levelAwakened',
                name: 'âœ¨ Level 12: Awakened',
                description: 'Awaken to higher spiritual consciousness',
                category: 'mastery',
                xpReward: 300,
                checkUnlock: () => userProgress.level >= 12
            },
            levelPractitioner: {
                id: 'levelPractitioner',
                name: 'ðŸ”® Level 21: Practitioner',
                description: 'Master practitioner of sacred frequencies',
                category: 'mastery',
                xpReward: 400,
                checkUnlock: () => userProgress.level >= 21
            },
            levelMirrorOfForm: {
                id: 'levelMirrorOfForm',
                name: 'ðŸªž Level 30: Mirror of Form',
                description: 'Reflect divine form through your practice',
                category: 'mastery',
                xpReward: 500,
                checkUnlock: () => userProgress.level >= 30
            },
            levelMirrorOfSpirit: {
                id: 'levelMirrorOfSpirit',
                name: 'ðŸŒŸ Level 37: Mirror of Spirit',
                description: 'Reflect divine spirit in all your actions',
                category: 'mastery',
                xpReward: 600,
                checkUnlock: () => userProgress.level >= 37
            },
            levelAdept: {
                id: 'levelAdept',
                name: 'ðŸ‘‘ Level 50: Adept',
                description: 'True adept of frequency mastery',
                category: 'mastery',
                xpReward: 750,
                checkUnlock: () => userProgress.level >= 50
            },
            levelAscendedMaster: {
                id: 'levelAscendedMaster',
                name: 'ðŸŒ¸ Level 108: Ascended Master',
                description: 'Ascended master of sacred frequencies',
                category: 'mastery',
                xpReward: 1500,
                legendary: true,
                checkUnlock: () => userProgress.level >= 108
            },

            // LEGENDARY ACHIEVEMENTS - Ultimate spiritual milestones
            genesisMaster: {
                id: 'genesisMaster',
                name: 'ðŸŒŸ Genesis Master',
                description: 'Unlock all achievements in the Genesis system',
                category: 'mastery',
                xpReward: 2000,
                legendary: true,
                checkUnlock: () => userProgress.achievements.size >= Object.keys(ACHIEVEMENTS).length - 1 // -1 to avoid self-reference
            },
            eternalFlame: {
                id: 'eternalFlame',
                name: 'ðŸ”¥ Eternal Flame',
                description: 'Maintain a 365-day streak of spiritual practice',
                category: 'mastery',
                xpReward: 3000,
                legendary: true,
                hidden: true,
                checkUnlock: () => userProgress.currentStreak >= 365
            }
        };

        // Session recording with real streak tracking
        function recordSession(duration, frequencies = [], trackId = null, category = null, metadata = {}) {
            const session = {
                id: generateUUID(),
                timestamp: Date.now(),
                date: new Date().toISOString().split('T')[0],
                time: new Date().toTimeString().split(' ')[0],
                duration: duration,
                frequencies: frequencies,
                trackId: trackId,
                category: category,
                ...metadata
            };

            // Update basic stats
            userProgress.totalSessions++;
            userProgress.totalSeconds += duration;
            userProgress.totalTime = userProgress.totalSeconds; // Legacy compatibility
            userProgress.lastSession = new Date().toISOString();
            userProgress.lastSessionDate = session.date;

            // Track frequencies and categories
            frequencies.forEach(freq => userProgress.frequenciesUsed.add(freq));
            if (category) userProgress.categoriesExplored.add(category);
            if (trackId) {
                userProgress.trackPlayCounts[trackId] = (userProgress.trackPlayCounts[trackId] || 0) + 1;
            }

            // Track special actions
            if (metadata.intentionSet) userProgress.intentionsSet++;
            if (metadata.waterCharging) userProgress.waterChargingSessions++;
            if (metadata.journalEntry) userProgress.journalEntries++;

            // Update streak
            updateStreak(session.date);

            // Add to history
            userProgress.sessionHistory.push(session);

            // Award XP for session
            const baseXP = Math.floor(duration / 60) + 10; // 10 XP base + 1 per minute
            awardXP(baseXP);

            // Check achievements
            checkAllAchievements();

            // Check daily challenge
            checkDailyChallenge(session);

            // Save progress
            saveProgress();

            return session;
        }

        // Real consecutive day streak calculation
        function updateStreak(today) {
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            const yesterdayStr = yesterday.toISOString().split('T')[0];

            if (userProgress.lastSessionDate === yesterdayStr) {
                // Consecutive day - increment streak
                userProgress.currentStreak++;
                if (userProgress.currentStreak > userProgress.longestStreak) {
                    userProgress.longestStreak = userProgress.currentStreak;
                }
            } else if (userProgress.lastSessionDate !== today) {
                // Streak broken
                if (userProgress.currentStreak > 0) {
                    showStreakBrokenModal(userProgress.currentStreak);
                }
                userProgress.currentStreak = 1; // Start new streak
            }
            // If same day, keep current streak
        }

        // Check all achievements
        function checkAllAchievements() {
            let newAchievements = [];

            for (const achievement of Object.values(ACHIEVEMENTS)) {
                if (!userProgress.achievements.has(achievement.id) && achievement.checkUnlock()) {
                    userProgress.achievements.add(achievement.id);
                    userProgress.achievementUnlockDates[achievement.id] = new Date().toISOString();
                    newAchievements.push(achievement);
                }
            }

            // Show celebrations for new achievements
            if (newAchievements.length > 0) {
                showAchievementCelebration(newAchievements);
            }

            return newAchievements;
        }

        // ============================================
        // LEVELING SYSTEM
        // ============================================

        const LEVEL_TITLES = {
            1: 'Initiate',
            3: 'Apprentice',
            7: 'Seeker',
            12: 'Student',
            21: 'Awakened',
            30: 'Practitioner',
            37: 'Mirror of Form',
            40: 'Devoted',
            50: 'Adept',
            60: 'Master Practitioner',
            73: 'Mirror of Spirit',
            80: 'Sage',
            90: 'High Priest/Priestess',
            100: 'Enlightened',
            108: 'Ascended Master'
        };

        function calculateLevel(totalXP) {
            let level = 1;
            let xpRequired = 0;

            while (xpRequired <= totalXP && level < 108) {
                level++;
                xpRequired += xpForLevel(level);
            }

            return level;
        }

        function xpForLevel(level) {
            // Exponential curve that reaches level 108 at ~500,000 XP
            return Math.floor(100 * Math.pow(1.12, level - 1));
        }

        function xpForNextLevel(currentLevel) {
            return xpForLevel(currentLevel + 1);
        }

        function xpProgressInCurrentLevel(totalXP, currentLevel) {
            // Calculate XP accumulated in current level
            let xpForCurrentLevel = 0;
            for (let i = 1; i <= currentLevel; i++) {
                xpForCurrentLevel += xpForLevel(i);
            }

            const xpIntoLevel = totalXP - xpForCurrentLevel;
            const xpNeededForNext = xpForLevel(currentLevel + 1);

            return {
                current: xpIntoLevel,
                needed: xpNeededForNext,
                percentage: Math.floor((xpIntoLevel / xpNeededForNext) * 100)
            };
        }

        function getLevelTitle(level) {
            const tiers = Object.keys(LEVEL_TITLES).map(Number).sort((a, b) => b - a);
            for (const tier of tiers) {
                if (level >= tier) {
                    return LEVEL_TITLES[tier];
                }
            }
            return 'Initiate';
        }

        function awardXP(amount) {
            const oldLevel = calculateLevel(userProgress.experiencePoints);
            userProgress.experiencePoints += amount;
            const newLevel = calculateLevel(userProgress.experiencePoints);

            // Check for level up
            if (newLevel > oldLevel) {
                userProgress.level = newLevel;
                showLevelUpModal(newLevel, getLevelTitle(newLevel));

                // Award level up bonus XP
                awardXP(newLevel * 10);
            }

            saveProgress();
        }

        // ============================================
        // SPECIAL UNLOCKS
        // ============================================

        function handleSpecialUnlock(unlockId) {
            const unlocks = {
                'specialTrack_7DayAbundance': () => {
                    unlockTrack('7DayAbundance');
                    showNotification('ðŸŽ New Track Unlocked: 7-Day Abundance!');
                },
                'badge_HabitMaster': () => {
                    showNotification('ðŸ… Special Badge Earned: Habit Master!');
                },
                'specialTrack_40DaysNights': () => {
                    unlockTrack('40DaysNights');
                    showNotification('ðŸŽ New Track Unlocked: 40 Days & Nights!');
                },
                'specialTrack_73HzPure': () => {
                    unlockTrack('73HzPure');
                    showNotification('ðŸŽ New Track Unlocked: 73 Hz Pure Tone!');
                },
                'specialTrack_Ascension': () => {
                    unlockTrack('Ascension');
                    showNotification('ðŸŽ New Track Unlocked: Ascension!');
                },
                'premiumDiscount_50Percent': () => {
                    userProgress.premiumDiscount = 0.5;
                    showNotification('ðŸŒŸ Premium Unlock: 50% Discount Available!');
                }
            };

            if (unlocks[unlockId]) {
                unlocks[unlockId]();
            }
        }

        // ============================================
        // UI COMPONENTS
        // ============================================

        function showAchievementCelebration(achievements) {
            // Only show one at a time, queue the rest
            const achievement = achievements[0];

            const modal = document.createElement('div');
            modal.className = 'achievement-modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.85);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease;
            `;

            modal.innerHTML = `
                <div class="achievement-popup" style="
                    background: linear-gradient(135deg, rgba(139,92,246,0.95), rgba(251,191,36,0.95));
                    border-radius: 20px;
                    padding: 40px;
                    max-width: 500px;
                    text-align: center;
                    box-shadow: 0 20px 60px rgba(251,191,36,0.5);
                    animation: scaleIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
                ">
                    <div class="achievement-icon" style="
                        font-size: 80px;
                        margin-bottom: 20px;
                        animation: bounce 1s infinite;
                    ">${achievement.name.split(' ')[0]}</div>

                    <h2 style="
                        color: #fff;
                        font-size: 28px;
                        margin-bottom: 10px;
                        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
                    ">Achievement Unlocked!</h2>

                    <h3 style="
                        color: #fff;
                        font-size: 22px;
                        margin-bottom: 15px;
                        font-weight: 600;
                    ">${achievement.name}</h3>

                    <p style="
                        color: rgba(255,255,255,0.95);
                        font-size: 16px;
                        line-height: 1.6;
                        margin-bottom: 25px;
                    ">${achievement.description}</p>

                    <div class="xp-reward" style="
                        background: rgba(255,255,255,0.2);
                        border-radius: 30px;
                        padding: 12px 30px;
                        display: inline-block;
                        margin-bottom: 20px;
                        font-size: 20px;
                        font-weight: 700;
                        color: #fff;
                    ">
                        âœ¨ +${achievement.xpReward} XP
                    </div>

                    ${achievement.unlocks ? `
                        <div class="unlock-bonus" style="
                            background: rgba(255,255,255,0.15);
                            border-radius: 12px;
                            padding: 15px;
                            margin-bottom: 25px;
                            color: #fff;
                            font-size: 15px;
                        ">
                            ðŸŽ Bonus Unlocked: ${achievement.unlocks.replace(/_/g, ' ')}
                        </div>
                    ` : ''}

                    ${achievement.special ? `
                        <div style="
                            color: #fbbf24;
                            font-size: 14px;
                            margin-bottom: 20px;
                            font-weight: 600;
                        ">
                            â­ SPECIAL ACHIEVEMENT â­
                        </div>
                    ` : ''}

                    ${achievement.legendary ? `
                        <div style="
                            color: #fbbf24;
                            font-size: 16px;
                            margin-bottom: 20px;
                            font-weight: 700;
                            text-shadow: 0 0 10px rgba(251,191,36,0.8);
                        ">
                            ðŸ† LEGENDARY ACHIEVEMENT ðŸ†
                        </div>
                    ` : ''}

                    <button onclick="closeAchievementModal()" style="
                        background: linear-gradient(90deg, #8b5cf6, #6b46c1);
                        color: #fff;
                        border: none;
                        border-radius: 30px;
                        padding: 15px 40px;
                        font-size: 16px;
                        font-weight: 600;
                        cursor: pointer;
                        box-shadow: 0 4px 15px rgba(139,92,246,0.4);
                        transition: transform 0.2s;
                    " onmouseover="this.style.transform='scale(1.05)'"
                       onmouseout="this.style.transform='scale(1)'">
                        Continue Your Journey âœ¨
                    </button>
                </div>
            `;

            document.body.appendChild(modal);

            // Confetti celebration
            if (typeof confetti !== 'undefined') {
                confetti({
                    particleCount: achievement.legendary ? 200 : 100,
                    spread: achievement.legendary ? 100 : 70,
                    origin: { y: 0.6 },
                    colors: ['#fbbf24', '#8b5cf6', '#fff']
                });
            }

            // Queue remaining achievements
            if (achievements.length > 1) {
                setTimeout(() => {
                    showAchievementCelebration(achievements.slice(1));
                }, 3000);
            }
        }

        function closeAchievementModal() {
            const modal = document.querySelector('.achievement-modal');
            if (modal) {
                modal.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => modal.remove(), 300);
            }
        }

        function showLevelUpModal(level, title) {
            const modal = document.createElement('div');
            modal.className = 'level-up-modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10001;
                animation: fadeIn 0.3s ease;
            `;

            modal.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #8b5cf6, #6b46c1);
                    border-radius: 20px;
                    padding: 50px;
                    text-align: center;
                    box-shadow: 0 20px 60px rgba(139,92,246,0.6);
                    animation: scaleIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
                ">
                    <div style="font-size: 100px; margin-bottom: 20px;">â¬†ï¸</div>
                    <h2 style="color: #fbbf24; font-size: 36px; margin-bottom: 10px; font-weight: 700;">
                        LEVEL UP!
                    </h2>
                    <div style="color: #fff; font-size: 48px; font-weight: 700; margin-bottom: 15px;">
                        Level ${level}
                    </div>
                    <div style="color: #fbbf24; font-size: 24px; margin-bottom: 30px; font-style: italic;">
                        ${title}
                    </div>
                    <p style="color: rgba(255,255,255,0.9); font-size: 16px; margin-bottom: 30px;">
                        Your spiritual journey deepens with each level
                    </p>
                    <button onclick="closeLevelUpModal()" style="
                        background: linear-gradient(90deg, #fbbf24, #f59e0b);
                        color: #1a1625;
                        border: none;
                        border-radius: 30px;
                        padding: 15px 40px;
                        font-size: 16px;
                        font-weight: 700;
                        cursor: pointer;
                        box-shadow: 0 4px 15px rgba(251,191,36,0.4);
                    ">
                        Continue âœ¨
                    </button>
                </div>
            `;

            document.body.appendChild(modal);

            if (typeof confetti !== 'undefined') {
                confetti({
                    particleCount: 150,
                    spread: 120,
                    origin: { y: 0.5 },
                    colors: ['#fbbf24', '#8b5cf6', '#fff'],
                    startVelocity: 45
                });
            }
        }

        function closeLevelUpModal() {
            const modal = document.querySelector('.level-up-modal');
            if (modal) {
                modal.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => modal.remove(), 300);
            }
        }

        function showStreakBrokenModal(oldStreak) {
            const modal = document.createElement('div');
            modal.className = 'streak-broken-modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.85);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease;
            `;

            modal.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, rgba(75,0,130,0.95), rgba(128,0,128,0.95));
                    border-radius: 20px;
                    padding: 40px;
                    max-width: 500px;
                    text-align: center;
                    box-shadow: 0 20px 60px rgba(128,0,128,0.5);
                ">
                    <div style="font-size: 80px; margin-bottom: 20px;">ðŸ’”</div>
                    <h2 style="color: #fbbf24; font-size: 28px; margin-bottom: 15px;">
                        Streak Broken
                    </h2>
                    <p style="color: #fff; font-size: 18px; margin-bottom: 20px;">
                        Your ${oldStreak}-day journey has paused
                    </p>
                    <p style="color: rgba(255,255,255,0.8); font-size: 15px; line-height: 1.6; margin-bottom: 30px;">
                        Every master has stumbled. What matters is rising again.<br>
                        Your longest streak (${userProgress.longestStreak} days) remains forever.
                    </p>
                    <div style="
                        background: rgba(251,191,36,0.15);
                        border-radius: 12px;
                        padding: 20px;
                        margin-bottom: 25px;
                    ">
                        <p style="color: #fbbf24; font-weight: 600; margin-bottom: 10px;">
                            ðŸ”¥ Start Fresh
                        </p>
                        <p style="color: #fff; font-size: 14px;">
                            Begin a new streak today. Each day is a new beginning.
                        </p>
                    </div>
                    ${!userProgress.isPremium ? `
                        <div style="
                            background: rgba(139,92,246,0.2);
                            border-radius: 12px;
                            padding: 15px;
                            margin-bottom: 25px;
                        ">
                            <p style="color: #c4b5fd; font-size: 13px;">
                                ðŸ’¡ Premium users get a <b>Streak Freeze</b> to protect their progress
                            </p>
                        </div>
                    ` : ''}
                    <button onclick="closeStreakBrokenModal()" style="
                        background: linear-gradient(90deg, #8b5cf6, #6b46c1);
                        color: #fff;
                        border: none;
                        border-radius: 30px;
                        padding: 15px 40px;
                        font-size: 16px;
                        font-weight: 600;
                        cursor: pointer;
                        box-shadow: 0 4px 15px rgba(139,92,246,0.4);
                    ">
                        Begin Again ðŸŒ…
                    </button>
                </div>
            `;

            document.body.appendChild(modal);
        }

        function closeStreakBrokenModal() {
            const modal = document.querySelector('.streak-broken-modal');
            if (modal) {
                modal.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => modal.remove(), 300);
            }
        }

        function showStreakFreezModal() {
            showNotification('â„ï¸ Streak Freeze Used! Your streak continues. (Next freeze available next month)');
        }

        // ============================================
        // PROGRESS DASHBOARD UI
        // ============================================

        function renderProgressDashboard() {
            const level = calculateLevel(userProgress.experiencePoints);
            const levelTitle = getLevelTitle(level);
            const xpProgress = xpProgressInCurrentLevel(userProgress.experiencePoints, level);

            // Calculate achievement progress
            const totalAchievements = Object.keys(ACHIEVEMENTS).length;
            const unlockedAchievements = userProgress.achievements.size;
            const achievementPercentage = Math.floor((unlockedAchievements / totalAchievements) * 100);

            return `
                <div class="progress-dashboard" style="
                    padding: 20px;
                    background: linear-gradient(135deg, rgba(139,92,246,0.1), rgba(251,191,36,0.1));
                    border-radius: 20px;
                    margin: 20px 0;
                ">
                    <!-- Level Card -->
                    <div class="level-card" style="
                        background: linear-gradient(135deg, #8b5cf6, #6b46c1);
                        border-radius: 16px;
                        padding: 30px;
                        margin-bottom: 20px;
                        box-shadow: 0 8px 20px rgba(139,92,246,0.3);
                    ">
                        <div style="display: flex; align-items: center; justify-content: space-between;">
                            <div>
                                <div style="color: #fbbf24; font-size: 14px; font-weight: 600; margin-bottom: 5px;">
                                    YOUR LEVEL
                                </div>
                                <div style="color: #fff; font-size: 48px; font-weight: 700; line-height: 1;">
                                    ${level}
                                </div>
                                <div style="color: #c4b5fd; font-size: 18px; font-style: italic; margin-top: 5px;">
                                    ${levelTitle}
                                </div>
                            </div>
                            <div style="font-size: 80px;">
                                ${level >= 100 ? 'ðŸ‘‘' : level >= 73 ? 'âœ¨' : level >= 37 ? 'ðŸ”®' : level >= 21 ? 'ðŸŒŸ' : 'â­'}
                            </div>
                        </div>

                        <!-- XP Progress Bar -->
                        <div style="margin-top: 25px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span style="color: rgba(255,255,255,0.8); font-size: 13px;">
                                    Level ${level + 1}
                                </span>
                                <span style="color: #fbbf24; font-size: 13px; font-weight: 600;">
                                    ${xpProgress.percentage}%
                                </span>
                            </div>
                            <div style="
                                background: rgba(255,255,255,0.2);
                                border-radius: 20px;
                                height: 12px;
                                overflow: hidden;
                            ">
                                <div style="
                                    background: linear-gradient(90deg, #fbbf24, #f59e0b);
                                    height: 100%;
                                    width: ${xpProgress.percentage}%;
                                    border-radius: 20px;
                                    transition: width 0.5s ease;
                                    box-shadow: 0 0 10px rgba(251,191,36,0.5);
                                "></div>
                            </div>
                            <div style="color: rgba(255,255,255,0.7); font-size: 12px; margin-top: 5px; text-align: center;">
                                $${xpProgress.current.toLocaleString()} /$$ {xpProgress.needed.toLocaleString()} XP
                            </div>
                        </div>
                    </div>

                    <!-- Streak Card -->
                    <div class="streak-card" style="
                        background: linear-gradient(135deg, rgba(251,191,36,0.15), rgba(251,191,36,0.05));
                        border: 2px solid rgba(251,191,36,0.3);
                        border-radius: 16px;
                        padding: 25px;
                        margin-bottom: 20px;
                        text-align: center;
                    ">
                        <div style="font-size: 60px; margin-bottom: 10px;">
                            ðŸ”¥
                        </div>
                        <div style="color: #fbbf24; font-size: 48px; font-weight: 700; margin-bottom: 5px;">
                            ${userProgress.currentStreak}
                        </div>
                        <div style="color: #fff; font-size: 18px; font-weight: 600; margin-bottom: 10px;">
                            Day Streak
                        </div>
                        <div style="color: #a78bfa; font-size: 14px;">
                            Longest: ${userProgress.longestStreak} days ðŸ†
                        </div>

                        ${userProgress.currentStreak >= 3 ? `
                            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(251,191,36,0.2);">
                                <div style="color: #fbbf24; font-size: 13px; font-weight: 600; margin-bottom: 8px;">
                                    Next Milestone
                                </div>
                                <div style="color: #fff; font-size: 14px;">
                                    ${getNextStreakMilestone(userProgress.currentStreak)}
                                </div>
                            </div>
                        ` : ''}
                    </div>

                    <!-- Stats Grid -->
                    <div style="
                        display: grid;
                        grid-template-columns: repeat(2, 1fr);
                        gap: 15px;
                        margin-bottom: 20px;
                    ">
                        <div class="stat-card" style="
                            background: rgba(139,92,246,0.1);
                            border-radius: 12px;
                            padding: 20px;
                            text-align: center;
                        ">
                            <div style="font-size: 36px; margin-bottom: 8px;">ðŸŽ§</div>
                            <div style="color: #fbbf24; font-size: 28px; font-weight: 700;">
                                ${userProgress.totalSessions}
                            </div>
                            <div style="color: #a78bfa; font-size: 13px;">Sessions</div>
                        </div>

                        <div class="stat-card" style="
                            background: rgba(139,92,246,0.1);
                            border-radius: 12px;
                            padding: 20px;
                            text-align: center;
                        ">
                            <div style="font-size: 36px; margin-bottom: 8px;">â±ï¸</div>
                            <div style="color: #fbbf24; font-size: 28px; font-weight: 700;">
                                ${Math.floor(userProgress.totalSeconds / 3600)}h
                            </div>
                            <div style="color: #a78bfa; font-size: 13px;">Listening Time</div>
                        </div>

                        <div class="stat-card" style="
                            background: rgba(139,92,246,0.1);
                            border-radius: 12px;
                            padding: 20px;
                            text-align: center;
                        ">
                            <div style="font-size: 36px; margin-bottom: 8px;">ðŸ†</div>
                            <div style="color: #fbbf24; font-size: 28px; font-weight: 700;">
                                ${unlockedAchievements}
                            </div>
                            <div style="color: #a78bfa; font-size: 13px;">Achievements</div>
                        </div>

                        <div class="stat-card" style="
                            background: rgba(139,92,246,0.1);
                            border-radius: 12px;
                            padding: 20px;
                            text-align: center;
                        ">
                            <div style="font-size: 36px; margin-bottom: 8px;">ðŸŽµ</div>
                            <div style="color: #fbbf24; font-size: 28px; font-weight: 700;">
                                ${userProgress.frequenciesUsed.size}
                            </div>
                            <div style="color: #a78bfa; font-size: 13px;">Frequencies</div>
                        </div>
                    </div>

                    <!-- Achievement Progress -->
                    <div style="
                        background: rgba(251,191,36,0.1);
                        border-radius: 16px;
                        padding: 25px;
                        margin-bottom: 20px;
                    ">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h3 style="color: #fbbf24; font-size: 18px; margin: 0;">
                                Achievement Progress
                            </h3>
                            <span style="color: #fff; font-weight: 600;">
                                $${unlockedAchievements} /$$ {totalAchievements}
                            </span>
                        </div>
                        <div style="
                            background: rgba(0,0,0,0.2);
                            border-radius: 20px;
                            height: 16px;
                            overflow: hidden;
                            margin-bottom: 10px;
                        ">
                            <div style="
                                background: linear-gradient(90deg, #fbbf24, #f59e0b);
                                height: 100%;
                                width: ${achievementPercentage}%;
                                border-radius: 20px;
                                transition: width 0.5s ease;
                            "></div>
                        </div>
                        <div style="color: #a78bfa; font-size: 13px; text-align: center;">
                            ${achievementPercentage}% Complete
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div style="text-align: center;">
                        <button onclick="showAllAchievements()" style="
                            background: linear-gradient(90deg, #8b5cf6, #6b46c1);
                            color: #fff;
                            border: none;
                            border-radius: 30px;
                            padding: 12px 30px;
                            font-size: 15px;
                            font-weight: 600;
                            cursor: pointer;
                            box-shadow: 0 4px 12px rgba(139,92,246,0.3);
                            margin: 5px;
                        ">
                            View All Achievements ðŸ†
                        </button>
                    </div>
                </div>
            `;
        }

        function getNextStreakMilestone(currentStreak) {
            const milestones = [7, 14, 21, 30, 40, 73, 108, 365];
            for (const milestone of milestones) {
                if (currentStreak < milestone) {
                    const daysLeft = milestone - currentStreak;
                    return `$${milestone} days ($$ {daysLeft} more to go)`;
                }
            }
            return '365 days reached! ðŸ‘‘';
        }

        // ============================================
        // ACHIEVEMENTS DISPLAY
        // ============================================

        function showAllAchievements() {
            const categories = {
                'awakening': { name: 'Awakening', icon: 'âœ¨' },
                'sessions': { name: 'Session Milestones', icon: 'ðŸŽ§' },
                'time': { name: 'Time Milestones', icon: 'â±ï¸' },
                'streaks': { name: 'Streak Achievements', icon: 'ðŸ”¥' },
                'exploration': { name: 'Frequency Exploration', icon: 'ðŸŽµ' },
                'special': { name: 'Special Actions', icon: 'ðŸ’«' },
                'synchronicity': { name: 'Synchronicities', icon: 'ðŸŒŸ' },
                'mastery': { name: 'Mastery', icon: 'ðŸ‘‘' }
            };

            let html = `
                <div class="achievements-modal" style="
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.9);
                    z-index: 10000;
                    overflow-y: auto;
                    padding: 20px;
                ">
                    <div style="max-width: 900px; margin: 0 auto;">
                        <div style="text-align: center; margin-bottom: 30px;">
                            <h2 style="color: #fbbf24; font-size: 32px; margin-bottom: 10px;">
                                ðŸ† All Achievements
                            </h2>
                            <p style="color: #a78bfa; font-size: 16px;">
                                $${userProgress.achievements.size} /$$ {Object.keys(ACHIEVEMENTS).length} Unlocked
                            </p>
                        </div>
            `;

            for (const [categoryKey, categoryInfo] of Object.entries(categories)) {
                const categoryAchievements = Object.values(ACHIEVEMENTS).filter(a => a.category === categoryKey);
                if (categoryAchievements.length === 0) continue;

                const unlockedInCategory = categoryAchievements.filter(a => userProgress.achievements.has(a.id)).length;

                html += `
                    <div style="margin-bottom: 30px;">
                        <h3 style="color: #fbbf24; font-size: 20px; margin-bottom: 15px;">
                            $${categoryInfo.icon}$$ {categoryInfo.name} ($${unlockedInCategory}/$$ {categoryAchievements.length})
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 15px;">
                `;

                for (const achievement of categoryAchievements) {
                    html += renderAchievementCard(achievement, achievement.id);
                }

                html += `
                        </div>
                    </div>
                `;
            }

            html += `
                        <div style="text-align: center; margin-top: 30px;">
                            <button onclick="closeAllAchievements()" style="
                                background: linear-gradient(90deg, #8b5cf6, #6b46c1);
                                color: #fff;
                                border: none;
                                border-radius: 30px;
                                padding: 15px 40px;
                                font-size: 16px;
                                font-weight: 600;
                                cursor: pointer;
                                box-shadow: 0 4px 12px rgba(139,92,246,0.4);
                            ">
                                Close
                            </button>
                        </div>
                    </div>
                </div>
            `;

            document.body.insertAdjacentHTML('beforeend', html);
        }

        function closeAllAchievements() {
            const modal = document.querySelector('.achievements-modal');
            if (modal) modal.remove();
        }

        function getAchievementProgress(achievementId, achievement) {
            const checks = achievement.check(userProgress);
            
            // Define progress calculators for each achievement
            const progressCalculators = {
                // Awakening
                trinityThreshold: () => ({
                    percentage: Math.min(Math.round((userProgress.totalSessions / 3) * 100), 100),
                    text: `$${userProgress.totalSessions}/3 sessions`
                }),
                
                sevenFoldBlessing: () => ({
                    percentage: Math.min(Math.round((userProgress.totalSessions / 7) * 100), 100),
                    text: `$${userProgress.totalSessions}/7 sessions`
                }),
                
                tenthGate: () => ({
                    percentage: Math.min(Math.round((userProgress.totalSessions / 10) * 100), 100),
                    text: `$${userProgress.totalSessions}/10 sessions`
                }),
                
                // Session milestones
                quarterCentury: () => ({
                    percentage: Math.min(Math.round((userProgress.totalSessions / 25) * 100), 100),
                    text: `$${userProgress.totalSessions}/25 sessions`
                }),
                
                mirrorOfForm: () => ({
                    percentage: Math.min(Math.round((userProgress.totalSessions / 37) * 100), 100),
                    text: `$${userProgress.totalSessions}/37 sessions`
                }),
                
                fiftySteps: () => ({
                    percentage: Math.min(Math.round((userProgress.totalSessions / 50) * 100), 100),
                    text: `$${userProgress.totalSessions}/50 sessions`
                }),
                
                mirrorOfSpirit: () => ({
                    percentage: Math.min(Math.round((userProgress.totalSessions / 73) * 100), 100),
                    text: `$${userProgress.totalSessions}/73 sessions`
                }),
                
                centuryGuardian: () => ({
                    percentage: Math.min(Math.round((userProgress.totalSessions / 100) * 100), 100),
                    text: `$${userProgress.totalSessions}/100 sessions`
                }),
                
                sacredGateway108: () => ({
                    percentage: Math.min(Math.round((userProgress.totalSessions / 108) * 100), 100),
                    text: `$${userProgress.totalSessions}/108 sessions`
                }),
                
                // Time-based
                fiveMinuteMark: () => {
                    const mins = Math.floor(userProgress.totalSeconds / 60);
                    return {
                        percentage: Math.min(Math.round((mins / 5) * 100), 100),
                        text: `$${mins}/5 minutes`
                    };
                },
                
                halfHourDevotee: () => {
                    const mins = Math.floor(userProgress.totalSeconds / 60);
                    return {
                        percentage: Math.min(Math.round((mins / 30) * 100), 100),
                        text: `$${mins}/30 minutes`
                    };
                },
                
                hourMaster: () => {
                    const hours = Math.floor(userProgress.totalSeconds / 3600);
                    return {
                        percentage: Math.min(hours * 100, 100),
                        text: `$${hours}/1 hour`
                    };
                },
                
                fiveHourPilgrim: () => {
                    const hours = Math.floor(userProgress.totalSeconds / 3600);
                    return {
                        percentage: Math.min(Math.round((hours / 5) * 100), 100),
                        text: `$${hours}/5 hours`
                    };
                },
                
                tenHourSage: () => {
                    const hours = Math.floor(userProgress.totalSeconds / 3600);
                    return {
                        percentage: Math.min(Math.round((hours / 10) * 100), 100),
                        text: `$${hours}/10 hours`
                    };
                },
                
                // Streak-based
                threeDayInitiate: () => {
                    const current = userProgress.currentStreak;
                    const target = 3;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `$${current}/3 day streak`
                    };
                },
                
                sevenDaySeeker: () => {
                    const current = userProgress.currentStreak;
                    const target = 7;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `$${current}/7 day streak`
                    };
                },
                
                twoWeekChampion: () => {
                    const current = userProgress.currentStreak;
                    const target = 14;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `$${current}/14 day streak`
                    };
                },
                
                twentyOneDayTransformer: () => {
                    const current = userProgress.currentStreak;
                    const target = 21;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `$${current}/21 day streak`
                    };
                },
                
                monthMaster: () => {
                    const current = userProgress.currentStreak;
                    const target = 30;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `$${current}/30 day streak`
                    };
                },
                
                fortyDayPilgrim: () => {
                    const current = userProgress.currentStreak;
                    const target = 40;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `$${current}/40 day streak`
                    };
                },
                
                seventyThreeDayMystic: () => {
                    const current = userProgress.currentStreak;
                    const target = 73;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `$${current}/73 day streak`
                    };
                },
                
                oneHundredEightDaySage: () => {
                    const current = userProgress.currentStreak;
                    const target = 108;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `$${current}/108 day streak`
                    };
                },
                
                // Exploration-based
                explorer: () => {
                    const current = userProgress.frequenciesUsed.size;
                    const target = 5;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `$${current}/5 frequencies explored`
                    };
                },
                
                categoryConqueror: () => {
                    const current = userProgress.categoriesExplored.size;
                    const target = 5;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `$${current}/5 categories explored`
                    };
                },
                
                frequencyMaster: () => {
                    const current = userProgress.frequenciesUsed.size;
                    const target = 20;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `$${current}/20 unique frequencies`
                    };
                },
                
                // Specialty tracking
                genesisScholar: () => {
                    const current = userProgress.trackPlayCounts?.genesisCreation || 0;
                    const target = 10;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `$${current}/10 Genesis sessions`
                    };
                },
                
                solfeggioAdept: () => {
                    const counts = userProgress.trackPlayCounts || {};
                    const solfeggioKeys = Object.keys(counts).filter(k => k.includes('solfeggio'));
                    const current = solfeggioKeys.reduce((sum, key) => sum + (counts[key] || 0), 0);
                    const target = 20;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `$${current}/20 Solfeggio sessions`
                    };
                },
                
                angelWhisperer: () => {
                    const counts = userProgress.trackPlayCounts || {};
                    const angelKeys = Object.keys(counts).filter(k => k.includes('angel'));
                    const current = angelKeys.reduce((sum, key) => sum + (counts[key] || 0), 0);
                    const target = 15;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `$${current}/15 Angel Number sessions`
                    };
                },
                
                chakraBalancer: () => {
                    const counts = userProgress.trackPlayCounts || {};
                    const chakraKeys = Object.keys(counts).filter(k => k.includes('chakra'));
                    const current = chakraKeys.reduce((sum, key) => sum + (counts[key] || 0), 0);
                    const target = 25;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `$${current}/25 Chakra sessions`
                    };
                },
                
                // Duration-based
                quickSession: () => ({
                    percentage: userProgress.totalSessions > 0 ? 100 : 0,
                    text: 'Complete any session'
                }),
                
                deepMeditation: () => {
                    const hasSession = userProgress.sessionHistory.some(s => s.duration >= 30);
                    return {
                        percentage: hasSession ? 100 : 0,
                        text: hasSession ? 'Complete!' : 'Meditate for 30+ minutes'
                    };
                },
                
                marathonListener: () => {
                    const hasSession = userProgress.sessionHistory.some(s => s.duration >= 60);
                    return {
                        percentage: hasSession ? 100 : 0,
                        text: hasSession ? 'Complete!' : 'Complete a 60-minute session'
                    };
                },
                
                // Time-based achievements
                earlyBird: () => ({
                    percentage: 0,
                    text: 'Practice before 6 AM'
                }),
                
                nightOwl: () => ({
                    percentage: 0,
                    text: 'Practice after 10 PM'
                }),
                
                midnightMystic: () => ({
                    percentage: 0,
                    text: 'Practice between 11 PM - 1 AM'
                }),
                
                // Special activity achievements
                waterCharger: () => {
                    const current = userProgress.waterChargingSessions || 0;
                    const target = 3;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `$${current}/3 water charging sessions`
                    };
                },
                
                crystalHealer: () => {
                    const current = userProgress.crystalSessions || 0;
                    const target = 5;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `$${current}/5 crystal healing sessions`
                    };
                },
                
                intentionSetter: () => {
                    const current = userProgress.intentionsSet || 0;
                    const target = 10;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `$${current}/10 intentions set`
                    };
                },
                
                reflectiveSoul: () => {
                    const current = userProgress.journalEntries?.length || 0;
                    const target = 10;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `$${current}/10 journal entries`
                    };
                },
                
                // Social achievements
                shareTheLight: () => {
                    const current = userProgress.appShares || 0;
                    const target = 3;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `$${current}/3 shares`
                    };
                },
                
                helpOthers: () => {
                    const current = userProgress.referrals?.length || 0;
                    const target = 5;
                    return {
                        percentage: Math.min(Math.round((current / target) * 100), 100),
                        text: `$${current}/5 friends referred`
                    };
                }
            };
            
            // Get progress if calculator exists
            if (progressCalculators[achievementId]) {
                return progressCalculators[achievementId]();
            }
            
            // Default: no progress tracking
            return null;
        }

        // ============================================
        // LOCKED ACHIEVEMENT TEASER SYSTEM
        // ============================================

        function renderAchievementCard(achievement, achievementId) {
            const isUnlocked = userProgress.achievements.has(achievementId);
            const progress = getAchievementProgress(achievementId, achievement);
            const isClose = progress && progress.percentage >= 75; // "Close to unlocking"
            
            // Different display states
            if (isUnlocked) {
                return renderUnlockedAchievement(achievement, achievementId);
            } else if (isClose) {
                return renderAlmostUnlockedAchievement(achievement, achievementId, progress);
            } else if (progress && progress.percentage > 0) {
                return renderInProgressAchievement(achievement, achievementId, progress);
            } else {
                return renderLockedAchievement(achievement, achievementId);
            }
        }

        // ============================================
        // UNLOCKED ACHIEVEMENT (Full Details)
        // ============================================

        function renderUnlockedAchievement(achievement, achievementId) {
            return `
                <div class="achievement-card unlocked" style="
                    background: linear-gradient(135deg, rgba(34,197,94,0.2), rgba(22,163,74,0.2));
                    border: 2px solid #22c55e;
                    border-radius: 16px;
                    padding: 20px;
                    position: relative;
                    overflow: hidden;
                    animation: pulse-glow 2s ease-in-out infinite;
                ">
                    <!-- Badges -->
                    ${achievement.legendary ? `
                        <div style="
                            position: absolute;
                            top: -10px;
                            left: 50%;
                            transform: translateX(-50%);
                            background: linear-gradient(90deg, #fbbf24, #f59e0b);
                            color: #1a1625;
                            padding: 4px 12px;
                            border-radius: 12px;
                            font-size: 11px;
                            font-weight: 700;
                            box-shadow: 0 4px 12px rgba(251,191,36,0.5);
                        ">LEGENDARY</div>
                    ` : achievement.special ? `
                        <div style="
                            position: absolute;
                            top: -10px;
                            left: 50%;
                            transform: translateX(-50%);
                            background: rgba(139,92,246,0.9);
                            color: #fbbf24;
                            padding: 4px 12px;
                            border-radius: 12px;
                            font-size: 11px;
                            font-weight: 700;
                        ">SPECIAL</div>
                    ` : ''}

                    <!-- Sparkle effect -->
                    <div style="
                        position: absolute;
                        top: 10px;
                        right: 10px;
                        font-size: 24px;
                        animation: sparkle 1.5s ease-in-out infinite;
                    ">âœ¨</div>
                    
                    <!-- Achievement Icon -->
                    <div style="
                        font-size: 64px;
                        text-align: center;
                        margin-bottom: 15px;
                        filter: drop-shadow(0 0 10px rgba(34,197,94,0.5));
                    ">
                        ${achievement.name.split(' ')[0]}
                    </div>
                    
                    <!-- Achievement Name -->
                    <h4 style="
                        color: #22c55e;
                        font-size: 18px;
                        font-weight: 700;
                        text-align: center;
                        margin-bottom: 10px;
                    ">
                        ${achievement.name}
                    </h4>
                    
                    <!-- Description -->
                    <p style="
                        color: #fff;
                        font-size: 14px;
                        text-align: center;
                        margin-bottom: 15px;
                        line-height: 1.5;
                    ">
                        ${achievement.description}
                    </p>
                    
                    <!-- XP Badge -->
                    <div style="
                        text-align: center;
                        background: rgba(251,191,36,0.2);
                        color: #fbbf24;
                        padding: 8px 16px;
                        border-radius: 20px;
                        font-size: 14px;
                        font-weight: 700;
                        display: inline-block;
                        width: 100%;
                    ">
                        âœ“ Earned ${achievement.xpReward} XP
                    </div>
                    
                    <!-- Unlock Date -->
                    <div style="
                        text-align: center;
                        color: #6b7280;
                        font-size: 11px;
                        margin-top: 10px;
                    ">
                        Unlocked ${getUnlockDate(achievementId)}
                    </div>
                </div>
            `;
        }

        // ============================================
        // ALMOST UNLOCKED (75%+ Progress - HYPE MODE)
        // ============================================

        function renderAlmostUnlockedAchievement(achievement, achievementId, progress) {
            return `
                <div class="achievement-card almost-unlocked" style="
                    background: linear-gradient(135deg, rgba(251,191,36,0.3), rgba(249,115,22,0.3));
                    border: 3px solid #fbbf24;
                    border-radius: 16px;
                    padding: 20px;
                    position: relative;
                    overflow: hidden;
                    animation: pulse-intense 1s ease-in-out infinite;
                    box-shadow: 0 0 30px rgba(251,191,36,0.4);
                ">
                    <!-- Badges -->
                    ${achievement.legendary ? `
                        <div style="
                            position: absolute;
                            top: -10px;
                            left: 50%;
                            transform: translateX(-50%);
                            background: linear-gradient(90deg, #fbbf24, #f59e0b);
                            color: #1a1625;
                            padding: 4px 12px;
                            border-radius: 12px;
                            font-size: 11px;
                            font-weight: 700;
                            box-shadow: 0 4px 12px rgba(251,191,36,0.5);
                            z-index: 10;
                        ">LEGENDARY</div>
                    ` : achievement.special ? `
                        <div style="
                            position: absolute;
                            top: -10px;
                            left: 50%;
                            transform: translateX(-50%);
                            background: rgba(139,92,246,0.9);
                            color: #fbbf24;
                            padding: 4px 12px;
                            border-radius: 12px;
                            font-size: 11px;
                            font-weight: 700;
                            z-index: 10;
                        ">SPECIAL</div>
                    ` : ''}

                    <!-- Pulsing "Almost There" badge -->
                    <div style="
                        position: absolute;
                        top: -5px;
                        right: -5px;
                        background: linear-gradient(135deg, #fbbf24, #f59e0b);
                        color: #1a1625;
                        padding: 6px 14px;
                        border-radius: 0 16px 0 16px;
                        font-size: 11px;
                        font-weight: 900;
                        text-transform: uppercase;
                        letter-spacing: 1px;
                        box-shadow: 0 4px 15px rgba(251,191,36,0.6);
                        animation: shake 0.5s ease-in-out infinite;
                    ">
                        ðŸ”¥ SO CLOSE!
                    </div>
                    
                    <!-- Partially revealed icon -->
                    <div style="
                        font-size: 64px;
                        text-align: center;
                        margin-bottom: 15px;
                        position: relative;
                        filter: brightness(1.5) drop-shadow(0 0 15px rgba(251,191,36,0.8));
                    ">
                        ${achievement.name.split(' ')[0]}
                        
                        <!-- Shine effect overlay -->
                        <div style="
                            position: absolute;
                            top: 0;
                            left: 0;
                            right: 0;
                            bottom: 0;
                            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.3) 50%, transparent 70%);
                            animation: shine 2s infinite;
                        "></div>
                    </div>
                    
                    <!-- Achievement Name (Visible) -->
                    <h4 style="
                        color: #fbbf24;
                        font-size: 18px;
                        font-weight: 700;
                        text-align: center;
                        margin-bottom: 10px;
                        text-shadow: 0 0 10px rgba(251,191,36,0.5);
                    ">
                        ${achievement.name}
                    </h4>
                    
                    <!-- Description (Visible) -->
                    <p style="
                        color: #fff;
                        font-size: 14px;
                        text-align: center;
                        margin-bottom: 15px;
                        line-height: 1.5;
                    ">
                        ${achievement.description}
                    </p>
                    
                    <!-- Dramatic Progress Bar -->
                    <div style="margin-bottom: 15px;">
                        <div style="
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            margin-bottom: 8px;
                        ">
                            <span style="color: #fbbf24; font-size: 13px; font-weight: 600;">
                                Almost there!
                            </span>
                            <span style="color: #fff; font-size: 16px; font-weight: 700;">
                                ${progress.percentage}%
                            </span>
                        </div>
                        <div style="
                            background: rgba(0,0,0,0.4);
                            border-radius: 20px;
                            height: 16px;
                            overflow: hidden;
                            position: relative;
                        ">
                            <div style="
                                background: linear-gradient(90deg, #fbbf24, #f59e0b, #fbbf24);
                                background-size: 200% 100%;
                                height: 100%;
                                width: ${progress.percentage}%;
                                border-radius: 20px;
                                animation: gradient-shift 2s ease infinite;
                                box-shadow: 0 0 20px rgba(251,191,36,0.8);
                            "></div>
                        </div>
                        <div style="
                            text-align: center;
                            color: #a78bfa;
                            font-size: 12px;
                            margin-top: 6px;
                        ">
                            ${progress.text}
                        </div>
                    </div>
                    
                    <!-- Reward Preview (Glowing) -->
                    <div style="
                        text-align: center;
                        background: linear-gradient(90deg, rgba(251,191,36,0.3), rgba(249,115,22,0.3));
                        color: #fbbf24;
                        padding: 12px 16px;
                        border-radius: 20px;
                        font-size: 15px;
                        font-weight: 700;
                        border: 2px solid #fbbf24;
                        box-shadow: 0 0 20px rgba(251,191,36,0.3);
                    ">
                        ðŸŽ ${achievement.xpReward} XP REWARD
                    </div>
                    
                    <!-- Motivational Message -->
                    <div style="
                        text-align: center;
                        color: #fbbf24;
                        font-size: 12px;
                        margin-top: 12px;
                        font-weight: 600;
                        animation: pulse-text 1.5s ease-in-out infinite;
                    ">
                        Keep going! You're about to unlock this! ðŸš€
                    </div>
                </div>
            `;
        }

        // ============================================
        // IN PROGRESS (1-74% Progress)
        // ============================================

        function renderInProgressAchievement(achievement, achievementId, progress) {
            return `
                <div class="achievement-card in-progress" style="
                    background: linear-gradient(135deg, rgba(139,92,246,0.2), rgba(107,70,193,0.2));
                    border: 2px solid rgba(139,92,246,0.5);
                    border-radius: 16px;
                    padding: 20px;
                    position: relative;
                    overflow: hidden;
                ">
                    <!-- Badges -->
                    ${achievement.legendary ? `
                        <div style="
                            position: absolute;
                            top: -10px;
                            left: 50%;
                            transform: translateX(-50%);
                            background: linear-gradient(90deg, #fbbf24, #f59e0b);
                            color: #1a1625;
                            padding: 4px 12px;
                            border-radius: 12px;
                            font-size: 11px;
                            font-weight: 700;
                            box-shadow: 0 4px 12px rgba(251,191,36,0.5);
                            z-index: 10;
                        ">LEGENDARY</div>
                    ` : achievement.special ? `
                        <div style="
                            position: absolute;
                            top: -10px;
                            left: 50%;
                            transform: translateX(-50%);
                            background: rgba(139,92,246,0.9);
                            color: #fbbf24;
                            padding: 4px 12px;
                            border-radius: 12px;
                            font-size: 11px;
                            font-weight: 700;
                            z-index: 10;
                        ">SPECIAL</div>
                    ` : ''}

                    <!-- In Progress badge -->
                    <div style="
                        position: absolute;
                        top: 10px;
                        right: 10px;
                        background: rgba(139,92,246,0.3);
                        color: #a78bfa;
                        padding: 4px 12px;
                        border-radius: 12px;
                        font-size: 10px;
                        font-weight: 700;
                        text-transform: uppercase;
                        letter-spacing: 0.5px;
                    ">
                        IN PROGRESS
                    </div>
                    
                    <!-- Icon (Slightly dimmed) -->
                    <div style="
                        font-size: 64px;
                        text-align: center;
                        margin-bottom: 15px;
                        opacity: 0.8;
                        filter: grayscale(20%);
                    ">
                        ${achievement.name.split(' ')[0]}
                    </div>
                    
                    <!-- Achievement Name -->
                    <h4 style="
                        color: #a78bfa;
                        font-size: 18px;
                        font-weight: 700;
                        text-align: center;
                        margin-bottom: 10px;
                    ">
                        ${achievement.name}
                    </h4>
                    
                    <!-- Description -->
                    <p style="
                        color: #d1d5db;
                        font-size: 14px;
                        text-align: center;
                        margin-bottom: 15px;
                        line-height: 1.5;
                    ">
                        ${achievement.description}
                    </p>
                    
                    <!-- Progress Bar -->
                    <div style="margin-bottom: 15px;">
                        <div style="
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            margin-bottom: 8px;
                        ">
                            <span style="color: #a78bfa; font-size: 12px; font-weight: 600;">
                                Progress
                            </span>
                            <span style="color: #fff; font-size: 14px; font-weight: 700;">
                                ${progress.percentage}%
                            </span>
                        </div>
                        <div style="
                            background: rgba(0,0,0,0.4);
                            border-radius: 20px;
                            height: 12px;
                            overflow: hidden;
                        ">
                            <div style="
                                background: linear-gradient(90deg, #8b5cf6, #a78bfa);
                                height: 100%;
                                width: ${progress.percentage}%;
                                border-radius: 20px;
                                transition: width 0.5s ease;
                            "></div>
                        </div>
                        <div style="
                            text-align: center;
                            color: #9ca3af;
                            font-size: 11px;
                            margin-top: 6px;
                        ">
                            ${progress.text}
                        </div>
                    </div>
                    
                    <!-- Reward Preview -->
                    <div style="
                        text-align: center;
                        background: rgba(139,92,246,0.2);
                        color: #a78bfa;
                        padding: 10px 16px;
                        border-radius: 20px;
                        font-size: 14px;
                        font-weight: 600;
                        border: 1px solid rgba(139,92,246,0.3);
                    ">
                        ðŸŽ Unlock for ${achievement.xpReward} XP
                    </div>
                </div>
            `;
        }

        // ============================================
        // LOCKED (0% Progress - MYSTERY MODE)
        // ============================================

        function renderLockedAchievement(achievement, achievementId) {
            // Decide how mysterious based on achievement tier
            const isMysteryBox = achievement.xpReward >= 500; // Hide details for rare achievements
            
            return `
                <div class="achievement-card locked" style="
                    background: linear-gradient(135deg, rgba(30,30,50,0.5), rgba(20,20,35,0.5));
                    border: 2px dashed rgba(107,114,128,0.3);
                    border-radius: 16px;
                    padding: 20px;
                    position: relative;
                    overflow: hidden;
                    cursor: pointer;
                    transition: all 0.3s ease;
                "
                onmouseover="this.style.borderColor='rgba(139,92,246,0.5)'; this.style.transform='scale(1.02)'"
                onmouseout="this.style.borderColor='rgba(107,114,128,0.3)'; this.style.transform='scale(1)'"
                onclick="showLockedAchievementModal('${achievementId}')">
                    
                    <!-- Badges -->
                    ${achievement.legendary ? `
                        <div style="
                            position: absolute;
                            top: -10px;
                            left: 50%;
                            transform: translateX(-50%);
                            background: linear-gradient(90deg, #fbbf24, #f59e0b);
                            color: #1a1625;
                            padding: 4px 12px;
                            border-radius: 12px;
                            font-size: 11px;
                            font-weight: 700;
                            box-shadow: 0 4px 12px rgba(251,191,36,0.5);
                            z-index: 10;
                        ">LEGENDARY</div>
                    ` : achievement.special ? `
                        <div style="
                            position: absolute;
                            top: -10px;
                            left: 50%;
                            transform: translateX(-50%);
                            background: rgba(139,92,246,0.9);
                            color: #fbbf24;
                            padding: 4px 12px;
                            border-radius: 12px;
                            font-size: 11px;
                            font-weight: 700;
                            z-index: 10;
                        ">SPECIAL</div>
                    ` : ''}

                    <!-- Lock Icon -->
                    <div style="
                        position: absolute;
                        top: 10px;
                        right: 10px;
                        font-size: 24px;
                        opacity: 0.5;
                    ">ðŸ”’</div>
                    
                    ${isMysteryBox ? `
                        <!-- MYSTERY BOX MODE -->
                        <div style="text-align: center;">
                            <div style="
                                font-size: 80px;
                                margin-bottom: 15px;
                                opacity: 0.6;
                                filter: blur(2px);
                                user-select: none;
                            ">ðŸŽ</div>
                            
                            <h4 style="
                                color: #6b7280;
                                font-size: 18px;
                                font-weight: 700;
                                margin-bottom: 10px;
                            ">
                                ??? Mystery Achievement ???
                            </h4>
                            
                            <p style="
                                color: #4b5563;
                                font-size: 13px;
                                margin-bottom: 15px;
                                font-style: italic;
                            ">
                                This rare achievement is waiting to be discovered...
                            </p>
                            
                            <div style="
                                background: rgba(139,92,246,0.1);
                                border: 1px solid rgba(139,92,246,0.2);
                                border-radius: 12px;
                                padding: 12px;
                                margin-bottom: 12px;
                            ">
                                <div style="color: #6b7280; font-size: 11px; margin-bottom: 5px;">
                                    HINT
                                </div>
                                <div style="color: #9ca3af; font-size: 12px; font-weight: 600;">
                                    ${getAchievementHint(achievementId, achievement)}
                                </div>
                            </div>
                            
                            <div style="
                                text-align: center;
                                color: #6b7280;
                                font-size: 13px;
                                font-weight: 600;
                            ">
                                ðŸŽ Worth ${achievement.xpReward} XP
                            </div>
                            
                            <div style="
                                text-align: center;
                                color: #8b5cf6;
                                font-size: 11px;
                                margin-top: 10px;
                                font-weight: 500;
                            ">
                                Click to see more â†’
                            </div>
                        </div>
                    ` : `
                        <!-- VISIBLE BUT LOCKED MODE -->
                        <div style="text-align: center;">
                            <div style="
                                font-size: 64px;
                                margin-bottom: 15px;
                                opacity: 0.3;
                                filter: grayscale(100%);
                            ">
                                ${achievement.name.split(' ')[0]}
                            </div>
                            
                            <h4 style="
                                color: #6b7280;
                                font-size: 18px;
                                font-weight: 700;
                                margin-bottom: 10px;
                            ">
                                ${achievement.name}
                            </h4>
                            
                            <p style="
                                color: #4b5563;
                                font-size: 13px;
                                margin-bottom: 15px;
                                line-height: 1.5;
                            ">
                                ${achievement.description}
                            </p>
                            
                            <div style="
                                text-align: center;
                                background: rgba(107,114,128,0.1);
                                color: #6b7280;
                                padding: 10px 16px;
                                border-radius: 20px;
                                font-size: 13px;
                                font-weight: 600;
                                border: 1px solid rgba(107,114,128,0.2);
                            ">
                                ðŸ”’ Locked â€¢ ${achievement.xpReward} XP
                            </div>
                            
                            <div style="
                                text-align: center;
                                color: #8b5cf6;
                                font-size: 11px;
                                margin-top: 10px;
                                font-weight: 500;
                            ">
                                Click for details â†’
                            </div>
                        </div>
                    `}
                </div>
            `;
        }

        // ============================================
        // ACHIEVEMENT HINTS FOR MYSTERY BOXES
        // ============================================

        function getAchievementHint(achievementId, achievement) {
            const hints = {
                firstSession: "Begin your journey...",
                weekWarrior: "Practice makes perfect, especially over 7 days",
                monthMaster: "Consistency is key for 30 days",
                centurion: "A legendary milestone awaits",
                streakStarter: "Don't skip a day",
                weekStreak: "Build a weekly habit",
                dedication: "Two weeks without stopping",
                committedPractitioner: "A full month of devotion",
                loyalSeeker: "True dedication spans 60 days",
                enlightened: "The ultimate streak achievement",
                explorer: "Try different sounds",
                categoryConqueror: "Experience all types of frequencies",
                frequencyMaster: "Use many different frequencies",
                genesisScholar: "Focus on the sacred 37Hz",
                solfeggioAdept: "Master the healing frequencies",
                angelWhisperer: "Connect with angel numbers",
                chakraBalancer: "Align all energy centers",
                quickSession: "Even 5 minutes counts",
                deepMeditation: "Go deeper, stay longer",
                marathonListener: "Test your endurance",
                earlyBird: "Rise with the sun",
                nightOwl: "Practice under the stars",
                midnightMystic: "The witching hour holds power",
                waterCharger: "Bless your water with intention",
                crystalHealer: "Combine with crystal energy",
                intentionSetter: "Begin with purpose",
                reflectiveSoul: "Document your experiences",
                shareTheLight: "Spread the word",
                helpOthers: "Guide others to frequencies"
            };
            
            return hints[achievementId] || "Complete specific actions to unlock";
        }

        // ============================================
        // LOCKED ACHIEVEMENT MODAL (Detailed View)
        // ============================================

        function showLockedAchievementModal(achievementId) {
            const achievement = ACHIEVEMENTS[achievementId];
            if (!achievement) return;
            
            const progress = getAchievementProgress(achievementId, achievement);
            const isMystery = achievement.xpReward >= 500;
            
            const modal = document.createElement('div');
            modal.className = 'achievement-modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.95);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                padding: 20px;
                animation: fadeIn 0.3s ease;
            `;
            
            modal.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #1a1625, #2d1b69);
                    border-radius: 24px;
                    padding: 40px;
                    max-width: 500px;
                    width: 100%;
                    position: relative;
                    animation: slideUp 0.4s ease;
                ">
                    <!-- Close button -->
                    <button onclick="this.closest('.achievement-modal').remove()" style="
                        position: absolute;
                        top: 20px;
                        right: 20px;
                        background: rgba(139,92,246,0.2);
                        border: none;
                        color: #a78bfa;
                        width: 36px;
                        height: 36px;
                        border-radius: 50%;
                        font-size: 20px;
                        cursor: pointer;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    ">âœ•</button>
                    
                    <!-- Lock icon (large) -->
                    <div style="
                        text-align: center;
                        font-size: 100px;
                        margin-bottom: 20px;
                        ${isMystery ? 'filter: blur(3px); opacity: 0.5;' : 'opacity: 0.3; filter: grayscale(100%);'}
                    ">
                        ${isMystery ? 'ðŸŽ' : achievement.name.split(' ')[0]}
                    </div>
                    
                    <!-- Title -->
                    <h2 style="
                        color: ${progress && progress.percentage >= 75 ? '#fbbf24' : '#a78bfa'};
                        font-size: 28px;
                        font-weight: 700;
                        text-align: center;
                        margin-bottom: 15px;
                    ">
                        ${isMystery ? '??? Mystery Achievement ???' : achievement.name}
                    </h2>
                    
                    <!-- Description -->
                    <p style="
                        color: #d1d5db;
                        font-size: 16px;
                        text-align: center;
                        margin-bottom: 25px;
                        line-height: 1.6;
                    ">
                        ${isMystery ? `<em>${getAchievementHint(achievementId, achievement)}</em>` : achievement.description}
                    </p>
                    
                    ${progress && progress.percentage > 0 ? `
                        <!-- Progress Section -->
                        <div style="
                            background: rgba(139,92,246,0.1);
                            border-radius: 16px;
                            padding: 20px;
                            margin-bottom: 20px;
                        ">
                            <div style="
                                display: flex;
                                justify-content: space-between;
                                align-items: center;
                                margin-bottom: 12px;
                            ">
                                <span style="color: #a78bfa; font-size: 14px; font-weight: 600;">
                                    Your Progress
                                </span>
                                <span style="color: #fff; font-size: 20px; font-weight: 700;">
                                    ${progress.percentage}%
                                </span>
                            </div>
                            <div style="
                                background: rgba(0,0,0,0.4);
                                border-radius: 20px;
                                height: 16px;
                                overflow: hidden;
                            ">
                                <div style="
                                    background: linear-gradient(90deg, 
                                        ${progress.percentage >= 75 ? '#fbbf24, #f59e0b' : '#8b5cf6, #a78bfa'}
                                    );
                                    height: 100%;
                                    width: ${progress.percentage}%;
                                    border-radius: 20px;
                                    transition: width 0.5s ease;
                                    ${progress.percentage >= 75 ? 'box-shadow: 0 0 20px rgba(251,191,36,0.5);' : ''}
                                "></div>
                            </div>
                            <div style="
                                text-align: center;
                                color: #9ca3af;
                                font-size: 13px;
                                margin-top: 10px;
                            ">
                                ${progress.text}
                            </div>
                            
                            ${progress.percentage >= 75 ? `
                                <div style="
                                    text-align: center;
                                    color: #fbbf24;
                                    font-size: 14px;
                                    font-weight: 600;
                                    margin-top: 15px;
                                    animation: pulse-text 1.5s ease-in-out infinite;
                                ">
                                    ðŸ”¥ Almost there! Keep going!
                                </div>
                            ` : ''}
                        </div>
                    ` : `
                        <!-- Not Started Yet -->
                        <div style="
                            background: rgba(107,114,128,0.1);
                            border: 2px dashed rgba(107,114,128,0.3);
                            border-radius: 16px;
                            padding: 25px;
                            text-align: center;
                            margin-bottom: 20px;
                        ">
                            <div style="font-size: 48px; margin-bottom: 12px; opacity: 0.5;">ðŸ”’</div>
                            <div style="color: #9ca3af; font-size: 14px; line-height: 1.6;">
                                Start practicing to make progress towards this achievement
                            </div>
                        </div>
                    `}
                    
                    <!-- Reward Display -->
                    <div style="
                        background: linear-gradient(135deg, rgba(251,191,36,0.2), rgba(249,115,22,0.2));
                        border: 2px solid ${progress && progress.percentage >= 75 ? '#fbbf24' : 'rgba(251,191,36,0.3)'};
                        border-radius: 16px;
                        padding: 20px;
                        text-align: center;
                        ${progress && progress.percentage >= 75 ? 'box-shadow: 0 0 30px rgba(251,191,36,0.3);' : ''}
                    ">
                        <div style="color: #fbbf24; font-size: 14px; margin-bottom: 8px; font-weight: 600;">
                            UNLOCK REWARD
                        </div>
                        <div style="color: #fff; font-size: 32px; font-weight: 700;">
                            ${achievement.xpReward} XP
                        </div>
                        ${achievement.xpReward >= 1000 ? `
                            <div style="
                                color: #fbbf24;
                                font-size: 12px;
                                margin-top: 8px;
                                font-weight: 600;
                            ">
                                â­ LEGENDARY ACHIEVEMENT â­
                            </div>
                        ` : achievement.xpReward >= 500 ? `
                            <div style="
                                color: #a78bfa;
                                font-size: 12px;
                                margin-top: 8px;
                                font-weight: 600;
                            ">
                                ðŸ’œ RARE ACHIEVEMENT
                            </div>
                        ` : ''}
                    </div>
                    
                    <!-- Call to Action -->
                    <button onclick="this.closest('.achievement-modal').remove()" style="
                        width: 100%;
                        background: linear-gradient(90deg, #8b5cf6, #6b46c1);
                        color: #fff;
                        border: none;
                        border-radius: 16px;
                        padding: 16px;
                        font-size: 16px;
                        font-weight: 700;
                        cursor: pointer;
                        margin-top: 20px;
                        box-shadow: 0 4px 20px rgba(139,92,246,0.4);
                    ">
                        ${progress && progress.percentage >= 75 ? 'ðŸš€ Let\'s Finish This!' : 'âœ¨ Start Your Journey'}
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function getUnlockDate(achievementId) {
            const unlockTimestamp = userProgress.achievementUnlockDates?.[achievementId];
            if (!unlockTimestamp) return 'Recently';
            
            const date = new Date(unlockTimestamp);
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays === 0) return 'Today';
            if (diffDays === 1) return 'Yesterday';
            if (diffDays < 7) return `${diffDays} days ago`;
            if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;
            if (diffDays < 365) return `${Math.floor(diffDays / 30)} months ago`;
            return date.toLocaleDateString();
        }

        // ============================================
        // Missing achievement functions
        // ============================================

        function showAchievementModal(achievementId) {
            // Basic implementation - can be expanded later
            console.log('Achievement modal for:', achievementId);
        }

        function updateAchievementProgress() {
            // Basic implementation - can be expanded later
            console.log('Updating achievement progress');
        }

        // ============================================
        // UPDATE: Store unlock dates when achievements unlock
        // ============================================

        const originalCheckAchievement = checkAchievements;
        checkAchievements = function() {
            const result = originalCheckAchievement();

            // Achievement unlock tracking can be added here later

            return result;
        };

        // ============================================
        // UPDATED: Render Achievements Dashboard with Categories
        // ============================================

        function renderAchievementsDashboard() {
            const categories = {
                awakening: {
                    name: 'âœ¨ Awakening',
                    achievements: ['trinityThreshold', 'sevenFoldBlessing', 'tenthGate']
                },
                sessions: {
                    name: 'ðŸŽ§ Session Milestones',
                    achievements: ['quarterCentury', 'mirrorOfForm', 'fiftySteps', 'mirrorOfSpirit', 'centuryGuardian', 'sacredGateway108']
                },
                time: {
                    name: 'â±ï¸ Time Milestones',
                    achievements: ['fiveMinuteMark', 'halfHourDevotee', 'hourMaster', 'fiveHourPilgrim', 'tenHourSage']
                },
                streaks: {
                    name: 'ðŸ”¥ Streak Achievements',
                    achievements: ['threeDayInitiate', 'sevenDaySeeker', 'twoWeekChampion', 'twentyOneDayTransformer', 'monthMaster', 'fortyDayPilgrim', 'seventyThreeDayMystic', 'oneHundredEightDaySage']
                },
                exploration: {
                    name: 'ðŸŽµ Frequency Exploration',
                    achievements: ['explorer', 'categoryConqueror', 'frequencyMaster']
                },
                specialty: {
                    name: 'âœ¨ Specialty Tracks',
                    achievements: ['genesisScholar', 'solfeggioAdept', 'angelWhisperer', 'chakraBalancer']
                },
                duration: {
                    name: 'ðŸ§˜ Session Types',
                    achievements: ['quickSession', 'deepMeditation', 'marathonListener']
                },
                timing: {
                    name: 'ðŸ• Perfect Timing',
                    achievements: ['earlyBird', 'nightOwl', 'midnightMystic']
                },
                special: {
                    name: 'ðŸ’Ž Special Activities',
                    achievements: ['waterCharger', 'crystalHealer', 'intentionSetter', 'reflectiveSoul']
                },
                social: {
                    name: 'ðŸ¤ Community',
                    achievements: ['shareTheLight', 'helpOthers']
                }
            };
            
            let html = `
                <div style="padding: 20px;">
                    <div style="
                        text-align: center;
                        margin-bottom: 40px;
                    ">
                        <h2 style="
                            color: #fbbf24;
                            font-size: 32px;
                            margin-bottom: 15px;
                            text-shadow: 0 0 20px rgba(251,191,36,0.5);
                        ">
                            ðŸ† Achievements
                        </h2>
                        <p style="
                            color: #a78bfa;
                            font-size: 16px;
                            margin-bottom: 20px;
                        ">
                            Unlock rewards as you progress on your journey
                        </p>
                        
                        <!-- Overall Progress -->
                        <div style="
                            background: linear-gradient(135deg, rgba(139,92,246,0.2), rgba(167,139,250,0.2));
                            border-radius: 20px;
                            padding: 25px;
                            max-width: 500px;
                            margin: 0 auto;
                        ">
                            <div style="
                                display: flex;
                                justify-content: space-around;
                                align-items: center;
                                flex-wrap: wrap;
                                gap: 20px;
                            ">
                                <div style="text-align: center;">
                                    <div style="color: #22c55e; font-size: 36px; font-weight: 700;">
                                        ${userProgress.achievements.size}
                                    </div>
                                    <div style="color: #a78bfa; font-size: 13px;">
                                        Unlocked
                                    </div>
                                </div>
                                
                                <div style="text-align: center;">
                                    <div style="color: #fbbf24; font-size: 36px; font-weight: 700;">
                                        ${Object.keys(ACHIEVEMENTS).length - userProgress.achievements.size}
                                    </div>
                                    <div style="color: #a78bfa; font-size: 13px;">
                                        Remaining
                                    </div>
                                </div>
                                
                                <div style="text-align: center;">
                                    <div style="color: #8b5cf6; font-size: 36px; font-weight: 700;">
                                        ${Math.round((userProgress.achievements.size / Object.keys(ACHIEVEMENTS).length) * 100)}%
                                    </div>
                                    <div style="color: #a78bfa; font-size: 13px;">
                                        Complete
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
            `;
            
            // Render each category
            Object.entries(categories).forEach(([categoryKey, category]) => {
                const categoryAchievements = category.achievements.map(id => ({
                    id,
                    achievement: ACHIEVEMENTS[id]
                })).filter(a => a.achievement);
                
                const unlockedCount = categoryAchievements.filter(a => 
                    userProgress.achievements.has(a.id)
                ).length;
                
                html += `
                    <div style="margin-bottom: 40px;">
                        <div style="
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            margin-bottom: 20px;
                            padding-bottom: 15px;
                            border-bottom: 2px solid rgba(139,92,246,0.3);
                        ">
                            <h3 style="
                                color: #fff;
                                font-size: 22px;
                                margin: 0;
                            ">
                                ${category.name}
                            </h3>
                            <div style="
                                background: rgba(139,92,246,0.2);
                                color: #a78bfa;
                                padding: 6px 14px;
                                border-radius: 20px;
                                font-size: 13px;
                                font-weight: 600;
                            ">
                                $${unlockedCount} /$$ {categoryAchievements.length}
                            </div>
                        </div>
                        
                        <div class="achievements-grid">
                            ${categoryAchievements.map(({ id, achievement }) => 
                                renderAchievementCard(achievement, id)
                            ).join('')}
                        </div>
                    </div>
                `;
            });
            
            html += `
                </div>
            `;
            
            return html;
        }

        // ============================================
        // QUICK STATS WIDGET (For Main Dashboard)
        // ============================================

        function renderAchievementQuickStats() {
            const totalAchievements = Object.keys(ACHIEVEMENTS).length;
            const unlockedCount = userProgress.achievements.size;
            const recentUnlocks = getRecentUnlocks(3);
            
            return `
                <div style="
                    background: linear-gradient(135deg, rgba(139,92,246,0.15), rgba(167,139,250,0.15));
                    border-radius: 16px;
                    padding: 20px;
                    margin: 20px 0;
                ">
                    <div style="
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        margin-bottom: 15px;
                    ">
                        <h3 style="color: #fbbf24; font-size: 20px; margin: 0;">
                            ðŸ† Achievements
                        </h3>
                        <button onclick="showFullAchievements()" style="
                            background: rgba(139,92,246,0.2);
                            color: #a78bfa;
                            border: 2px solid rgba(139,92,246,0.3);
                            border-radius: 20px;
                            padding: 8px 16px;
                            font-size: 13px;
                            font-weight: 600;
                            cursor: pointer;
                        ">
                            View All â†’
                        </button>
                    </div>
                    
                    <div style="
                        display: flex;
                        gap: 15px;
                        margin-bottom: 20px;
                    ">
                        <div style="
                            flex: 1;
                            background: rgba(34,197,94,0.1);
                            border-radius: 12px;
                            padding: 15px;
                            text-align: center;
                        ">
                            <div style="color: #22c55e; font-size: 28px; font-weight: 700;">
                                ${unlockedCount}
                            </div>
                            <div style="color: #a78bfa; font-size: 12px;">
                                Unlocked
                            </div>
                        </div>
                        
                        <div style="
                            flex: 1;
                            background: rgba(139,92,246,0.1);
                            border-radius: 12px;
                            padding: 15px;
                            text-align: center;
                        ">
                            <div style="color: #fbbf24; font-size: 28px; font-weight: 700;">
                                ${totalAchievements - unlockedCount}
                            </div>
                            <div style="color: #a78bfa; font-size: 12px;">
                                To Discover
                            </div>
                        </div>
                    </div>
                    
                    ${recentUnlocks.length > 0 ? `
                        <div style="
                            background: rgba(0,0,0,0.2);
                            border-radius: 12px;
                            padding: 15px;
                        ">
                            <div style="color: #a78bfa; font-size: 12px; margin-bottom: 12px; font-weight: 600;">
                                RECENTLY UNLOCKED
                            </div>
                            ${recentUnlocks.map(({ id, achievement }) => `
                                <div style="
                                    display: flex;
                                    align-items: center;
                                    gap: 12px;
                                    margin-bottom: 10px;
                                    padding-bottom: 10px;
                                    border-bottom: 1px solid rgba(139,92,246,0.2);
                                ">
                                    <div style="font-size: 32px;">
                                        ${achievement.name.split(' ')[0]}
                                    </div>
                                    <div style="flex: 1;">
                                        <div style="color: #22c55e; font-size: 14px; font-weight: 600;">
                                            ${achievement.name}
                                        </div>
                                        <div style="color: #6b7280; font-size: 11px;">
                                            +${achievement.xpReward} XP
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    ` : `
                        <div style="
                            text-align: center;
                            color: #6b7280;
                            font-size: 13px;
                            padding: 20px;
                            font-style: italic;
                        ">
                            Complete your first session to start unlocking achievements! ðŸš€
                        </div>
                    `}
                </div>
            `;
        }

        function getRecentUnlocks(count = 3) {
            if (!userProgress.achievementUnlockDates) return [];
            
            const unlocks = Object.entries(userProgress.achievementUnlockDates)
                .map(([id, timestamp]) => ({
                    id,
                    achievement: ACHIEVEMENTS[id],
                    timestamp
                }))
                .filter(u => u.achievement)
                .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp))
                .slice(0, count);
            
            return unlocks;
        }

        function showFullAchievements() {
            // Navigate to achievements page or show modal
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.95);
                z-index: 10000;
                overflow-y: auto;
                padding: 20px;
            `;
            
            modal.innerHTML = `
                <div style="max-width: 1200px; margin: 0 auto; position: relative;">
                    <button onclick="this.closest('div').parentElement.remove()" style="
                        position: sticky;
                        top: 20px;
                        right: 0;
                        float: right;
                        background: rgba(139,92,246,0.3);
                        border: none;
                        color: #fff;
                        width: 40px;
                        height: 40px;
                        border-radius: 50%;
                        font-size: 20px;
                        cursor: pointer;
                        z-index: 10001;
                    ">âœ•</button>
                    
                    ${renderAchievementsDashboard()}
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function getAchievementProgress(id) {
            // Session-based
            if (id === 'trinityThreshold') {
                return { percentage: Math.min((userProgress.totalSessions / 3) * 100, 100), text: `${userProgress.totalSessions}/3 sessions` };
            }
            if (id === 'sevenFoldBlessing') {
                return { percentage: Math.min((userProgress.totalSessions / 7) * 100, 100), text: `${userProgress.totalSessions}/7 sessions` };
            }
            if (id === 'tenthGate') {
                return { percentage: Math.min((userProgress.totalSessions / 10) * 100, 100), text: `${userProgress.totalSessions}/10 sessions` };
            }
            if (id === 'quarterCentury') {
                return { percentage: Math.min((userProgress.totalSessions / 25) * 100, 100), text: `${userProgress.totalSessions}/25 sessions` };
            }
            if (id === 'mirrorOfForm') {
                return { percentage: Math.min((userProgress.totalSessions / 37) * 100, 100), text: `${userProgress.totalSessions}/37 sessions` };
            }
            if (id === 'fiftySteps') {
                return { percentage: Math.min((userProgress.totalSessions / 50) * 100, 100), text: `${userProgress.totalSessions}/50 sessions` };
            }
            if (id === 'mirrorOfSpirit') {
                return { percentage: Math.min((userProgress.totalSessions / 73) * 100, 100), text: `${userProgress.totalSessions}/73 sessions` };
            }
            if (id === 'centuryGuardian') {
                return { percentage: Math.min((userProgress.totalSessions / 100) * 100, 100), text: `${userProgress.totalSessions}/100 sessions` };
            }
            if (id === 'sacredGateway108') {
                return { percentage: Math.min((userProgress.totalSessions / 108) * 100, 100), text: `${userProgress.totalSessions}/108 sessions` };
            }

            // Time-based
            if (id === 'fiveMinuteMark') {
                const mins = Math.floor(userProgress.totalSeconds / 60);
                return { percentage: Math.min((mins / 5) * 100, 100), text: `${mins}/5 minutes` };
            }
            if (id === 'halfHourDevotee') {
                const mins = Math.floor(userProgress.totalSeconds / 60);
                return { percentage: Math.min((mins / 30) * 100, 100), text: `${mins}/30 minutes` };
            }
            if (id === 'hourMaster') {
                const hours = Math.floor(userProgress.totalSeconds / 3600);
                return { percentage: Math.min(hours * 100, 100), text: `${hours}/1 hour` };
            }
            if (id === 'fiveHourPilgrim') {
                const hours = Math.floor(userProgress.totalSeconds / 3600);
                return { percentage: Math.min((hours / 5) * 100, 100), text: `${hours}/5 hours` };
            }
            if (id === 'tenHourSage') {
                const hours = Math.floor(userProgress.totalSeconds / 3600);
                return { percentage: Math.min((hours / 10) * 100, 100), text: `${hours}/10 hours` };
            }

            // Streak-based
            if (id === 'threeDayInitiate') {
                return { percentage: Math.min((userProgress.currentStreak / 3) * 100, 100), text: `${userProgress.currentStreak}/3 days` };
            }
            if (id === 'sevenDaySeeker') {
                return { percentage: Math.min((userProgress.currentStreak / 7) * 100, 100), text: `${userProgress.currentStreak}/7 days` };
            }
            if (id === 'twoWeekChampion') {
                return { percentage: Math.min((userProgress.currentStreak / 14) * 100, 100), text: `${userProgress.currentStreak}/14 days` };
            }
            if (id === 'twentyOneDayTransformer') {
                return { percentage: Math.min((userProgress.currentStreak / 21) * 100, 100), text: `${userProgress.currentStreak}/21 days` };
            }
            if (id === 'monthMaster') {
                return { percentage: Math.min((userProgress.currentStreak / 30) * 100, 100), text: `${userProgress.currentStreak}/30 days` };
            }
            if (id === 'fortyDayPilgrim') {
                return { percentage: Math.min((userProgress.currentStreak / 40) * 100, 100), text: `${userProgress.currentStreak}/40 days` };
            }
            if (id === 'seventyThreeDayMystic') {
                return { percentage: Math.min((userProgress.currentStreak / 73) * 100, 100), text: `${userProgress.currentStreak}/73 days` };
            }
            if (id === 'oneHundredEightDaySage') {
                return { percentage: Math.min((userProgress.currentStreak / 108) * 100, 100), text: `${userProgress.currentStreak}/108 days` };
            }

            // Special actions
            if (id === 'waterAlchemist') {
                return { percentage: Math.min((userProgress.waterChargingSessions / 3) * 100, 100), text: `${userProgress.waterChargingSessions}/3 charges` };
            }
            if (id === 'intentionSetter') {
                return { percentage: Math.min((userProgress.intentionsSet / 10) * 100, 100), text: `${userProgress.intentionsSet}/10 intentions` };
            }
            if (id === 'genesisEvangelist') {
                return { percentage: Math.min((userProgress.appShares / 5) * 100, 100), text: `${userProgress.appShares}/5 shares` };
            }
            if (id === 'trinityMaster') {
                const count = userProgress.trackPlayCounts['genesisCreation'] || 0;
                return { percentage: Math.min((count / 10) * 100, 100), text: `${count}/10 sessions` };
            }

            return null;
        }

        // ============================================
        // DAILY CHALLENGES SYSTEM
        // ============================================

        const DAILY_CHALLENGES = [
            {
                id: 'morningDevotion',
                name: 'ðŸŒ… Morning Devotion',
                description: 'Complete a session before 9 AM',
                xpReward: 50,
                check: (session) => {
                    const hour = parseInt(session.time.split(':')[0]);
                    return hour < 9;
                }
            },
            {
                id: 'eveningReflection',
                name: 'ðŸŒ™ Evening Reflection',
                description: 'Complete a session after 8 PM',
                xpReward: 50,
                check: (session) => {
                    const hour = parseInt(session.time.split(':')[0]);
                    return hour >= 20;
                }
            },
            {
                id: 'waterCeremony',
                name: 'ðŸ’§ Water Ceremony',
                description: 'Charge water today',
                xpReward: 60,
                check: (session) => session.waterCharging === true
            },
            {
                id: 'backToBasics',
                name: 'ðŸ”º Back to Basics',
                description: 'Use Genesis Creation track',
                xpReward: 50,
                check: (session) => session.trackId === 'genesisCreation'
            },
            {
                id: 'angelMessage',
                name: 'ðŸ‘¼ Angel Message',
                description: 'Try an Angel Number frequency',
                xpReward: 50,
                check: (session) => session.category === 'angelNumbers'
            },
            {
                id: 'extendedPractice',
                name: 'ðŸ§˜ Extended Practice',
                description: 'Session of 20+ minutes',
                xpReward: 75,
                check: (session) => session.duration >= 1200
            },
            {
                id: 'discovery',
                name: 'ðŸŽµ Discovery',
                description: 'Try a frequency you haven\'t used in 7+ days',
                xpReward: 60,
                check: (session) => {
                    // Check if this track was used in last 7 days
                    const sevenDaysAgo = Date.now() - (7 * 24 * 60 * 60 * 1000);
                    const recentSessions = userProgress.sessionHistory.filter(s => s.timestamp > sevenDaysAgo);
                    return !recentSessions.some(s => s.trackId === session.trackId);
                }
            },
            {
                id: 'intentionalListening',
                name: 'ðŸŽ¯ Intentional Listening',
                description: 'Set an intention before your session',
                xpReward: 50,
                check: (session) => session.intentionSet === true
            }
        ];

        function getDailyChallenge() {
            // Get challenge based on day of year
            const dayOfYear = Math.floor((Date.now() - new Date(new Date().getFullYear(), 0, 0)) / 86400000);
            const challengeIndex = dayOfYear % DAILY_CHALLENGES.length;
            return DAILY_CHALLENGES[challengeIndex];
        }

        function checkDailyChallenge(session) {
            const today = new Date().toISOString().split('T')[0];

            // Check if challenge already completed today
            if (userProgress.dailyChallengesCompleted &&
                userProgress.dailyChallengesCompleted[today]) {
                return;
            }

            const challenge = getDailyChallenge();

            if (challenge.check(session)) {
                // Challenge completed!
                if (!userProgress.dailyChallengesCompleted) {
                    userProgress.dailyChallengesCompleted = {};
                }
                userProgress.dailyChallengesCompleted[today] = challenge.id;

                awardXP(challenge.xpReward);
                showDailyChallengeComplete(challenge);
                saveProgress();
            }
        }

        function showDailyChallengeComplete(challenge) {
            showNotification(`ðŸŽ‰ Daily Challenge Complete! $${challenge.name} (+$$ {challenge.xpReward} XP)`);
        }

        function renderDailyChallenge() {
            const challenge = getDailyChallenge();
            const today = new Date().toISOString().split('T')[0];
            const completed = userProgress.dailyChallengesCompleted &&
                             userProgress.dailyChallengesCompleted[today];

            return `
                <div style="
                    background: ${completed ? 'linear-gradient(135deg, rgba(34,197,94,0.2), rgba(22,163,74,0.2))' : 'linear-gradient(135deg, rgba(139,92,246,0.15), rgba(251,191,36,0.15))'};
                    border: 2px solid ${completed ? '#22c55e' : 'rgba(251,191,36,0.3)'};
                    border-radius: 16px;
                    padding: 20px;
                    position: relative;
                ">
                    ${completed ? `
                        <div style="
                            position: absolute;
                            top: -12px;
                            right: 20px;
                            background: #22c55e;
                            color: #fff;
                            padding: 6px 16px;
                            border-radius: 20px;
                            font-size: 12px;
                            font-weight: 700;
                        ">âœ“ COMPLETED</div>
                    ` : ''}

                    <div style="display: flex; align-items: center; gap: 15px;">
                        <div style="font-size: 48px;">
                            ${challenge.name.split(' ')[0]}
                        </div>
                        <div style="flex: 1;">
                            <div style="color: #fbbf24; font-size: 14px; font-weight: 600; margin-bottom: 5px;">
                                TODAY'S CHALLENGE
                            </div>
                            <h4 style="color: #fff; font-size: 18px; font-weight: 600; margin-bottom: 5px;">
                                ${challenge.name}
                            </h4>
                            <p style="color: #a78bfa; font-size: 13px; margin-bottom: 10px;">
                                ${challenge.description}
                            </p>
                            <div style="
                                display: inline-block;
                                background: rgba(251,191,36,0.2);
                                color: #fbbf24;
                                padding: 4px 12px;
                                border-radius: 12px;
                                font-size: 12px;
                                font-weight: 600;
                            ">
                                +${challenge.xpReward} XP
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // ============================================
        // NOTIFICATION SYSTEM
        // ============================================

        function showNotification(message, duration = 3000) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #8b5cf6, #6b46c1);
                color: #fff;
                padding: 15px 25px;
                border-radius: 12px;
                box-shadow: 0 8px 20px rgba(139,92,246,0.4);
                z-index: 10002;
                animation: slideInRight 0.3s ease;
                max-width: 350px;
                font-size: 14px;
                font-weight: 600;
            `;
            notification.textContent = message;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.transition = 'opacity 0.5s';
                notification.style.opacity = '0';
                setTimeout(() => notification.remove(), 500);
            }, duration);
        }

        // ============================================
        // LOCAL STORAGE PERSISTENCE
        // ============================================

        function saveProgress() {
            try {
                // Convert Sets to Arrays for JSON serialization
                const saveData = {
                    ...userProgress,
                    frequenciesUsed: Array.from(userProgress.frequenciesUsed),
                    categoriesExplored: Array.from(userProgress.categoriesExplored),
                    achievements: Array.from(userProgress.achievements)
                };

                localStorage.setItem('genesisProgress', JSON.stringify(saveData));
            } catch (error) {
                console.error('Failed to save progress:', error);
            }
        }

        function loadProgress() {
            try {
                const saved = localStorage.getItem('genesisProgress');
                if (saved) {
                    const data = JSON.parse(saved);

                    // Convert Arrays back to Sets
                    userProgress.frequenciesUsed = new Set(data.frequenciesUsed || []);
                    userProgress.categoriesExplored = new Set(data.categoriesExplored || []);
                    userProgress.achievements = new Set(data.achievements || []);

                    // Copy other properties
                    Object.assign(userProgress, {
                        ...data,
                        frequenciesUsed: userProgress.frequenciesUsed,
                        categoriesExplored: userProgress.categoriesExplored,
                        achievements: userProgress.achievements
                    });

                    return true;
                }
            } catch (error) {
                console.error('Failed to load progress:', error);
            }
            return false;
        }

        // ============================================
        // UTILITY FUNCTIONS
        // ============================================

        function generateUUID() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                const r = Math.random() * 16 | 0;
                const v = c === 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }

        function unlockTrack(trackId) {
            if (!userProgress.unlockedTracks) {
                userProgress.unlockedTracks = [];
            }
            if (!userProgress.unlockedTracks.includes(trackId)) {
                userProgress.unlockedTracks.push(trackId);
                saveProgress();
            }
        }

        // ============================================
        // CSS ANIMATIONS
        // ============================================

        const styles = `
        <style>
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.5);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideOutRight {
            from {
                opacity: 1;
                transform: translateX(0);
            }
            to {
                opacity: 0;
                transform: translateX(100px);
            }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        </style>
        `;

        // Inject styles
        document.head.insertAdjacentHTML('beforeend', styles);

        // ============================================
        // INITIALIZATION
        // ============================================

        // Load progress on app start
        loadProgress();

        // Check for achievements periodically
        setInterval(() => {
            checkAllAchievements();
        }, 30000); // Every 30 seconds

        // Export functions for use in your app
        window.GenesisAchievements = {
            recordSession,
            checkAllAchievements,
            renderProgressDashboard,
            showAllAchievements,
            renderDailyChallenge,
            saveProgress,
            loadProgress,
            userProgress
        };

        console.log('ðŸ† Genesis Achievements System Loaded!');

        // Background audio toggle for premium users
        let backgroundAudioEnabled = false;

        function toggleBackgroundAudio() {
            // Check if user is premium
            const isPremium = localStorage.getItem('premiumAccessGranted') === 'true';
            if (!isPremium) {
                alert('Background audio is a premium feature. Please unlock premium access first.');
                return;
            }

            backgroundAudioEnabled = !backgroundAudioEnabled;

            if (backgroundAudioEnabled) {
                // Enable background audio for premium users
                enableBackgroundAudio();
                alert('ðŸŽµ Premium Background Audio Enabled!\nFrequencies will continue playing when the app is minimized.');
            } else {
                // Disable background audio
                disableBackgroundAudio();
                alert('Background audio disabled.');
            }
        }

        function enableBackgroundAudio() {
            // Request wake lock if available (prevents screen from sleeping)
            if ('wakeLock' in navigator) {
                navigator.wakeLock.request('screen').catch(err => {
                    console.log('Wake lock not available:', err);
                });
            }

            // Handle visibility changes to keep audio playing
            document.addEventListener('visibilitychange', handleVisibilityChange);

            // Resume audio context if suspended
            if (window.generator && window.generator.audioContext) {
                if (window.generator.audioContext.state === 'suspended') {
                    window.generator.audioContext.resume();
                }
            }
        }

        function disableBackgroundAudio() {
            // Release wake lock
            if ('wakeLock' in navigator && navigator.wakeLock) {
                navigator.wakeLock.release();
            }

            // Remove visibility change listener
            document.removeEventListener('visibilitychange', handleVisibilityChange);
        }

        function handleVisibilityChange() {
            if (document.hidden) {
                // App is minimized/backgrounded
                console.log('App minimized - keeping audio active for premium user');

                // Ensure audio context stays active
                if (window.generator && window.generator.audioContext) {
                    if (window.generator.audioContext.state === 'suspended') {
                        window.generator.audioContext.resume().catch(err => {
                            console.log('Failed to resume audio context:', err);
                        });
                    }
                }
            } else {
                // App is focused again
                console.log('App focused - audio context active');
            }
        }

        // Initialize progress on load
        loadProgress();

        // Render Instructions Categories (like recipes)
        function renderInstructionsCategories() {
            const container = document.getElementById('instructionsAccordion');
            if (!container) return;
            container.innerHTML = '';

            // Define instruction categories
            const instructionCategories = {
                "Getting Started": [
                    { id: 'welcome', icon: 'ðŸŒŸ', title: 'Welcome to Genesis Frequencies', content: instructionsSections.find(s => s.id === 'welcome').content },
                    { id: 'quickStart', icon: 'âš¡', title: 'Quick Start Guide', content: instructionsSections.find(s => s.id === 'quickStart').content },
                    { id: 'myJourney', icon: 'ðŸ“–', title: 'The Discovery', content: instructionsSections.find(s => s.id === 'myJourney').content }
                ],
                "Understanding": [
                    { id: 'whyWorks', icon: 'ðŸ’¡', title: 'Why 37 & 73 Hz Work', content: instructionsSections.find(s => s.id === 'whyWorks').content },
                    { id: 'trinity', icon: 'ðŸ”º', title: 'The Trinity Foundation', content: instructionsSections.find(s => s.id === 'trinity').content },
                    { id: 'categories', icon: 'ðŸ“‚', title: 'Frequency Categories', content: instructionsSections.find(s => s.id === 'categories').content }
                ],
                "Using the Frequencies": [
                    { id: 'waterCharging', icon: 'ðŸ’§', title: 'Quantum Holy Water', content: instructionsSections.find(s => s.id === 'waterCharging').content },
                    { id: 'progress', icon: 'ðŸ“Š', title: 'Your Spiritual Journey', content: instructionsSections.find(s => s.id === 'progress').content }
                ]
            };

            // Create category tabs
            Object.keys(instructionCategories).forEach((categoryName, categoryIndex) => {
                const categoryTab = document.createElement('div');
                categoryTab.className = 'category-tab';

                const categoryIcons = {
                    "Getting Started": "ðŸš€",
                    "Understanding": "ðŸ§ ",
                    "Using the Frequencies": "ðŸŽµ"
                };

                categoryTab.innerHTML = `
                    <div class="category-header">
                        <div class="category-title">
                            <span class="category-icon">${categoryIcons[categoryName] || 'ðŸ“–'}</span>
                            <span>${categoryName}</span>
                            <span class="category-icon">${categoryIcons[categoryName] || 'ðŸ“–'}</span>
                        </div>
                        <div class="category-arrow">â–¶</div>
                    </div>
                    <div class="category-content">
                        <div class="category-tracks"></div>
                    </div>
                `;

                const header = categoryTab.querySelector('.category-header');
                header.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    categoryTab.classList.toggle('expanded');
                });

                const tracksContainer = categoryTab.querySelector('.category-tracks');

                // Add sections to category
                instructionCategories[categoryName].forEach((section) => {
                    const sectionElement = document.createElement('div');
                    sectionElement.className = 'recipe-item';
                    sectionElement.innerHTML = `
                        <div class="recipe-info">
                            <div class="recipe-name">${section.icon} ${section.title}</div>
                        </div>
                        <div class="recipe-buttons">
                            <button class="track-btn info-btn" title="Read this section">ðŸ“–</button>
                        </div>
                    `;

                    const infoBtn = sectionElement.querySelector('.info-btn');

                    infoBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        showInstructionModal(section);
                    });

                    // Also allow clicking the info area to open
                    const infoArea = sectionElement.querySelector('.recipe-info');
                    infoArea.addEventListener('click', (e) => {
                        e.stopPropagation();
                        showInstructionModal(section);
                    });

                    tracksContainer.appendChild(sectionElement);
                });

                container.appendChild(categoryTab);
            });
        }

        // Show instruction modal
        function showInstructionModal(section) {
            // Create modal overlay
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                z-index: 1000001;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 20px;
            `;

            modal.innerHTML = `
                <div style="background: rgba(26,0,51,0.97); border-radius: 18px; padding: 30px; max-width: 800px; max-height: 80vh; overflow-y: auto; position: relative; color: #fff;">
                    <button class="btn-close" style="background: none; border: none; color: #c4b5fd; font-size: 28px; cursor: pointer; position: absolute; top: 15px; right: 20px;">âœ•</button>
                    <div style="text-align: center; margin-bottom: 20px;">
                        <h2 style="font-size: 24px; color: #fbbf24; font-weight: 800; margin: 0;">
                            ${section.icon} ${section.title}
                        </h2>
                    </div>
                    <div style="line-height: 1.6;">
                        ${section.content}
                    </div>
                </div>
            `;

            // Close modal functionality
            const closeBtn = modal.querySelector('.btn-close');
            closeBtn.addEventListener('click', () => {
                document.body.removeChild(modal);
            });

            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            });

            document.body.appendChild(modal);
        }

        // Search/filter instructions
        function filterInstructions(query) {
            const panels = document.querySelectorAll('.accordion-panel');
            panels.forEach(panel => {
                const title = panel.querySelector('.accordion-header').textContent.toLowerCase();
                const content = panel.querySelector('.accordion-content').textContent.toLowerCase();
                if (title.includes(query) || content.includes(query)) {
                    panel.style.display = '';
                } else {
                    panel.style.display = 'none';
                }
            });
        }

        // Add search input to instructions panel
        function addInstructionsSearch() {
        // Removed: instructions search bar logic
        }

        // Call rendering on panel open
        // toggleInstructions is defined at the top

        function showInfoModal(recipe) {
            const modal = document.getElementById('infoModal');
            const title = document.getElementById('modalTitle');
            const freqs = document.getElementById('modalFreqs');
            const body = document.getElementById('modalBody');
            
            title.textContent = recipe.name;
            freqs.textContent = `${recipe.frequencies.join(' Hz + ')} Hz`;
            
            // Prevent body scroll when modal opens
            document.body.style.overflow = 'hidden';
            
            if (recipe.fullInfo) {
                body.innerHTML = `
                    <h3>What It Is</h3>
                    <p>${recipe.fullInfo.whatItIs}</p>
                    
                    <h3>Benefits</h3>
                    <p>${recipe.fullInfo.benefits}</p>
                    
                    <h3>How To Use</h3>
                    <p>${recipe.fullInfo.howToUse}</p>
                `;
            } else {
                body.innerHTML = `<p>${recipe.description}</p>`;
            }
            
            modal.classList.add('active');
        }
        
        function closeInfoModal() {
            const modal = document.getElementById('infoModal');
            modal.classList.remove('active');
            // Restore body scroll
            document.body.style.overflow = '';
        }
        
        // Close modal when clicking outside
        document.addEventListener('click', (e) => {
            const modal = document.getElementById('infoModal');
            if (e.target === modal) {
                closeInfoModal();
            }
        });

        // Close modal with ESC key for accessibility
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' || e.keyCode === 27) {
                const infoModal = document.getElementById('infoModal');
                const upgradeModal = document.getElementById('upgradeModal');
                const immersiveWelcome = document.getElementById('immersiveWelcome');
                
                if (infoModal && infoModal.classList.contains('active')) {
                    closeInfoModal();
                }
                if (upgradeModal && upgradeModal.style.display === 'flex') {
                    closeUpgradeModal();
                }
                if (immersiveWelcome && immersiveWelcome.classList.contains('active')) {
                    skipToApp();
                }
            }
        });

        class FrequencyGenerator {
            constructor() {
                this.audioContext = null;
                this.oscillators = [];
                this.gainNodes = [];
                this.isPlaying = false;
                this.selectedRecipe = null;
                this.countdownInterval = null;
                this.startTime = null;
                this.totalDuration = 0;
                
                this.initializeElements();
                this.loadRecipes();
                this.attachEventListeners();
            }

            initializeElements() {
                this.elements = {
                    freq1: document.getElementById('freq1'),
                    freq2: document.getElementById('freq2'),
                    freq3: document.getElementById('freq3'),
                    volume1: document.getElementById('volume1'),
                    volume2: document.getElementById('volume2'),
                    volume3: document.getElementById('volume3'),
                    volume1Value: document.getElementById('volume1Value'),
                    volume2Value: document.getElementById('volume2Value'),
                    volume3Value: document.getElementById('volume3Value'),
                    duration: document.getElementById('duration'),
                    playBtn: document.getElementById('playBtn'),
                    stopBtn: document.getElementById('stopBtn'),
                    exportBtn: document.getElementById('exportBtn'),
                    resetBtn: document.getElementById('resetBtn'),
                    status: document.getElementById('status'),
                    recipes: document.getElementById('recipes')
                };
            }

            loadRecipes() {
                this.elements.recipes.innerHTML = '';
                
                // Define category order
                const categoryOrder = [
                    "Biblical & Original",
                    "Angel Numbers",
                    "Cosmic & Planetary",
                    "Master Numbers",
                    "Solfeggio & Healing",
                    "Wellness & States",
                    "Chakra Frequencies"
                ];
                
                // Create category tabs in specified order
                categoryOrder.forEach((category, categoryIndex) => {
                    const categoryTab = document.createElement('div');
                    categoryTab.className = 'category-tab';
                    
                    const categoryIcons = {
                        "Biblical & Original": "âœï¸",
                        "Solfeggio & Healing": "ðŸ’š",
                        "Angel Numbers": "ðŸ‘¼",
                        "Master Numbers": "ðŸŒŸ",
                        "Cosmic & Planetary": "ðŸŒŒ",
                        "Wellness & States": "ðŸ§˜",
                        "Chakra Frequencies": "ðŸŒ€"
                    };

                    const categoryKeys = {
                        "Biblical & Original": "catBiblical",
                        "Solfeggio & Healing": "catSolfeggio",
                        "Angel Numbers": "catAngel",
                        "Master Numbers": "catMaster",
                        "Cosmic & Planetary": "catCosmic",
                        "Wellness & States": "catWellness",
                        "Chakra Frequencies": "catChakra"
                    };
                    
                    categoryTab.innerHTML = `
                        <div class="category-header">
                            <div class="category-title">
                                <span class="category-icon">${categoryIcons[category] || 'ðŸŽµ'}</span>
                                <span data-translate="${categoryKeys[category]}">${category}</span>
                                <span class="category-icon">${categoryIcons[category] || 'ðŸŽµ'}</span>
                            </div>
                            <div class="category-arrow">â–¶</div>
                        </div>
                        <div class="category-content">
                            <div class="category-tracks"></div>
                        </div>
                    `;
                    
                    const header = categoryTab.querySelector('.category-header');
                    header.addEventListener('click', () => {
                        categoryTab.classList.toggle('expanded');
                    });
                    
                    const tracksContainer = categoryTab.querySelector('.category-tracks');
                    
                    // Add recipes to category
                    trinityRecipes[category].forEach((recipe) => {
                        const recipeElement = document.createElement('div');
                        recipeElement.className = 'recipe-item';
                        recipeElement.innerHTML = `
                            <div class="recipe-info">
                                <div class="recipe-name" data-translate="track${recipe.name.replace(/[^a-zA-Z0-9]/g, '').replace(/\s+/g, '')}">${recipe.name}</div>
                                <div class="recipe-freqs">${recipe.frequencies.join(' Hz + ')} Hz</div>
                            </div>
                            <div class="recipe-buttons">
                                <button class="track-btn play-btn" title="Play this track">â–¶</button>
                                <button class="track-btn info-btn" title="Learn more">â„¹</button>
                            </div>
                        `;
                        
                        const playBtn = recipeElement.querySelector('.play-btn');
                        const infoBtn = recipeElement.querySelector('.info-btn');
                        
                        playBtn.addEventListener('click', (e) => {
                            e.stopPropagation();
                            this.selectRecipe(recipe);
                            // Auto-play after selection
                            setTimeout(() => this.play(), 300);
                        });
                        
                        infoBtn.addEventListener('click', (e) => {
                            e.stopPropagation();
                            showInfoModal(recipe);
                        });
                        
                        // Also allow clicking the info area to load without playing
                        const infoArea = recipeElement.querySelector('.recipe-info');
                        infoArea.addEventListener('click', (e) => {
                            e.stopPropagation();
                            this.selectRecipe(recipe);
                        });
                        
                        tracksContainer.appendChild(recipeElement);
                    });
                    
                    this.elements.recipes.appendChild(categoryTab);
                });
            }

            selectRecipe(recipe) {
                // Remove previous selection
                document.querySelectorAll('.recipe-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                // Add selection to clicked recipe - find it by name
                document.querySelectorAll('.recipe-item').forEach(item => {
                    const nameElement = item.querySelector('.recipe-name');
                    if (nameElement && nameElement.textContent === recipe.name) {
                        item.classList.add('active');
                    }
                });
                
                // Load recipe frequencies
                const frequencies = [
                    recipe.frequencies[0] || 37,
                    recipe.frequencies[1] || 73,
                    recipe.frequencies[2] || 0
                ];
                
                this.elements.freq1.value = frequencies[0];
                this.elements.freq2.value = frequencies[1];
                this.elements.freq3.value = frequencies[2];
                
                // Apply therapeutic volume balancing (from Python generator)
                const activeFreqs = frequencies.filter(f => f > 0);
                const foundationFreq = Math.min(...activeFreqs);
                
                frequencies.forEach((freq, i) => {
                    if (freq > 0) {
                        let amplitude = 1.0;
                        
                        // Determine base amplitude based on frequency range
                        if (freq === foundationFreq || freq <= 100) {
                            amplitude = 1.0;
                        } else if (freq <= 400) {
                            amplitude = 0.2;
                        } else if (freq <= 1000) {
                            amplitude = 0.1;
                        } else {
                            amplitude = 0.05;
                        }
                        
                        // Scale non-foundation frequencies by number of active frequencies
                        // BUT only if they're NOT in the â‰¤100 Hz range (keep 37 & 73 at 100%)
                        if (freq !== foundationFreq && freq > 100) {
                            amplitude = amplitude / activeFreqs.length;
                        }
                        
                        // Convert to percentage (0-100) and set volume
                        const volumePercent = Math.round(amplitude * 100);
                        const volumeElement = [this.elements.volume1, this.elements.volume2, this.elements.volume3][i];
                        const volumeValueElement = [this.elements.volume1Value, this.elements.volume2Value, this.elements.volume3Value][i];
                        
                        volumeElement.value = volumePercent;
                        volumeValueElement.textContent = `${volumePercent}%`;
                    }
                });
                
                this.selectedRecipe = recipe;
                this.updateStatus(`âœ¨ Selected: ${recipe.name} (Auto-balanced volumes)`);
            }

            attachEventListeners() {
                this.elements.playBtn.addEventListener('click', () => this.play());
                this.elements.stopBtn.addEventListener('click', () => this.stop());
                this.elements.exportBtn.addEventListener('click', () => this.export());
                this.elements.resetBtn.addEventListener('click', () => this.reset());
                
                // Individual volume controls
                this.elements.volume1.addEventListener('input', (e) => {
                    this.elements.volume1Value.textContent = `${e.target.value}%`;
                    this.updateVolume();
                });
                
                this.elements.volume2.addEventListener('input', (e) => {
                    this.elements.volume2Value.textContent = `${e.target.value}%`;
                    this.updateVolume();
                });
                
                this.elements.volume3.addEventListener('input', (e) => {
                    this.elements.volume3Value.textContent = `${e.target.value}%`;
                    this.updateVolume();
                });
                
                // Duration format validation
                this.elements.duration.addEventListener('input', (e) => {
                    this.validateTimeFormat(e.target);
                });

                // Duration quick buttons
                document.querySelectorAll('.duration-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const time = e.target.dataset.time;
                        this.elements.duration.value = time;
                        this.updateStatus(`â±ï¸ Duration set to ${time}`);
                        
                        // Remove active class from all duration buttons
                        document.querySelectorAll('.duration-btn').forEach(b => b.classList.remove('active'));
                        // Add active class to clicked button
                        e.target.classList.add('active');
                    });
                });
                
                // Auto-select first recipe (Genesis Creation)
                setTimeout(() => {
                    const firstCategory = Object.keys(trinityRecipes)[0];
                    const firstRecipe = trinityRecipes[firstCategory][0];
                    this.selectRecipe(firstRecipe);
                }, 100);
                
                // Track user interactions for silent mode detection
                const trackInteraction = () => {
                    localStorage.setItem('lastUserInteraction', Date.now().toString());
                };
                
                // Track various user interactions
                ['click', 'touchstart', 'keydown', 'scroll'].forEach(event => {
                    document.addEventListener(event, trackInteraction, { passive: true });
                });
            }

            async play() {
                // Haptic feedback for mobile
                if ('vibrate' in navigator) {
                    navigator.vibrate(50);
                }

                if (this.isPlaying) {
                    this.stop();
                    return;
                }

                // Check for silent mode on mobile devices (premium feature)
                const isPremium = localStorage.getItem('premiumAccessGranted') === 'true';
                if (!isPremium && this.isDeviceInSilentMode()) {
                    showUpgradeModal();
                    return;
                }
                if (!isPremium) {
                    // Get current frequencies
                    const frequencies = [
                        parseFloat(this.elements.freq1.value),
                        parseFloat(this.elements.freq2.value),
                        parseFloat(this.elements.freq3.value)
                    ].filter(freq => freq > 0);
                    
                    // Check if using custom frequencies (not the default Trinity: 37, 73, 0)
                    const isDefaultTrinity = frequencies.length === 2 && 
                                           frequencies.includes(37) && 
                                           frequencies.includes(73);
                    
                    if (!isDefaultTrinity) {
                        // Custom frequencies limited to 30 seconds
                        const maxDuration = 30 * 1000; // 30 seconds in milliseconds
                        const currentDuration = parseInt(this.elements.duration.value.split(':')[0]) * 60 * 1000 + 
                                               parseInt(this.elements.duration.value.split(':')[1]) * 1000;
                        
                        if (currentDuration > maxDuration) {
                            alert('Custom frequencies limited to 30 seconds in free version. Use duration buttons for longer sessions or upgrade to Premium!');
                            this.elements.duration.value = '00:30';
                            return;
                        }
                    } else {
                        // Default Trinity frequencies limited to 5 minutes
                        const maxDuration = 5 * 60 * 1000; // 5 minutes in milliseconds
                        const currentDuration = parseInt(this.elements.duration.value.split(':')[0]) * 60 * 1000 + 
                                               parseInt(this.elements.duration.value.split(':')[1]) * 1000;
                        
                        if (currentDuration > maxDuration) {
                            alert('Free version limited to 5-minute sessions. Upgrade to Premium for unlimited listening!');
                            this.elements.duration.value = '05:00';
                            return;
                        }
                    }
                }
                
                try {
                    // Initialize audio context
                    if (!this.audioContext) {
                        this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    }
                    
                    // Resume if suspended
                    if (this.audioContext.state === 'suspended') {
                        await this.audioContext.resume();
                    }

                    // Enable background audio for premium users
                    const isPremium = localStorage.getItem('premiumAccessGranted') === 'true';
                    if (isPremium && !backgroundAudioEnabled) {
                        backgroundAudioEnabled = true;
                        enableBackgroundAudio();
                        console.log('Premium background audio automatically enabled');
                    }
                    
                    // Get frequencies
                    const frequencies = [
                        parseFloat(this.elements.freq1.value),
                        parseFloat(this.elements.freq2.value),
                        parseFloat(this.elements.freq3.value)
                    ].filter(freq => freq > 0);
                    
                    if (frequencies.length === 0) {
                        this.updateStatus('âš ï¸ Please enter at least one frequency');
                        return;
                    }
                    
                    // Create oscillators and gain nodes with individual volumes
                    const volumes = [
                        parseFloat(this.elements.volume1.value) / 100,
                        parseFloat(this.elements.volume2.value) / 100,
                        parseFloat(this.elements.volume3.value) / 100
                    ];
                    
                    const currentTime = this.audioContext.currentTime;
                    const fadeInDuration = 0.5;  // 0.5 second fade in
                    const fadeOutDuration = 0.1; // 0.1 second fade out
                    const totalDuration = this.parseDuration();
                    
                    frequencies.forEach((freq, index) => {
                        const oscillator = this.audioContext.createOscillator();
                        const gainNode = this.audioContext.createGain();
                        
                        oscillator.type = 'sine';
                        oscillator.frequency.setValueAtTime(freq, currentTime);
                        
                        // Start at 0 volume and fade in
                        gainNode.gain.setValueAtTime(0, currentTime);
                        gainNode.gain.linearRampToValueAtTime(volumes[index], currentTime + fadeInDuration);
                        
                        // Schedule fade out before ending
                        const fadeOutStart = currentTime + totalDuration - fadeOutDuration;
                        gainNode.gain.setValueAtTime(volumes[index], fadeOutStart);
                        gainNode.gain.linearRampToValueAtTime(0, currentTime + totalDuration);
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(this.audioContext.destination);
                        
                        oscillator.start(currentTime);
                        oscillator.stop(currentTime + totalDuration);
                        
                        this.oscillators.push(oscillator);
                        this.gainNodes.push(gainNode);
                    });
                    
                    this.isPlaying = true;
                    this.elements.playBtn.textContent = 'â¸ PAUSE';

                    // Add playing class to current recipe's play button
                    document.querySelectorAll('.track-btn.play-btn').forEach(btn => {
                        btn.classList.remove('playing');
                    });
                    if (this.selectedRecipe) {
                        const selectedRecipeElement = Array.from(document.querySelectorAll('.recipe-item')).find(item => {
                            const nameElement = item.querySelector('.recipe-name');
                            return nameElement && nameElement.textContent === this.selectedRecipe.name;
                        });
                        if (selectedRecipeElement) {
                            const playBtn = selectedRecipeElement.querySelector('.play-btn');
                            if (playBtn) {
                                playBtn.classList.add('playing');
                                playBtn.textContent = 'â¸';
                                playBtn.title = 'Pause this track';
                            }
                        }
                    }
                    
                    // Start countdown timer
                    this.totalDuration = this.parseDuration();
                    this.startTime = Date.now();
                    this.startCountdown();
                    
                    // Auto-stop after duration
                    const duration = this.totalDuration * 1000;
                    setTimeout(() => {
                        if (this.isPlaying) {
                            this.stop();
                            // Record session in new achievement system
                            if (window.GenesisAchievements && this.selectedRecipe) {
                                const frequencies = this.selectedRecipe.frequencies || [];
                                const trackId = this.selectedRecipe.name.toLowerCase().replace(/\s+/g, '');
                                // Map category (simplified for now)
                                let category = 'biblical'; // default
                                if (this.selectedRecipe.name.includes('Angel') || this.selectedRecipe.name.includes('11:11')) {
                                    category = 'angelNumbers';
                                } else if (this.selectedRecipe.name.includes('Cosmic') || this.selectedRecipe.name.includes('Planetary')) {
                                    category = 'cosmic';
                                } else if (this.selectedRecipe.name.includes('Solfeggio') || this.selectedRecipe.name.includes('Chakra')) {
                                    category = 'solfeggio';
                                }

                                window.GenesisAchievements.recordSession(
                                    this.totalDuration,
                                    frequencies,
                                    trackId,
                                    category,
                                    {
                                        intentionSet: false, // TODO: track user intentions
                                        waterCharging: false, // TODO: track water charging
                                        journalEntry: null // TODO: track journal entries
                                    }
                                );
                            }
                        }
                    }, duration);
                    
                } catch (error) {
                    console.error('Playback error:', error);
                    this.updateStatus('âŒ Playback error - please try again');
                }
            }

            stop() {
                // Fade out smoothly before stopping
                const fadeOutTime = 0.1;
                const currentTime = this.audioContext ? this.audioContext.currentTime : 0;
                
                this.gainNodes.forEach(gain => {
                    try {
                        gain.gain.cancelScheduledValues(currentTime);
                        gain.gain.setValueAtTime(gain.gain.value, currentTime);
                        gain.gain.linearRampToValueAtTime(0, currentTime + fadeOutTime);
                    } catch (e) {
                        console.warn('Error during fade out:', e);
                    }
                });
                
                // Stop oscillators after fade out
                setTimeout(() => {
                    this.oscillators.forEach(osc => {
                        try {
                            osc.stop();
                            osc.disconnect();
                        } catch (e) {
                            console.warn('Error stopping oscillator:', e);
                        }
                    });
                    
                    this.gainNodes.forEach(gain => {
                        try {
                            gain.disconnect();
                        } catch (e) {
                            console.warn('Error disconnecting gain node:', e);
                        }
                    });
                    
                    this.oscillators = [];
                    this.gainNodes = [];
                }, fadeOutTime * 1000);
                
                this.isPlaying = false;
                
                // Remove playing class from all play buttons and reset text
                document.querySelectorAll('.track-btn.play-btn').forEach(btn => {
                    btn.classList.remove('playing');
                    btn.textContent = 'â–¶';
                    btn.title = 'Play this track';
                });
                
                // Clear countdown timer
                if (this.countdownInterval) {
                    clearInterval(this.countdownInterval);
                    this.countdownInterval = null;
                }
                
                // Restore original duration value
                if (this.originalDuration) {
                    this.elements.duration.value = this.originalDuration;
                }
                
                this.elements.playBtn.textContent = 'â–¶ PLAY';
                this.updateStatus('â–¡ Stopped - Ready to Generate');
            }

            startCountdown() {
                // Store original duration to restore later
                this.originalDuration = this.elements.duration.value;
                
                const updateCountdown = () => {
                    if (!this.isPlaying) return;
                    
                    const elapsed = (Date.now() - this.startTime) / 1000;
                    const remaining = Math.max(0, this.totalDuration - elapsed);
                    
                    const minutes = Math.floor(remaining / 60);
                    const seconds = Math.floor(remaining % 60);
                    const timeStr = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    
                    // Update duration input with countdown
                    this.elements.duration.value = timeStr;
                    
                    const frequencies = [
                        parseFloat(this.elements.freq1.value),
                        parseFloat(this.elements.freq2.value),
                        parseFloat(this.elements.freq3.value)
                    ].filter(freq => freq > 0);
                    
                    this.updateStatus(`â–¶ Playing ${frequencies.join(' Hz + ')} Hz | â±ï¸ ${timeStr} remaining`);
                    
                    if (remaining <= 0) {
                        clearInterval(this.countdownInterval);
                        this.countdownInterval = null;
                    }
                };
                
                updateCountdown();
                this.countdownInterval = setInterval(updateCountdown, 1000);
            }

            updateVolume() {
                if (this.isPlaying) {
                    const volumes = [
                        parseFloat(this.elements.volume1.value) / 100,
                        parseFloat(this.elements.volume2.value) / 100,
                        parseFloat(this.elements.volume3.value) / 100
                    ];
                    
                    this.gainNodes.forEach((gainNode, index) => {
                        gainNode.gain.setValueAtTime(volumes[index], this.audioContext.currentTime);
                    });
                }
            }

            isDeviceInSilentMode() {
                // Check if device is likely in silent mode
                // This is a heuristic since there's no direct API for silent mode detection
                
                // Check if we're on a mobile device
                const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                if (!isMobile) return false;
                
                // Try to detect if audio output is muted or very low
                // We can check the device's audio capabilities and user preferences
                try {
                    // Check if the device has vibration API (mobile indicator)
                    const hasVibration = 'vibrate' in navigator;
                    
                    // Check if we're in a WebView or PWA context where silent mode might be enforced
                    const isStandalone = window.matchMedia('(display-mode: standalone)').matches || 
                                       window.navigator.standalone === true;
                    
                    // On iOS, silent mode often prevents audio playback in certain contexts
                    // On Android, we can check if the audio context fails to start
                    if (this.audioContext && this.audioContext.state === 'suspended') {
                        return true; // Audio context suspended might indicate silent mode
                    }
                    
                    // Check if the user has recently interacted (recent interaction suggests not silent)
                    const lastInteraction = localStorage.getItem('lastUserInteraction');
                    if (lastInteraction) {
                        const timeSinceInteraction = Date.now() - parseInt(lastInteraction);
                        // If more than 5 minutes since interaction, might be in silent mode
                        if (timeSinceInteraction > 5 * 60 * 1000) {
                            return true;
                        }
                    }
                    
                    return false;
                } catch (e) {
                    console.log('Silent mode detection error:', e);
                    return false;
                }
            }

            validateTimeFormat(input) {
                const value = input.value;
                const timeRegex = /^([0-9]{1,2}):([0-5][0-9])$/;
                
                if (!timeRegex.test(value)) {
                    // Auto-format common patterns
                    if (value.length === 1) {
                        input.value = `0${value}:00`;
                    } else if (value.length === 2 && !value.includes(':')) {
                        input.value = `${value}:00`;
                    } else if (value.includes(':') && value.split(':')[1].length === 1) {
                        const [min, sec] = value.split(':');
                        input.value = `${min}:0${sec}`;
                    }
                }
            }

            parseDuration() {
                const value = this.elements.duration.value;
                const timeRegex = /^([0-9]{1,2}):([0-5][0-9])$/;
                
                if (timeRegex.test(value)) {
                    const [min, sec] = value.split(':').map(Number);
                    return min * 60 + sec;
                }
                
                // Fallback to default 5 minutes
                return 300;
            }

            export() {
                // Check if user is premium
                const isPremium = localStorage.getItem('premiumAccessGranted') === 'true';
                if (!isPremium) {
                    showUpgradeModal();
                    return;
                }

                // Create downloadable WAV file with current frequencies
                const frequencies = [
                    parseFloat(this.elements.freq1.value),
                    parseFloat(this.elements.freq2.value),
                    parseFloat(this.elements.freq3.value)
                ].filter(freq => freq > 0);
                
                if (frequencies.length === 0) {
                    this.updateStatus('âš ï¸ Please enter frequencies first');
                    return;
                }
                
                // Generate WAV file (simplified for demo)
                const sampleRate = 44100;
                const duration = this.parseDuration();
                const numSamples = sampleRate * duration;

                // Create WAV buffer
                const buffer = new ArrayBuffer(44 + numSamples * 2);
                const view = new DataView(buffer);

                // WAV header
                const writeString = (offset, string) => {
                    for (let i = 0; i < string.length; i++) {
                        view.setUint8(offset + i, string.charCodeAt(i));
                    }
                };

                writeString(0, 'RIFF');
                view.setUint32(4, 36 + numSamples * 2, true);
                writeString(8, 'WAVE');
                writeString(12, 'fmt ');
                view.setUint32(16, 16, true);
                view.setUint16(20, 1, true);
                view.setUint16(22, 1, true);
                view.setUint32(24, sampleRate, true);
                view.setUint32(28, sampleRate * 2, true);
                view.setUint16(32, 2, true);
                view.setUint16(34, 16, true);
                writeString(36, 'data');
                view.setUint32(40, numSamples * 2, true);

                // Generate sine wave data
                const volumes = [
                    parseFloat(this.elements.volume1.value) / 100,
                    parseFloat(this.elements.volume2.value) / 100,
                    parseFloat(this.elements.volume3.value) / 100
                ];

                let offset = 44;

                for (let i = 0; i < numSamples; i++) {
                    let sample = 0;
                    const time = i / sampleRate;

                    frequencies.forEach((freq, index) => {
                        sample += Math.sin(2 * Math.PI * freq * time) * volumes[index];
                    });

                    sample = sample / frequencies.length * 0.8; // Scale to avoid clipping
                    const intSample = Math.floor(sample * 32767);
                    view.setInt16(offset, intSample, true);
                    offset += 2;
                }

                // Download the WAV file
                const blob = new Blob([buffer], { type: 'audio/wav' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `genesis_${frequencies.join('_')}_hz.wav`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                // Track export action for achievements
                if (window.GenesisAchievements) {
                    window.GenesisAchievements.userProgress.wavExports++;
                    window.GenesisAchievements.saveProgress();
                    window.GenesisAchievements.checkAllAchievements();
                }

                this.updateStatus(`â¬‡ Exported: ${frequencies.join(' + ')} Hz`);
            }

            reset() {
                this.stop();
                
                // Reset to Trinity defaults
                this.elements.freq1.value = 37;
                this.elements.freq2.value = 73;
                this.elements.freq3.value = 0;
                this.elements.volume1.value = 50;
                this.elements.volume2.value = 50;
                this.elements.volume3.value = 50;
                this.elements.volume1Value.textContent = '50%';
                this.elements.volume2Value.textContent = '50%';
                this.elements.volume3Value.textContent = '50%';
                this.elements.duration.value = '05:00';
                
                // Clear recipe selection
                document.querySelectorAll('.recipe-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                this.selectedRecipe = null;
                this.updateStatus('â†º Reset to Trinity Foundation');
            }

            updateStatus(message) {
                this.elements.status.textContent = message;
                this.elements.status.className = this.isPlaying ? 'status playing floating' : 'status stopped';
            }
        }

        // Homescreen PWA Prompt System
        let deferredPrompt;
        let pwaPromptShown = false;

        function initializePWAPrompt() {
            // Check if already installed
            if (window.matchMedia('(display-mode: standalone)').matches || 
                window.navigator.standalone === true) {
                if (window.GenesisAchievements) {
                    window.GenesisAchievements.userProgress.installedPWA = true;
                    window.GenesisAchievements.saveProgress();
                    window.GenesisAchievements.checkAllAchievements();
                }
                hideHomescreenButton();
                return;
            }

            // Listen for the beforeinstallprompt event
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                
                // Show prompt after some usage (3 sessions)
                if (userProgress.totalSessions >= 3 && !pwaPromptShown) {
                    setTimeout(() => showPWAPrompt(), 2000);
                }
            });

            // Listen for successful installation
            window.addEventListener('appinstalled', () => {
                if (window.GenesisAchievements) {
                    window.GenesisAchievements.userProgress.installedPWA = true;
                    window.GenesisAchievements.saveProgress();
                    window.GenesisAchievements.checkAllAchievements();
                }
                hidePWAPrompt();
                hideHomescreenButton();
                showToast('ðŸŽ‰ App added to home screen! Achievement unlocked!', 'success');
            });
        }

        function hideHomescreenButton() {
            const btn = document.getElementById('homescreenBtn');
            if (btn) btn.style.display = 'none';
        }

        function showPWAPrompt() {
            if (pwaPromptShown) return;
            pwaPromptShown = true;

            const prompt = document.createElement('div');
            prompt.id = 'pwaPrompt';
            prompt.innerHTML = `
                <div style="position: fixed; bottom: 20px; left: 20px; right: 20px; 
                           background: linear-gradient(135deg, rgba(251,191,36,0.95), rgba(139,92,246,0.9)); 
                           border: 2px solid rgba(251,191,36,0.5); border-radius: 15px; 
                           padding: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); 
                           z-index: 1000; text-align: center; backdrop-filter: blur(10px);">
                    <div style="color: #1a0033; font-size: 18px; font-weight: 700; margin-bottom: 10px;">
                        ðŸ“± Unlock Achievement: Add to Home Screen!
                    </div>
                    <div style="color: #1a0033; font-size: 14px; margin-bottom: 15px; line-height: 1.4;">
                        Get the full PWA experience and unlock the "Home Screen Hero" achievement! 
                        Access frequencies instantly and track your progress offline.
                    </div>
                    <div style="display: flex; gap: 10px; justify-content: center;">
                        <button onclick="installPWA()" style="background: #1a0033; color: #fbbf24; 
                                 border: none; border-radius: 25px; padding: 10px 20px; 
                                 font-weight: 600; cursor: pointer;">
                            ðŸš€ Add to Home Screen
                        </button>
                        <button onclick="hidePWAPrompt()" style="background: rgba(26,0,51,0.7); 
                                 color: #c4b5fd; border: none; border-radius: 25px; 
                                 padding: 10px 20px; font-weight: 600; cursor: pointer;">
                            Maybe Later
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(prompt);
        }

        function hidePWAPrompt() {
            const prompt = document.getElementById('pwaPrompt');
            if (prompt) prompt.remove();
        }

        async function installPWA() {
            if (!deferredPrompt) return;
            
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            
            if (outcome === 'accepted') {
                if (window.GenesisAchievements) {
                    window.GenesisAchievements.userProgress.installedPWA = true;
                    window.GenesisAchievements.saveProgress();
                    window.GenesisAchievements.checkAllAchievements();
                }
                showToast('ðŸŽ‰ App added to home screen! Achievement unlocked!', 'success');
            }
            
            deferredPrompt = null;
            hidePWAPrompt();
        }

        // Subtle Notification System
        let notificationInterval;
        let lastNotificationTime = 0;

        function initializeNotifications() {
            // Check if notifications are already granted
            if (Notification.permission === 'granted') {
                startNotificationSchedule();
                return;
            }

            // Request permission on first significant usage (2 sessions)
            if (userProgress.totalSessions >= 2 && Notification.permission === 'default') {
                setTimeout(() => requestNotificationPermission(), 3000);
            }
        }

        function requestNotificationPermission() {
            if ('Notification' in window) {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        showToast('ðŸ”” Notifications enabled! You\'ll receive gentle reminders.', 'info');
                        startNotificationSchedule();
                    }
                });
            }
        }

        function startNotificationSchedule() {
            // Send notifications every 2-4 days, but only if user hasn't used app recently
            notificationInterval = setInterval(() => {
                const now = Date.now();
                const daysSinceLastUse = (now - new Date(userProgress.lastSession || 0)) / (1000 * 60 * 60 * 24);
                
                // Only notify if it's been 2+ days since last use
                if (daysSinceLastUse >= 2 && (now - lastNotificationTime) > (1000 * 60 * 60 * 24 * 2)) {
                    sendGentleNotification();
                }
            }, 1000 * 60 * 60 * 6); // Check every 6 hours
        }

        function sendGentleNotification() {
            if (Notification.permission !== 'granted') return;

            const messages = [
                {
                    title: 'ðŸŒŸ Your frequencies are waiting',
                    body: 'Take a moment to connect with the sacred vibrations of Genesis.',
                    icon: '/Genesis.png'
                },
                {
                    title: 'ðŸ’š How are you feeling today?',
                    body: 'A short frequency session can help center your energy.',
                    icon: '/Genesis.png'
                },
                {
                    title: 'ðŸ”® Continue your journey',
                    body: 'Each session brings you closer to harmonic balance.',
                    icon: '/Genesis.png'
                },
                {
                    title: 'âœ¨ Ready for unlimited access?',
                    body: 'Upgrade to premium for custom durations and all features.',
                    icon: '/Genesis.png'
                },
                {
                    title: 'ðŸŽµ Sacred frequencies calling',
                    body: 'Your daily practice awaits. Just 5-10 minutes of peace.',
                    icon: '/Genesis.png'
                }
            ];

            const message = messages[Math.floor(Math.random() * messages.length)];
            
            const notification = new Notification(message.title, {
                body: message.body,
                icon: message.icon,
                badge: '/Genesis.png',
                tag: 'genesis-reminder', // Prevents spam if multiple
                requireInteraction: false,
                silent: true // Gentle, not disruptive
            });

            lastNotificationTime = Date.now();

            // Auto-close after 10 seconds
            setTimeout(() => notification.close(), 10000);

            // Click handler to open app
            notification.onclick = () => {
                window.focus();
                notification.close();
            };
        }

        // Toast notification system for in-app messages
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed; top: 20px; right: 20px; 
                background: ${type === 'success' ? 'rgba(34,197,94,0.9)' : 
                           type === 'error' ? 'rgba(239,68,68,0.9)' : 'rgba(251,191,36,0.9)'}; 
                color: white; padding: 15px 20px; border-radius: 10px; 
                box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 10000; 
                font-weight: 600; max-width: 300px; backdrop-filter: blur(10px);
            `;
            toast.textContent = message;
            document.body.appendChild(toast);

            setTimeout(() => {
                toast.style.transition = 'opacity 0.5s';
                toast.style.opacity = '0';
                setTimeout(() => toast.remove(), 500);
            }, 3000);
        }

        // Make functions globally available
        window.installPWA = installPWA;
        window.showPWAPrompt = showPWAPrompt;
        window.hidePWAPrompt = hidePWAPrompt;
        window.requestNotificationPermission = requestNotificationPermission;
        window.showToast = showToast;


// Initialize generator when page loads
document.addEventListener('DOMContentLoaded', function() {
    // Initialize the frequency generator first
    window.generator = new FrequencyGenerator();
    
    // Cleanup on page unload to prevent memory leaks
    window.addEventListener('beforeunload', function() {
        if (window.generator && window.generator.isPlaying) {
            window.generator.stop();
        }
        // Clear any notification intervals
        if (typeof notificationInterval !== 'undefined' && notificationInterval) {
            clearInterval(notificationInterval);
        }
        // Remove visibility change listeners
        if (typeof handleVisibilityChange !== 'undefined') {
            document.removeEventListener('visibilitychange', handleVisibilityChange);
        }
    });
    
    // Update progress section if available
    if (typeof instructionsSections !== 'undefined') {
        renderInstructionsCategories(); // Update progress section with loaded data
    }
    
    // Load saved language preference
    const savedLanguage = localStorage.getItem('preferredLanguage');
    if (savedLanguage && translations[savedLanguage]) {
        changeLanguage(savedLanguage);
    }

    // Register Service Worker for PWA functionality
    if ('serviceWorker' in navigator && (location.protocol === 'http:' || location.protocol === 'https:')) {
        navigator.serviceWorker.register('/Frequency-Generator/sw.js', { scope: '/Frequency-Generator/' })
            .then(registration => {
                console.log('Service Worker registered:', registration);
            })
            .catch(error => {
                console.log('Service Worker registration failed:', error);
            });
    }

    // Initialize homescreen and notification features
    initializePWAPrompt();
    initializeNotifications();

    // Show immersive welcome on first visit, welcome back toast for return visits
    console.log('DOMContentLoaded fired - checking localStorage immediately');
    console.log('Raw localStorage onboardingComplete:', localStorage.getItem('onboardingComplete'));
    console.log('All localStorage keys:', Object.keys(localStorage));
    
    // Check for test parameter to force clean state
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.has('test')) {
        console.log('Test parameter detected - forcing clean localStorage state');
        localStorage.clear();
    }
    
    // Debug: Add global function to clear localStorage
    window.clearOnboarding = function() {
        localStorage.removeItem('onboardingComplete');
        console.log('Onboarding cleared - refresh page to see welcome flow');
    };
    
    const onboardingComplete = localStorage.getItem('onboardingComplete') === 'true';
    const forceShowWelcome = new URLSearchParams(window.location.search).get('showWelcome') === 'true';
    console.log('Modal initialization - onboardingComplete:', onboardingComplete);
    console.log('Force show welcome:', forceShowWelcome);
    
    // Debug: Check if modal element exists
    const welcomeModal = document.getElementById('immersiveWelcome');
    console.log('Welcome modal element:', welcomeModal);
    
    if (!onboardingComplete || forceShowWelcome) {
        // First time user - show welcome sequence
        console.log('New user - showing welcome modal');
        document.getElementById('upgradeBenefitsModal').classList.remove('active'); // Ensure upgrade modal is hidden
        
        // Add active class and verify
        welcomeModal.classList.add('active');
        console.log('Added active class, modal classes:', welcomeModal.className);
        console.log('Modal computed style display:', window.getComputedStyle(welcomeModal).display);
    } else {
        // Returning user - show welcome back toast after a brief delay
        console.log('Returning user - showing welcome toast');
        setTimeout(() => {
            showToast('Welcome back! Ready to explore sacred frequencies? ðŸŒŸ');
        }, 1000);
    }

    // Handle premium-locked inputs
    updatePremiumFeatures();

    // Listen for storage changes (when premium access is granted)
    window.addEventListener('storage', function(e) {
        if (e.key === 'premiumAccessGranted') {
            updatePremiumFeatures();
        }
    });

    // Debug check after initialization
    setTimeout(() => {
        console.log('Modal state check:');
        const welcomeModal = document.getElementById('immersiveWelcome');
        const upgradeModal = document.getElementById('upgradeBenefitsModal');
        console.log('- immersiveWelcome exists:', !!welcomeModal);
        console.log('- immersiveWelcome active:', welcomeModal ? welcomeModal.classList.contains('active') : 'N/A');
        console.log('- immersiveWelcome display:', welcomeModal ? window.getComputedStyle(welcomeModal).display : 'N/A');
        console.log('- upgradeBenefitsModal active:', upgradeModal ? upgradeModal.classList.contains('active') : 'N/A');
        console.log('- onboardingComplete in localStorage:', localStorage.getItem('onboardingComplete'));
    }, 200);
});

// ============================================
// EXPORT FUNCTIONS
// ============================================

            // Export functions to window for external access
            window.GenesisAchievements = {
                renderAchievementCard,
                renderAchievementsDashboard,
                renderAchievementQuickStats,
                getAchievementProgress,
                showAchievementModal,
                showFullAchievements,
                checkAchievements,
                updateAchievementProgress
            };

console.log('ðŸ”’ Achievement Teaser System Loaded!');
console.log('âœ¨ Locked, In Progress, Almost There, and Unlocked states active!');

</script>
</body>
</html>